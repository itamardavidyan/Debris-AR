{"version":3,"file":"src_js_plugins_recorderManager_recorderManager_ts.82eedd942240a5885572.js","mappings":"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","sources":["webpack://keeptrack.space/./src/js/plugins/recorderManager/CanvasRecorder.js","webpack://keeptrack.space/./src/js/plugins/recorderManager/recorderManager.ts"],"sourcesContent":["// CanvasRecorder.js - smusamashah\n// To record canvas effitiently using MediaRecorder\n// https://webrtc.github.io/samples/src/content/capture/canvas-record/\n\nexport class CanvasRecorder {\n  constructor(canvas, videoBitsPerSec) {\n    let recordedBlobs = [];\n    let supportedType = null;\n    let mediaRecorder = null;\n    let isVideoRecording = false;\n\n    // var stream = canvas.captureStream();\n    const displayMediaOptions = {\n      video: { cursor: 'always' },\n      audio: false,\n    };\n\n    const video = document.createElement('video');\n    video.style.display = 'none';\n\n    const startCapture = (displayMediaOptions) => {\n      let captureStream = null;\n\n      if (window.location.protocol === 'https:' || settingsManager.offline) {\n        if ('getDisplayMedia' in navigator) {\n          return navigator.getDisplayMedia(displayMediaOptions).catch((err) => {\n            console.warn('Error:' + err);\n            return null;\n          });\n        } else if ('getDisplayMedia' in navigator.mediaDevices) {\n          return navigator.mediaDevices.getDisplayMedia(displayMediaOptions).catch((err) => {\n            console.warn('Error:' + err);\n            return null;\n          });\n        } else {\n          console.error('No Recording Support');\n          isVideoRecording = false;\n          $('#menu-record').removeClass('bmenu-item-selected');\n          $('#menu-record').addClass('bmenu-item-disabled');\n          M.toast({\n            html: `Compatibility Error with Recording`,\n          });\n          if (!$('#menu-record:animated').length) {\n            $('#menu-record').effect('shake', { distance: 10 });\n          }\n          return false;\n        }\n      } else {\n        console.error('No Recording Support in Http! Try Https!');\n        isVideoRecording = false;\n        $('#menu-record').removeClass('bmenu-item-selected');\n        $('#menu-record').addClass('bmenu-item-disabled');\n        M.toast({\n          html: `Recording Only Available with HTTPS`,\n        });\n        if (!$('#menu-record:animated').length) {\n          $('#menu-record').effect('shake', { distance: 10 });\n        }\n        return false;\n      }\n    };\n\n    const startRecording = () => {\n      let selectCapture = new Promise(function (resolve, reject) {\n        resolve(startCapture());\n      });\n      selectCapture.then(function startRecording(srcObject) {\n        if (srcObject == false) return;\n        isVideoRecording = true;\n        $('#menu-record').addClass('bmenu-item-selected');\n        let stream = srcObject;\n        video.srcObject = srcObject;\n        let types = ['video/webm', 'video/webm,codecs=vp9', 'video/vp8', 'video/webm;codecs=vp8', 'video/webm;codecs=daala', 'video/webm;codecs=h264', 'video/mpeg'];\n\n        for (let i in types) {\n          if (MediaRecorder.isTypeSupported(types[i])) {\n            supportedType = types[i];\n            break;\n          }\n        }\n        if (supportedType == null) {\n          console.log('No supported type found for MediaRecorder');\n        }\n        let options = {\n          mimeType: supportedType,\n          videoBitsPerSecond: videoBitsPerSec || 10000000, // 10.0Mbps\n          // videoBitsPerSecond: videoBitsPerSec || 5000000 // 5.0Mbps\n          // videoBitsPerSecond: videoBitsPerSec || 2500000 // 2.5Mbps\n        };\n\n        recordedBlobs = [];\n        try {\n          mediaRecorder = new MediaRecorder(stream, options);\n        } catch (e) {\n          // alert('MediaRecorder is not supported by this browser.');\n          isVideoRecording = false;\n          $('#menu-record').removeClass('bmenu-item-selected');\n          console.warn('Exception while creating MediaRecorder:', e);\n          return;\n        }\n\n        console.log('Created MediaRecorder', mediaRecorder, 'with options', options);\n        mediaRecorder.onstop = handleStop;\n        mediaRecorder.ondataavailable = handleDataAvailable;\n        mediaRecorder.start(100); // collect 100ms of data blobs\n        console.log('MediaRecorder started', mediaRecorder);\n      });\n    };\n\n    const handleDataAvailable = (event) => {\n      if (event.data && event.data.size > 0) {\n        recordedBlobs.push(event.data);\n      }\n    };\n\n    const handleStop = (event) => {\n      console.log('Recorder stopped: ', event);\n      const superBuffer = new Blob(recordedBlobs, { type: supportedType });\n      video.src = window.URL.createObjectURL(superBuffer);\n    };\n\n    const stopRecording = () => {\n      mediaRecorder.stop();\n      console.log('Recorded Blobs: ', recordedBlobs);\n      video.controls = true;\n    };\n\n    const download = (fileName) => {\n      const name = fileName || 'recording.webm';\n      const blob = new Blob(recordedBlobs, { type: supportedType });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url;\n      a.download = name;\n      document.body.appendChild(a);\n      a.click();\n      setTimeout(() => {\n        document.body.removeChild(a);\n        window.URL.revokeObjectURL(url);\n      }, 100);\n    };\n\n    const checkIfRecording = () => {\n      return isVideoRecording;\n    };\n\n    const setIsRecording = (bool) => {\n      isVideoRecording = bool;\n    };\n\n    this.checkIfRecording = checkIfRecording;\n    this.setIsRecording = setIsRecording;\n    this.start = startRecording;\n    this.stop = stopRecording;\n    this.save = download;\n  }\n}\n","/* */\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport $ from 'jquery';\nimport { CanvasRecorder } from '@app/js/plugins/recorderManager/CanvasRecorder.js';\nimport { keepTrackApi } from '@app/js/api/externalApi';\nvar recorder;\nexport var init = function () {\n    // Add HTML\n    keepTrackApi.register({\n        method: 'uiManagerInit',\n        cbName: 'recorderManager',\n        cb: function () {\n            // Bottom Icon\n            $('#bottom-icons').append(keepTrackApi.html(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n      <div id=\\\"menu-record\\\" class=\\\"bmenu-item\\\">\\n        <img alt=\\\"video\\\" src=\\\"\\\" delayedsrc=\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAADnElEQVR4nO3cPWwbdRjH8e/jvKA2qHuFCgtUFMcXqGOxgFAkBOUlXdkgEhuDB0AIwQILS8vQEAkWhFo21nRBUBBigcZHsZ2Il04FISQWBhApceyHBZh6vTv73ur8PqvvHv/1//n/v0d3OoOIiIiIiIiIiIiIiIjINLOyB5BUfcfnZ6+zMnKeMjjpcBw4AtyW5/f2l+3/OWp03Mc9N8rsOIMqUrPjh/egzS7tERwFSDULFVfpABpb/uQevAccK3sseamVPYAbcreg429hXGSKJx+quALca42Q9x3Wyh5KESq3AhohZzggkw8V64Iaoa/hfHCTQxzjko34cDhDZ/8vfv7hIfsjk++O6HCSdDKTqMwWtHTZ6yNnI+pzg2vUeL530i4VOa68VSKAoOsLowEfAQsRh3R9npV+YL8XOa4iVOIa4AM2gPtu+BlctTkem8bJhwoE0Ah9jeiL7vUZ55nekv1W3IiKVWoAS5e9zk32fYwXui27UuCQChd5hU9732Na5d0Flb4FHXQKoGSVaENvdUHXFxjwhsOLRPyoo7YyBTChIPRVBrzjcNc45yuAMd1/xe8Z7rPuzqlJ6qQOIO+uoCxJu75mxw8PnFeGQ17FJn8apxWQQhD66p6zgXFnVjUVQAJLX/vx4Qzr7jyedW21oTGCjp8dzbBtJJr8L9PWVwAxHF4C5mIO+9Wc5/pNHklbXwFMZmCwvrvPvb2WXcAs9e2bzK4Bed87qlr3ZfA5TrvXsu1J6uginN4v5rzWa9mFLIopgOQGBu8OD/H6Tt3+zKqoAkjC+NSh3W/ad1mXVgAx3FjdbtrFvOqrC4qR5+RDASsgbfdy0J7EaQWUTAGUTAGUTAGUTAGULPcu6KB1NWlpBZRMAZRMAZRMAZRMAZQssy6oak+sbhVaATEWQ386z/oKIIY5m43QP1kM/UQe9RVAEs6j5nSDjp+r7/jtWZZWAMnNObRru3wfbPmzWRVVAOnd4cb5oOOfBVu+OGkxBTAmhxU3vgk6fu7ur/zIuHUUwGTmHNqHZv/dltxTt+IKIIbB28Ag5rCjbpxvhHyRtr4CiNFbtpdrQxYdPk5w+MNp6yuABLoP2o/by3bKjNPAT1nWVgAp9Jq2OQ8nzHkT+DuLmnpTPkbUPa7/XtLDkr2kF1VHK2BM3z5gV/ste8KM0wbXxq2jACbUa9omc9QNzgKjtOdrC4qhP+uYcgpARERERERERERERERERHL0D2BAC2IfonfQAAAAAElFTkSuQmCC\\\">\\n        <span class=\\\"bmenu-title\\\">Record Video</span>\\n        <div class=\\\"status-icon\\\"></div>\\n      </div>     \\n    \"], [\"\\n      <div id=\\\"menu-record\\\" class=\\\"bmenu-item\\\">\\n        <img alt=\\\"video\\\" src=\\\"\\\" delayedsrc=\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAADnElEQVR4nO3cPWwbdRjH8e/jvKA2qHuFCgtUFMcXqGOxgFAkBOUlXdkgEhuDB0AIwQILS8vQEAkWhFo21nRBUBBigcZHsZ2Il04FISQWBhApceyHBZh6vTv73ur8PqvvHv/1//n/v0d3OoOIiIiIiIiIiIiIiIjINLOyB5BUfcfnZ6+zMnKeMjjpcBw4AtyW5/f2l+3/OWp03Mc9N8rsOIMqUrPjh/egzS7tERwFSDULFVfpABpb/uQevAccK3sseamVPYAbcreg429hXGSKJx+quALca42Q9x3Wyh5KESq3AhohZzggkw8V64Iaoa/hfHCTQxzjko34cDhDZ/8vfv7hIfsjk++O6HCSdDKTqMwWtHTZ6yNnI+pzg2vUeL530i4VOa68VSKAoOsLowEfAQsRh3R9npV+YL8XOa4iVOIa4AM2gPtu+BlctTkem8bJhwoE0Ah9jeiL7vUZ55nekv1W3IiKVWoAS5e9zk32fYwXui27UuCQChd5hU9732Na5d0Flb4FHXQKoGSVaENvdUHXFxjwhsOLRPyoo7YyBTChIPRVBrzjcNc45yuAMd1/xe8Z7rPuzqlJ6qQOIO+uoCxJu75mxw8PnFeGQ17FJn8apxWQQhD66p6zgXFnVjUVQAJLX/vx4Qzr7jyedW21oTGCjp8dzbBtJJr8L9PWVwAxHF4C5mIO+9Wc5/pNHklbXwFMZmCwvrvPvb2WXcAs9e2bzK4Bed87qlr3ZfA5TrvXsu1J6uginN4v5rzWa9mFLIopgOQGBu8OD/H6Tt3+zKqoAkjC+NSh3W/ad1mXVgAx3FjdbtrFvOqrC4qR5+RDASsgbfdy0J7EaQWUTAGUTAGUTAGUTAGULPcu6KB1NWlpBZRMAZRMAZRMAZRMAZQssy6oak+sbhVaATEWQ386z/oKIIY5m43QP1kM/UQe9RVAEs6j5nSDjp+r7/jtWZZWAMnNObRru3wfbPmzWRVVAOnd4cb5oOOfBVu+OGkxBTAmhxU3vgk6fu7ur/zIuHUUwGTmHNqHZv/dltxTt+IKIIbB28Ag5rCjbpxvhHyRtr4CiNFbtpdrQxYdPk5w+MNp6yuABLoP2o/by3bKjNPAT1nWVgAp9Jq2OQ8nzHkT+DuLmnpTPkbUPa7/XtLDkr2kF1VHK2BM3z5gV/ste8KM0wbXxq2jACbUa9omc9QNzgKjtOdrC4qhP+uYcgpARERERERERERERERERHL0D2BAC2IfonfQAAAAAElFTkSuQmCC\\\">\\n        <span class=\\\"bmenu-title\\\">Record Video</span>\\n        <div class=\\\"status-icon\\\"></div>\\n      </div>     \\n    \"]))));\n        },\n    });\n    keepTrackApi.register({\n        method: 'uiManagerOnReady',\n        cbName: 'recorderManager',\n        cb: function () {\n            try {\n                recorder = new CanvasRecorder(document.getElementById('keeptrack-canvas'));\n            }\n            catch (e) {\n                console.log(e);\n            }\n        },\n    });\n    // Add JavaScript\n    keepTrackApi.register({\n        method: 'bottomMenuClick',\n        cbName: 'recordVideo',\n        cb: function (iconName) {\n            if (iconName === 'menu-record') {\n                if (recorder.checkIfRecording()) {\n                    recorder.stop();\n                    recorder.save('keeptrack.webm');\n                    recorder.setIsRecording(false);\n                    $('#menu-record').removeClass('bmenu-item-selected');\n                    return;\n                }\n                else {\n                    try {\n                        recorder.start();\n                    }\n                    catch (e) {\n                        M.toast({\n                            html: \"Compatibility Error with Recording\",\n                        });\n                        recorder.setIsRecording(false);\n                        $('#menu-record').removeClass('bmenu-item-selected');\n                        $('#menu-record').addClass('bmenu-item-disabled');\n                        if (!$('#menu-record:animated').length) {\n                            $('#menu-record').effect('shake', {\n                                distance: 10,\n                            });\n                        }\n                    }\n                    return;\n                }\n            }\n        },\n    });\n};\nvar templateObject_1;\n"],"names":["CanvasRecorder","constructor","canvas","videoBitsPerSec","recordedBlobs","supportedType","mediaRecorder","isVideoRecording","displayMediaOptions","video","cursor","audio","document","createElement","style","display","startCapture","captureStream","window","location","protocol","settingsManager","offline","navigator","getDisplayMedia","catch","err","console","warn","mediaDevices","error","$","removeClass","addClass","M","toast","html","length","effect","distance","startRecording","selectCapture","Promise","resolve","reject","then","srcObject","stream","types","i","MediaRecorder","isTypeSupported","log","options","mimeType","videoBitsPerSecond","e","onstop","handleStop","ondataavailable","handleDataAvailable","start","event","data","size","push","superBuffer","Blob","type","src","URL","createObjectURL","stopRecording","stop","controls","download","fileName","name","blob","url","a","href","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","checkIfRecording","setIsRecording","bool","save"],"sourceRoot":""}