/*! For license information please see orbitCruncher.js.LICENSE.txt */
(()=>{"use strict";var o,t,s,a=Math.PI,e=2*a,d=a/180,n=6378.137,i=60/Math.sqrt(650944.0944816993),c=n*i/60,r=1/i,h=.00108262998905,m=-253215306e-14/h,l=2/3;function p(o,t,s,a,e,d){var n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return 367*o-Math.floor(7*(o+Math.floor((t+9)/12))*.25)+Math.floor(275*t/9)+s+1721013.5+((n/6e4+d/60+e)/60+a)/24}function x(o,t,s,a,e,d,n){if(o instanceof Date){var i=o;return p(i.getUTCFullYear(),i.getUTCMonth()+1,i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds())}return p(o,t,s,a,e,d,n)}function g(o,t){var s,d,n,i,c,r,h,m,l,p,x,g,M,f,z,u,v,b,T=o.e3,y=o.ee2,q=o.peo,U=o.pgho,C=o.pho,F=o.pinco,I=o.plo,L=o.se2,w=o.se3,D=o.sgh2,E=o.sgh3,S=o.sgh4,N=o.sh2,j=o.sh3,H=o.si2,O=o.si3,P=o.sl2,Y=o.sl3,J=o.sl4,A=o.t,k=o.xgh2,B=o.xgh3,G=o.xgh4,K=o.xh2,Q=o.xh3,R=o.xi2,V=o.xi3,W=o.xl2,X=o.xl3,Z=o.xl4,$=o.zmol,_=o.zmos,oo=t.init,to=t.opsmode,so=t.ep,ao=t.inclp,eo=t.nodep,no=t.argpp,io=t.mp;b=_+119459e-10*A,"y"===oo&&(b=_),v=b+.0335*Math.sin(b);var co=L*(h=.5*(f=Math.sin(v))*f-.25)+w*(m=-.5*f*Math.cos(v)),ro=H*h+O*m,ho=P*h+Y*m+J*f,mo=D*h+E*m+S*f,lo=N*h+j*m;return b=$+.00015835218*A,"y"===oo&&(b=$),v=b+.1098*Math.sin(b),l=co+(y*(h=.5*(f=Math.sin(v))*f-.25)+T*(m=-.5*f*Math.cos(v))),g=ro+(R*h+V*m),M=ho+(W*h+X*m+Z*f),p=mo+(k*h+B*m+G*f),x=lo+(K*h+Q*m),"n"===oo&&(M-=I,p-=U,x-=C,ao+=g-=F,so+=l-=q,i=Math.sin(ao),n=Math.cos(ao),ao>=.2?(no+=p-=n*(x/=i),eo+=x,io+=M):(s=i*(r=Math.sin(eo)),d=i*(c=Math.cos(eo)),s+=x*c+g*n*r,d+=-x*r+g*n*c,(eo%=e)<0&&"a"===to&&(eo+=e),z=io+no+n*eo,z+=M+p-g*eo*i,u=eo,(eo=Math.atan2(s,d))<0&&"a"===to&&(eo+=e),Math.abs(u-eo)>a&&(eo<u?eo+=e:eo-=e),no=z-(io+=M)-n*eo)),{ep:so,inclp:ao,nodep:eo,argpp:no,mp:io}}function M(o){var t=(o-2451545)/36525,s=-62e-7*t*t*t+.093104*t*t+3164400184.812866*t+67310.54841;return(s=s*d/240%e)<0&&(s+=e),s}function f(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?M(x.apply(void 0,arguments)):M.apply(void 0,arguments)}function z(o,t){var s,d,r,p,x,M,f,z,u,v,b,T,y,q,U,C,F,I,L,w,D,E,S,N,j,H;o.t=t,o.error=0;var O=o.mo+o.mdot*o.t,P=o.argpo+o.argpdot*o.t,Y=o.nodeo+o.nodedot*o.t;z=P,w=O;var J=o.t*o.t;if(E=Y+o.nodecf*J,C=1-o.cc1*o.t,F=o.bstar*o.cc4*o.t,I=o.t2cof*J,1!==o.isimp){M=o.omgcof*o.t;var A=1+o.eta*Math.cos(O);w=O+(U=M+o.xmcof*(A*A*A-o.delmo)),z=P-U,T=(b=J*o.t)*o.t,C=C-o.d2*J-o.d3*b-o.d4*T,F+=o.bstar*o.cc5*(Math.sin(w)-o.sinmao),I=I+o.t3cof*b+T*(o.t4cof+o.t*o.t5cof)}D=o.no;var k=o.ecco;if(L=o.inclo,"d"===o.method){y=o.t;var B=function(o){var t,s,a,d,n,i,c,r,h=o.irez,m=o.d2201,l=o.d2211,p=o.d3210,x=o.d3222,g=o.d4410,M=o.d4422,f=o.d5220,z=o.d5232,u=o.d5421,v=o.d5433,b=o.del1,T=o.del2,y=o.del3,q=o.argpo,U=o.argpdot,C=o.t,F=o.xfact,I=o.xlamo,L=o.no,w=o.atime,D=o.em,E=o.argpm,S=o.inclm,N=o.xli,j=o.mm,H=o.xni,O=o.nodem,P=o.nm,Y=.13130908,J=2.8843198,A=.37448087,k=5.7686396,B=.95240898,G=1.8014998,K=1.050833,Q=4.4108898,R=259200,V=0,W=0,X=(o.gsto+.0043752690880113*o.tc)%e;if(D+=o.dedt*C,S+=o.didt*C,E+=o.domdt*C,O+=o.dnodt*C,j+=o.dmdt*C,0!==h){(0===w||C*w<=0||Math.abs(C)<Math.abs(w))&&(w=0,H=L,N=I),t=C>0?720:-720;for(var Z=381;381===Z;)2!==h?(c=b*Math.sin(N-Y)+T*Math.sin(2*(N-J))+y*Math.sin(3*(N-A)),n=H+F,i=b*Math.cos(N-Y)+2*T*Math.cos(2*(N-J))+3*y*Math.cos(3*(N-A)),i*=n):(a=(r=q+U*w)+r,s=N+N,c=m*Math.sin(a+N-k)+l*Math.sin(N-k)+p*Math.sin(r+N-B)+x*Math.sin(-r+N-B)+g*Math.sin(a+s-G)+M*Math.sin(s-G)+f*Math.sin(r+N-K)+z*Math.sin(-r+N-K)+u*Math.sin(r+s-Q)+v*Math.sin(-r+s-Q),n=H+F,i=m*Math.cos(a+N-k)+l*Math.cos(N-k)+p*Math.cos(r+N-B)+x*Math.cos(-r+N-B)+f*Math.cos(r+N-K)+z*Math.cos(-r+N-K)+2*g*Math.cos(a+s-G)+M*Math.cos(s-G)+u*Math.cos(r+s-Q)+v*Math.cos(-r+s-Q),i*=n),Math.abs(C-w)>=720?Z=381:(W=C-w,Z=0),381===Z&&(N+=n*t+c*R,H+=c*t+i*R,w+=t);P=H+c*W+i*W*W*.5,d=N+n*W+c*W*W*.5,1!==h?(j=d-2*O+2*X,V=P-L):(j=d-O-E+X,V=P-L),P=L+V}return{atime:w,em:D,argpm:E,inclm:S,xli:N,mm:j,xni:H,nodem:O,dndt:V,nm:P}}({irez:o.irez,d2201:o.d2201,d2211:o.d2211,d3210:o.d3210,d3222:o.d3222,d4410:o.d4410,d4422:o.d4422,d5220:o.d5220,d5232:o.d5232,d5421:o.d5421,d5433:o.d5433,dedt:o.dedt,del1:o.del1,del2:o.del2,del3:o.del3,didt:o.didt,dmdt:o.dmdt,dnodt:o.dnodt,domdt:o.domdt,argpo:o.argpo,argpdot:o.argpdot,t:o.t,tc:y,gsto:o.gsto,xfact:o.xfact,xlamo:o.xlamo,no:o.no,atime:o.atime,em:k,argpm:z,inclm:L,xli:o.xli,mm:w,xni:o.xni,nodem:E,nm:D});k=B.em,z=B.argpm,L=B.inclm,w=B.mm,E=B.nodem,D=B.nm}if(D<=0)return o.error=2,[!1,!1];var G=Math.pow(i/D,l)*C*C;if(D=i/Math.pow(G,1.5),(k-=F)>=1||k<-.001)return o.error=1,[!1,!1];k<1e-6&&(k=1e-6),N=(w+=o.no*I)+z+E;var K=k;if(S=L,u=z%=e,H=E%=e,j=w=((N%=e)-z-E)%e,p=Math.sin(L),r=Math.cos(L),"d"===o.method){var Q=g(o,{inclo:o.inclo,init:"n",ep:K,inclp:S,nodep:H,argpp:u,mp:j,opsmode:o.operationmode});if(K=Q.ep,H=Q.nodep,u=Q.argpp,j=Q.mp,(S=Q.inclp)<0&&(S=-S,H+=a,u-=a),K<0||K>1)return o.error=3,[!1,!1]}"d"===o.method&&(p=Math.sin(S),r=Math.cos(S),o.aycof=-.5*m*p,Math.abs(r+1)>15e-13?o.xlcof=-.25*m*p*(3+5*r)/(1+r):o.xlcof=-.25*m*p*(3+5*r)/15e-13);var R=K*Math.cos(u);U=1/(G*(1-K*K));var V=K*Math.sin(u)+U*o.aycof,W=(j+u+H+U*o.xlcof*R-H)%e;f=W,q=9999.9;for(var X=1;Math.abs(q)>=1e-12&&X<=10;)d=Math.sin(f),q=(W-V*(s=Math.cos(f))+R*d-f)/(q=1-s*R-d*V),Math.abs(q)>=.95&&(q=q>0?.95:-.95),f+=q,X+=1;var Z=R*s+V*d,$=R*d-V*s,_=R*R+V*V,oo=G*(1-_);if(oo<0)return o.error=4,[!1,!1];var to=G*(1-Z),so=Math.sqrt(G)*$/to,ao=Math.sqrt(oo)/to,eo=Math.sqrt(1-_),no=G/to*(d-V-R*(U=$/(1+eo))),io=G/to*(s-R+V*U);v=Math.atan2(no,io);var co=(io+io)*no,ro=1-2*no*no,ho=.5*h*(U=1/oo),mo=ho*U;"d"===o.method&&(x=r*r,o.con41=3*x-1,o.x1mth2=1-x,o.x7thm1=7*x-1);var lo=to*(1-1.5*mo*eo*o.con41)+.5*ho*o.x1mth2*ro;if(lo<1)return o.error=6,{position:!1,velocity:!1};v-=.25*mo*o.x7thm1*co;var po=H+1.5*mo*r*co,xo=S+1.5*mo*r*p*ro,go=so-D*ho*o.x1mth2*co/i,Mo=ao+D*ho*(o.x1mth2*ro+1.5*o.con41)/i,fo=Math.sin(v),zo=Math.cos(v),uo=Math.sin(po),vo=Math.cos(po),bo=Math.sin(xo),To=Math.cos(xo),yo=-uo*To,qo=vo*To,Uo=yo*fo+vo*zo,Co=qo*fo+uo*zo,Fo=bo*fo;return{position:{x:lo*Uo*n,y:lo*Co*n,z:lo*Fo*n},velocity:{x:(go*Uo+Mo*(yo*zo-vo*fo))*c,y:(go*Co+Mo*(qo*zo-uo*fo))*c,z:(go*Fo+Mo*(bo*zo))*c}}}function u(o,t){var s,c=1440/(2*a),p={error:0};p.satnum=o.substring(2,7),p.epochyr=parseInt(o.substring(18,20),10),p.epochdays=parseFloat(o.substring(20,32)),p.ndot=parseFloat(o.substring(33,43)),p.nddot=parseFloat(".".concat(parseInt(o.substring(44,50),10),"E").concat(o.substring(50,52))),p.bstar=parseFloat("".concat(o.substring(53,54),".").concat(parseInt(o.substring(54,59),10),"E").concat(o.substring(59,61))),p.inclo=parseFloat(t.substring(8,16)),p.nodeo=parseFloat(t.substring(17,25)),p.ecco=parseFloat(".".concat(t.substring(26,33))),p.argpo=parseFloat(t.substring(34,42)),p.mo=parseFloat(t.substring(43,51)),p.no=parseFloat(t.substring(52,63)),p.no/=c,p.a=Math.pow(p.no*r,-2/3),p.ndot/=1440*c,p.nddot/=1440*c*1440,p.inclo*=d,p.nodeo*=d,p.argpo*=d,p.mo*=d,p.alta=p.a*(1+p.ecco)-1,p.altp=p.a*(1-p.ecco)-1;var M=function(o,t){for(var s=[31,o%4==0?29:28,31,30,31,30,31,31,30,31,30,31],a=Math.floor(t),e=1,d=0;a>d+s[e-1]&&e<12;)d+=s[e-1],e+=1;var n=e,i=a-d,c=24*(t-a),r=Math.floor(c);c=60*(c-r);var h=Math.floor(c);return{mon:n,day:i,hr:r,minute:h,sec:60*(c-h)}}(s=p.epochyr<57?p.epochyr+2e3:p.epochyr+1900,p.epochdays),u=M.mon,v=M.day,b=M.hr,T=M.minute,y=M.sec;return p.jdsatepoch=x(s,u,v,b,T,y),function(o,t){var s,d,c,r,p,x,M,u,v,b,T,y,q,U,C,F,I,L,w,D,E,S,N,j,H,O,P,Y,J,A,k,B,G,K,Q,R,V,W,X,Z,$,_,oo,to,so,ao,eo,no,io,co,ro,ho,mo=t.opsmode,lo=t.satn,po=t.epoch,xo=t.xbstar,go=t.xecco,Mo=t.xargpo,fo=t.xinclo,zo=t.xmo,uo=t.xno,vo=t.xnodeo;o.isimp=0,o.method="n",o.aycof=0,o.con41=0,o.cc1=0,o.cc4=0,o.cc5=0,o.d2=0,o.d3=0,o.d4=0,o.delmo=0,o.eta=0,o.argpdot=0,o.omgcof=0,o.sinmao=0,o.t=0,o.t2cof=0,o.t3cof=0,o.t4cof=0,o.t5cof=0,o.x1mth2=0,o.x7thm1=0,o.mdot=0,o.nodedot=0,o.xlcof=0,o.xmcof=0,o.nodecf=0,o.irez=0,o.d2201=0,o.d2211=0,o.d3210=0,o.d3222=0,o.d4410=0,o.d4422=0,o.d5220=0,o.d5232=0,o.d5421=0,o.d5433=0,o.dedt=0,o.del1=0,o.del2=0,o.del3=0,o.didt=0,o.dmdt=0,o.dnodt=0,o.domdt=0,o.e3=0,o.ee2=0,o.peo=0,o.pgho=0,o.pho=0,o.pinco=0,o.plo=0,o.se2=0,o.se3=0,o.sgh2=0,o.sgh3=0,o.sgh4=0,o.sh2=0,o.sh3=0,o.si2=0,o.si3=0,o.sl2=0,o.sl3=0,o.sl4=0,o.gsto=0,o.xfact=0,o.xgh2=0,o.xgh3=0,o.xgh4=0,o.xh2=0,o.xh3=0,o.xi2=0,o.xi3=0,o.xl2=0,o.xl3=0,o.xl4=0,o.xlamo=0,o.zmol=0,o.zmos=0,o.atime=0,o.xli=0,o.xni=0,o.bstar=xo,o.ecco=go,o.argpo=Mo,o.inclo=fo,o.mo=zo,o.no=uo,o.nodeo=vo,o.operationmode=mo,o.init="y",o.t=0;var bo=function(o){var t=o.ecco,s=o.epoch,a=o.inclo,d=o.opsmode,n=o.no,c=t*t,r=1-c,m=Math.sqrt(r),p=Math.cos(a),x=p*p,g=Math.pow(i/n,l),M=.75*h*(3*x-1)/(m*r),z=M/(g*g),u=g*(1-z*z-z*(1/3+134*z*z/81));n/=1+(z=M/(u*u));var v,b=Math.pow(i/n,l),T=Math.sin(a),y=b*r,q=1-5*x,U=-q-x-x,C=1/b,F=y*y,I=b*(1-t);if("a"===d){var L=s-7305,w=Math.floor(L+1e-8),D=.017202791694070362;(v=(1.7321343856509375+D*w+(D+e)*(L-w)+L*L*5075514194322695e-30)%e)<0&&(v+=e)}else v=f(s+2433281.5);return{no:n,method:"n",ainv:C,ao:b,con41:U,con42:q,cosio:p,cosio2:x,eccsq:c,omeosq:r,posq:F,rp:I,rteosq:m,sinio:T,gsto:v}}({satn:lo,ecco:o.ecco,epoch:po,inclo:o.inclo,no:o.no,method:o.method,opsmode:o.operationmode}),To=bo.ao,yo=bo.con42,qo=bo.cosio,Uo=bo.cosio2,Co=bo.eccsq,Fo=bo.omeosq,Io=bo.posq,Lo=bo.rp,wo=bo.rteosq,Do=bo.sinio;if(o.no=bo.no,o.con41=bo.con41,o.gsto=bo.gsto,o.error=0,Fo>=0||o.no>=0){if(o.isimp=0,Lo<220/n+1&&(o.isimp=1),j=1.0122292763545218,L=1.8802768006108976e-9,(C=(Lo-1)*n)<156){j=C-78,C<98&&(j=20);var Eo=(120-j)/n;L=Eo*Eo*Eo*Eo,j=j/n+1}F=1/Io,_=1/(To-j),o.eta=To*o.ecco*_,y=o.eta*o.eta,T=o.ecco*o.eta,I=Math.abs(1-y),r=(M=(x=L*Math.pow(_,4))/Math.pow(I,3.5))*o.no*(To*(1+1.5*y+T*(4+y))+.375*h*_/I*o.con41*(8+3*y*(8+y))),o.cc1=o.bstar*r,p=0,o.ecco>1e-4&&(p=-2*x*_*m*o.no*Do/o.ecco),o.x1mth2=1-Uo,o.cc4=2*o.no*M*To*Fo*(o.eta*(2+.5*y)+o.ecco*(.5+2*y)-h*_/(To*I)*(-3*o.con41*(1-2*T+y*(1.5-.5*T))+.75*o.x1mth2*(2*y-T*(1+y))*Math.cos(2*o.argpo))),o.cc5=2*M*To*Fo*(1+2.75*(y+T)+T*y),u=Uo*Uo,Z=.5*(X=1.5*h*F*o.no)*h*F,$=7.551504421875001e-7*F*F*o.no,o.mdot=o.no+.5*X*wo*o.con41+.0625*Z*wo*(13-78*Uo+137*u),o.argpdot=-.5*X*yo+.0625*Z*(7-114*Uo+395*u)+$*(3-36*Uo+49*u),to=-X*qo,o.nodedot=to+(.5*Z*(4-19*Uo)+2*$*(3-7*Uo))*qo,oo=o.argpdot+o.nodedot,o.omgcof=o.bstar*p*Math.cos(o.argpo),o.xmcof=0,o.ecco>1e-4&&(o.xmcof=-l*x*o.bstar/T),o.nodecf=3.5*Fo*to*o.cc1,o.t2cof=1.5*o.cc1,Math.abs(qo+1)>15e-13?o.xlcof=-.25*m*Do*(3+5*qo)/(1+qo):o.xlcof=-.25*m*Do*(3+5*qo)/15e-13,o.aycof=-.5*m*Do;var So=1+o.eta*Math.cos(o.mo);if(o.delmo=So*So*So,o.sinmao=Math.sin(o.mo),o.x7thm1=7*Uo-1,2*a/o.no>=225){o.method="d",o.isimp=1,q=o.inclo;var No=function(o){var t,s,a,d,n,i,c,r,h,m,l,p,x,g,M,f,z,u,v,b,T,y,q,U,C,F,I,L,w,D,E,S,N,j,H,O,P,Y,J,A,k,B,G,K,Q,R,V,W,X,Z,$,_,oo,to,so,ao,eo,no,io,co,ro,ho,mo,lo=o.epoch,po=o.argpp,xo=o.tc,go=o.inclp,Mo=o.nodep,fo=.01675,zo=.0549,uo=o.np,vo=o.ep,bo=Math.sin(Mo),To=Math.cos(Mo),yo=Math.sin(po),qo=Math.cos(po),Uo=Math.sin(go),Co=Math.cos(go),Fo=vo*vo,Io=1-Fo,Lo=Math.sqrt(Io),wo=lo+18261.5+xo/1440,Do=(4.523602-.00092422029*wo)%e,Eo=Math.sin(Do),So=Math.cos(Do),No=.91375164-.03568096*So,jo=Math.sqrt(1-No*No),Ho=.089683511*Eo/jo,Oo=Math.sqrt(1-Ho*Ho),Po=5.8351514+.001944368*wo,Yo=.39785416*Eo/jo,Jo=Oo*So+.91744867*Ho*Eo;Yo=Math.atan2(Yo,Jo),Yo+=Po-Do;var Ao=Math.cos(Yo),ko=Math.sin(Yo);b=.1945905,T=-.98088458,U=.91744867,C=.39785416,y=To,q=bo,l=29864797e-13;for(var Bo=1/uo,Go=0;Go<2;)so=-6*(t=b*y+T*U*q)*(n=-Uo*(c=-b*q+T*U*y)+Co*(r=T*C))+Fo*(-24*(p=t*qo+(s=Co*c+Uo*r)*yo)*(u=n*qo)-6*(g=-t*yo+s*qo)*(f=n*yo)),ao=-6*(t*(i=-Uo*(h=T*q+b*U*y)+Co*(m=b*C))+(a=-T*y+b*U*q)*n)+Fo*(-24*((x=a*qo+(d=Co*h+Uo*m)*yo)*u+p*(v=i*qo))+-6*(g*(z=i*yo)+(M=-a*yo+d*qo)*f)),eo=-6*a*i+Fo*(-24*x*v-6*M*z),no=6*s*n+Fo*(24*p*f-6*g*u),io=6*(d*n+s*i)+Fo*(24*(x*f+p*z)-6*(M*u+g*v)),co=6*d*i+Fo*(24*x*z-6*M*v),_=(_=3*(t*t+s*s)+(ro=12*p*p-3*g*g)*Fo)+_+Io*ro,oo=(oo=6*(t*a+s*d)+(ho=24*p*x-6*g*M)*Fo)+oo+Io*ho,to=(to=3*(a*a+d*d)+(mo=12*x*x-3*M*M)*Fo)+to+Io*mo,R=-.5*(V=l*Bo)/Lo,Q=-15*vo*(W=V*Lo),X=p*g+x*M,Z=x*g+p*M,$=x*M-p*g,1===(Go+=1)&&(F=Q,I=R,L=V,w=W,D=X,E=Z,S=$,N=_,j=oo,H=to,O=so,P=ao,Y=eo,J=no,A=io,k=co,B=ro,G=ho,K=mo,b=Ao,T=ko,U=No,C=jo,y=Oo*To+Ho*bo,q=bo*Oo-To*Ho,l=4.7968065e-7);return{snodm:bo,cnodm:To,sinim:Uo,cosim:Co,sinomm:yo,cosomm:qo,day:wo,e3:2*Q*$,ee2:2*Q*Z,em:vo,emsq:Fo,gam:Po,peo:0,pgho:0,pho:0,pinco:0,plo:0,rtemsq:Lo,se2:2*F*E,se3:2*F*S,sgh2:2*w*G,sgh3:2*w*(K-B),sgh4:-18*w*fo,sh2:-2*I*A,sh3:-2*I*(k-J),si2:2*I*P,si3:2*I*(Y-O),sl2:-2*L*j,sl3:-2*L*(H-N),sl4:-2*L*(-21-9*Fo)*fo,s1:Q,s2:R,s3:V,s4:W,s5:X,s6:Z,s7:$,ss1:F,ss2:I,ss3:L,ss4:w,ss5:D,ss6:E,ss7:S,sz1:N,sz2:j,sz3:H,sz11:O,sz12:P,sz13:Y,sz21:J,sz22:A,sz23:k,sz31:B,sz32:G,sz33:K,xgh2:2*W*ho,xgh3:2*W*(mo-ro),xgh4:-18*W*zo,xh2:-2*R*io,xh3:-2*R*(co-no),xi2:2*R*ao,xi3:2*R*(eo-so),xl2:-2*V*oo,xl3:-2*V*(to-_),xl4:-2*V*(-21-9*Fo)*zo,nm:uo,z1:_,z2:oo,z3:to,z11:so,z12:ao,z13:eo,z21:no,z22:io,z23:co,z31:ro,z32:ho,z33:mo,zmol:(.2299715*wo-Po+4.7199672)%e,zmos:(6.2565837+.017201977*wo)%e}}({epoch:po,ep:o.ecco,argpp:o.argpo,tc:0,inclp:o.inclo,nodep:o.nodeo,np:o.no,e3:o.e3,ee2:o.ee2,peo:o.peo,pgho:o.pgho,pho:o.pho,pinco:o.pinco,plo:o.plo,se2:o.se2,se3:o.se3,sgh2:o.sgh2,sgh3:o.sgh3,sgh4:o.sgh4,sh2:o.sh2,sh3:o.sh3,si2:o.si2,si3:o.si3,sl2:o.sl2,sl3:o.sl3,sl4:o.sl4,xgh2:o.xgh2,xgh3:o.xgh3,xgh4:o.xgh4,xh2:o.xh2,xh3:o.xh3,xi2:o.xi2,xi3:o.xi3,xl2:o.xl2,xl3:o.xl3,xl4:o.xl4,zmol:o.zmol,zmos:o.zmos});o.e3=No.e3,o.ee2=No.ee2,o.peo=No.peo,o.pgho=No.pgho,o.pho=No.pho,o.pinco=No.pinco,o.plo=No.plo,o.se2=No.se2,o.se3=No.se3,o.sgh2=No.sgh2,o.sgh3=No.sgh3,o.sgh4=No.sgh4,o.sh2=No.sh2,o.sh3=No.sh3,o.si2=No.si2,o.si3=No.si3,o.sl2=No.sl2,o.sl3=No.sl3,o.sl4=No.sl4,d=No.sinim,s=No.cosim,v=No.em,b=No.emsq,w=No.s1,D=No.s2,E=No.s3,S=No.s4,N=No.s5,H=No.ss1,O=No.ss2,P=No.ss3,Y=No.ss4,J=No.ss5,A=No.sz1,k=No.sz3,B=No.sz11,G=No.sz13,K=No.sz21,Q=No.sz23,R=No.sz31,V=No.sz33,o.xgh2=No.xgh2,o.xgh3=No.xgh3,o.xgh4=No.xgh4,o.xh2=No.xh2,o.xh3=No.xh3,o.xi2=No.xi2,o.xi3=No.xi3,o.xl2=No.xl2,o.xl3=No.xl3,o.xl4=No.xl4,o.zmol=No.zmol,o.zmos=No.zmos,U=No.nm,so=No.z1,ao=No.z3,eo=No.z11,no=No.z13,io=No.z21,co=No.z23,ro=No.z31,ho=No.z33;var jo=g(o,{inclo:q,init:o.init,ep:o.ecco,inclp:o.inclo,nodep:o.nodeo,argpp:o.argpo,mp:o.mo,opsmode:o.operationmode});o.ecco=jo.ep,o.inclo=jo.inclp,o.nodeo=jo.nodep,o.argpo=jo.argpp,o.mo=jo.mp;var Ho=function(o){var t,s,d,n,c,r,h,m,p,x,g,M,f,z,u,v,b,T,y,q,U=o.cosim,C=o.argpo,F=o.s2,I=o.sinim,L=o.ss2,w=o.t,D=o.mo,E=o.mdot,S=o.no,N=o.nodeo,j=o.nodedot,H=o.xpidot,O=o.ecco,P=o.eccsq,Y=o.emsq,J=o.em,A=o.argpm,k=o.inclm,B=o.mm,G=o.nm,K=o.nodem,Q=o.irez,R=o.atime,V=o.d2201,W=o.d2211,X=o.d3210,Z=o.d3222,$=o.d4410,_=o.d4422,oo=o.d5220,to=o.d5232,so=o.d5421,ao=o.d5433,eo=o.dnodt,no=o.domdt,io=o.del1,co=o.del2,ro=o.del3,ho=o.xfact,mo=o.xlamo,lo=o.xli,po=o.xni,xo=.0043752690880113,go=.00015835218,Mo=119459e-10;Q=0,G<.0052359877&&G>.0034906585&&(Q=1),G>=.00826&&G<=.00924&&J>=.5&&(Q=2);var fo=-Mo*L*(o.sz21+o.sz23);(k<.052359877||k>a-.052359877)&&(fo=0),0!==I&&(fo/=I);var zo=-go*F*(o.z21+o.z23);(k<.052359877||k>a-.052359877)&&(zo=0),no=o.ss4*Mo*(o.sz31+o.sz33-6)-U*fo+o.s4*go*(o.z31+o.z33-6),eo=fo,0!==I&&(no-=U/I*zo,eo+=zo/I);var uo=(o.gsto+o.tc*xo)%e;if(J+=(T=o.ss1*Mo*o.ss5+o.s1*go*o.s5)*w,k+=(y=L*Mo*(o.sz11+o.sz13)+F*go*(o.z11+o.z13))*w,A+=no*w,K+=eo*w,B+=(q=-Mo*o.ss3*(o.sz1+o.sz3-14-6*Y)-go*o.s3*(o.z1+o.z3-14-6*Y))*w,0!==Q){if(u=Math.pow(G/i,l),2===Q){var vo=J,bo=Y;b=(J=O)*(Y=P),J<=.65?(d=3.616-13.247*J+16.29*Y,n=117.39*J-19.302-228.419*Y+156.591*b,c=109.7927*J-18.9068-214.6334*Y+146.5816*b,r=242.694*J-41.122-471.094*Y+313.953*b,h=841.88*J-146.407-1629.014*Y+1083.435*b,m=3017.977*J-532.114-5740.032*Y+3708.276*b):(d=331.819*J-72.099-508.738*Y+266.724*b,n=1582.851*J-346.844-2415.925*Y+1246.113*b,c=1554.908*J-342.585-2366.899*Y+1215.972*b,r=4758.686*J-1052.797-7193.992*Y+3651.957*b,h=16178.11*J-3581.69-24462.77*Y+12422.52*b,m=J>.715?29936.92*J-5149.66-54087.36*Y+31324.56*b:1464.74-4664.75*J+3763.64*Y),J<.7?(g=4988.61*J-919.2277-9064.77*Y+5542.21*b,p=4568.6173*J-822.71072-8491.4146*Y+5337.524*b,x=4690.25*J-853.666-8624.77*Y+5341.4*b):(g=161616.52*J-37995.78-229838.2*Y+109377.94*b,p=218913.95*J-51752.104-309468.16*Y+146349.42*b,x=170470.89*J-40023.88-242699.48*Y+115605.82*b),V=(f=17891679e-13*(z=G*G*3*(u*u)))*(t=.75*(1+2*U+(v=U*U)))*(-.306-.44*(J-.64)),W=f*(1.5*(M=I*I))*d,X=(f=3.7393792e-7*(z*=u))*(1.875*I*(1-2*U-3*v))*n,Z=f*(-1.875*I*(1+2*U-3*v))*c,$=(f=2*(z*=u)*7.3636953e-9)*(35*M*t)*r,_=f*(39.375*M*M)*h,oo=(f=1.1428639e-7*(z*=u))*(9.84375*I*(M*(1-2*U-5*v)+.33333333*(4*U-2+6*v)))*m,to=f*(I*(4.92187512*M*(-2-4*U+10*v)+6.56250012*(1+2*U-3*v)))*x,so=(f=2*z*2.1765803e-9)*(29.53125*I*(2-8*U+v*(8*U-12+10*v)))*p,ao=f*(29.53125*I*(-2-8*U+v*(12+8*U-10*v)))*g,mo=(D+N+N-(uo+uo))%e,ho=E+q+2*(j+eo-xo)-S,J=vo,Y=bo}1===Q&&(s=1+U,co=2*(io=3*G*G*u*u)*(t=.75*(1+U)*(1+U))*(1+Y*(.8125*Y-2.5))*17891679e-13,ro=3*io*(s*=1.875*s*s)*(1+Y*(6.60937*Y-6))*2.2123015e-7*u,io=io*(.9375*I*I*(1+3*U)-.75*(1+U))*(n=1+2*Y)*21460748e-13*u,mo=(D+N+C-uo)%e,ho=E+H+q+no+eo-(S+xo)),lo=mo,po=S,R=0,G=S+0}return{em:J,argpm:A,inclm:k,mm:B,nm:G,nodem:K,irez:Q,atime:R,d2201:V,d2211:W,d3210:X,d3222:Z,d4410:$,d4422:_,d5220:oo,d5232:to,d5421:so,d5433:ao,dedt:T,didt:y,dmdt:q,dndt:0,dnodt:eo,domdt:no,del1:io,del2:co,del3:ro,xfact:ho,xlamo:mo,xli:lo,xni:po}}({cosim:s,emsq:b,argpo:o.argpo,s1:w,s2:D,s3:E,s4:S,s5:N,sinim:d,ss1:H,ss2:O,ss3:P,ss4:Y,ss5:J,sz1:A,sz3:k,sz11:B,sz13:G,sz21:K,sz23:Q,sz31:R,sz33:V,t:o.t,tc:0,gsto:o.gsto,mo:o.mo,mdot:o.mdot,no:o.no,nodeo:o.nodeo,nodedot:o.nodedot,xpidot:oo,z1:so,z3:ao,z11:eo,z13:no,z21:io,z23:co,z31:ro,z33:ho,ecco:o.ecco,eccsq:Co,em:v,argpm:0,inclm:q,mm:0,nm:U,nodem:0,irez:o.irez,atime:o.atime,d2201:o.d2201,d2211:o.d2211,d3210:o.d3210,d3222:o.d3222,d4410:o.d4410,d4422:o.d4422,d5220:o.d5220,d5232:o.d5232,d5421:o.d5421,d5433:o.d5433,dedt:o.dedt,didt:o.didt,dmdt:o.dmdt,dnodt:o.dnodt,domdt:o.domdt,del1:o.del1,del2:o.del2,del3:o.del3,xfact:o.xfact,xlamo:o.xlamo,xli:o.xli,xni:o.xni});o.irez=Ho.irez,o.atime=Ho.atime,o.d2201=Ho.d2201,o.d2211=Ho.d2211,o.d3210=Ho.d3210,o.d3222=Ho.d3222,o.d4410=Ho.d4410,o.d4422=Ho.d4422,o.d5220=Ho.d5220,o.d5232=Ho.d5232,o.d5421=Ho.d5421,o.d5433=Ho.d5433,o.dedt=Ho.dedt,o.didt=Ho.didt,o.dmdt=Ho.dmdt,o.dnodt=Ho.dnodt,o.domdt=Ho.domdt,o.del1=Ho.del1,o.del2=Ho.del2,o.del3=Ho.del3,o.xfact=Ho.xfact,o.xlamo=Ho.xlamo,o.xli=Ho.xli,o.xni=Ho.xni}1!==o.isimp&&(c=o.cc1*o.cc1,o.d2=4*To*_*c,W=o.d2*_*o.cc1/3,o.d3=(17*To+j)*W,o.d4=.5*W*To*_*(221*To+31*j)*o.cc1,o.t3cof=o.d2+2*c,o.t4cof=.25*(3*o.d3+o.cc1*(12*o.d2+10*c)),o.t5cof=.2*(3*o.d4+12*o.cc1*o.d3+6*o.d2*o.d2+15*c*(2*o.d2+c)))}z(o,0),o.init="n"}(p,{opsmode:"i",satn:p.satnum,epoch:p.jdsatepoch-2433281.5,xbstar:p.bstar,xecco:p.ecco,xargpo:p.argpo,xinclo:p.inclo,xmo:p.mo,xno:p.no,xnodeo:p.nodeo}),p}var v,b=2*Math.PI/360,T=6371,y=[],q=1;onmessage=function(a){if(a.data.isUpdate&&(1!=a.data.missile&&a.data.satId<99999&&(y[a.data.satId]=u(a.data.TLE1,a.data.TLE2)),a.data.missile&&(y[a.data.satId]=a.data)),a.data.isInit){var e=JSON.parse(a.data.satData);q=JSON.parse(a.data.orbitFadeFactor);for(var d=e.length-1,n=-1;n<d;)delete e[++n].id,e[n].static||e[n].missile?y[n]=e[n]:y[n]=u(e[n].TLE1,e[n].TLE2);v=a.data.numSegs}else{var i=a.data.satId;o=a.data.realTime,t=a.data.offset,s=a.data.rate;var c=new Float32Array(4*(v+1)),r=C(),h=U(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds()),m=1440*((h+=1.15741e-8*r.getUTCMilliseconds())-y[i].jdsatepoch),l=v+1,p=0;if(y[i].missile)for(;p<l;){var x=parseInt(y[i].altList.length*(p/v)),g=C(),M=U(g.getUTCFullYear(),g.getUTCMonth()+1,g.getUTCDate(),g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds()),F=f(M+=1.15741e-8*g.getUTCMilliseconds()),I=Math.cos(y[i].latList[x]*b),L=Math.sin(y[i].latList[x]*b),w=Math.cos(y[i].lonList[x]*b+F),D=Math.sin(y[i].lonList[x]*b+F);c[4*p]=(T+y[i].altList[x])*I*w,c[4*p+1]=(T+y[i].altList[x])*I*D,c[4*p+2]=(T+y[i].altList[x])*L,c[4*p+3]=Math.min(q*(l/(p+1)),1),p++}else for(var E=2*Math.PI/y[i].no/v;p<l;){var S=m+p*E,N=z(y[i],S).position;try{c[4*p]=N.x,c[4*p+1]=N.y,c[4*p+2]=N.z,c[4*p+3]=Math.min(q*(l/(p+1)),1)}catch(o){c[4*p]=0,c[4*p+1]=0,c[4*p+2]=0,c[4*p+3]=0}p++}postMessage({pointsOut:c.buffer,satId:i},[c.buffer])}};var U=(o,t,s,a,e,d)=>367*o-Math.floor(7*(o+Math.floor((t+9)/12))*.25)+Math.floor(275*t/9)+s+1721013.5+((d/60+e)/60+a)/24,C=()=>{var a=new Date,e=(Number(a)-Number(o))*s;return a.setTime(Number(o)+t+e),a}})();