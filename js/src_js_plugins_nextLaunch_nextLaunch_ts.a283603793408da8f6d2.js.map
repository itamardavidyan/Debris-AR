{"version":3,"file":"src_js_plugins_nextLaunch_nextLaunch_ts.a283603793408da8f6d2.js","mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA,4BAA4B,SAAI,IAAI,SAAI;AACxC,iCAAiC,uCAAuC,YAAY,KAAK,OAAO;AAChG;AACA;AAC8D;AACvC;AACyC;AACT;AACmB;AAC1E;AACA,aAAa,4BAA4B;AACzC;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,aAAa;AACxE;AACA;AACA,2DAA2D,aAAa;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,8EAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mEAAc;AAC1C;AACA;AACA,wFAAwF,mEAAc;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mEAAc;AAC9C;AACA;AACA;AACA,iGAAiG,mEAAc;AAC/G;AACA;AACA,iGAAiG,mEAAc;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,mEAAc;AAC5C;AACA;AACA;AACA,6FAA6F,mEAAc;AAC3G;AACA;AACA,6FAA6F,mEAAc;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA,YAAY,4FAAuB;AACnC,YAAY,6CAAC;AACb;AACA;AACA;AACA;AACA;AACA,QAAQ,iDAAK;AACb,oCAAoC,6CAA6C;AACjF,gCAAgC,4EAA4E;AAC5G,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6CAAC;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,wBAAwB,yBAAyB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACO;AACP;AACA,IAAI,oOAAmD,wBAAwB,cAAc;AAC7F;AACA;AACA,IAAI,0EAAqB;AACzB;AACA;AACA;AACA;AACA,YAAY,6CAAC,uBAAuB,sEAAiB,mlBAAmlB,+mBAA+mB;AACvvC;AACA,YAAY,6CAAC,yBAAyB,sEAAiB,kMAAkM,mxBAAmxB;AAC5gC,YAAY,6CAAC;AACb;AACA;AACA,oBAAoB,6CAAC;AACrB,iBAAiB;AACjB;AACA;AACA,aAAa;AACb,YAAY,6CAAC;AACb,gBAAgB,4DAAO;AACvB,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA,IAAI,0EAAqB;AACzB;AACA;AACA;AACA;AACA;AACA,oBAAoB,kGAA6C;AACjE;AACA;AACA;AACA;AACA,oBAAoB,kGAA6C;AACjE;AACA,oBAAoB,6CAAC,uCAAuC,iCAAiC;AAC7F;AACA,oBAAoB,6CAAC;AACrB;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL,IAAI,0EAAqB;AACzB;AACA;AACA;AACA,YAAY,6CAAC,uCAAuC,iCAAiC;AACrF,YAAY,6CAAC;AACb;AACA,SAAS;AACT,KAAK;AACL,IAAI,0EAAqB;AACzB;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA","sources":["webpack://keeptrack.space/./src/js/plugins/nextLaunch/nextLaunch.ts"],"sourcesContent":["/* */\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport { saveCsv, truncateString } from '@app/js/lib/helpers';\nimport $ from 'jquery';\nimport { dateFormat } from '@app/js/lib/external/dateFormat.js';\nimport { keepTrackApi } from '@app/js/api/externalApi';\nimport { settingsManager } from '@app/js/settingsManager/settingsManager';\n/**\n * @returns {HTMLTableElement | boolean} The Table Element to be modified in the UI or a false boolean to kill the parent method\n */\nvar _getTableElement = function () {\n    var tbl = document.getElementById('nextLaunch-table'); // Identify the table to update\n    if (tbl == null) {\n        console.warn('nextLaunchManager.showTable failed to find nextLaunch-table element!');\n        return false;\n    }\n    return tbl;\n};\nvar _makeTableHeaders = function (tbl) {\n    var tr = tbl.insertRow();\n    var tdT = tr.insertCell();\n    tdT.appendChild(document.createTextNode('Launch Window'));\n    tdT.setAttribute('style', 'text-decoration: underline; width: 120px;');\n    var tdN = tr.insertCell();\n    tdN.appendChild(document.createTextNode('Mission'));\n    tdN.setAttribute('style', 'text-decoration: underline; width: 140px;');\n    var tdL = tr.insertCell();\n    tdL.appendChild(document.createTextNode('Location'));\n    tdL.setAttribute('style', 'text-decoration: underline');\n    var tdA = tr.insertCell();\n    tdA.appendChild(document.createTextNode('Agency'));\n    tdA.setAttribute('style', 'text-decoration: underline');\n    var tdC = tr.insertCell();\n    tdC.appendChild(document.createTextNode('Country'));\n    tdC.setAttribute('style', 'text-decoration: underline');\n};\nvar _initTable = function (tbl, launchList) {\n    _makeTableHeaders(tbl);\n    for (var i = 0; i < launchList.length; i++) {\n        var tr = tbl.insertRow();\n        // Time Cells\n        var tdT = tr.insertCell();\n        var timeText = void 0;\n        if (launchList[i].windowStart.valueOf() <= Date.now() - 1000 * 60 * 60 * 24) {\n            timeText = 'TBD';\n        }\n        else {\n            timeText = dateFormat(launchList[i].windowStart, 'isoDateTime', true) + ' UTC';\n        }\n        tdT.appendChild(document.createTextNode(timeText));\n        // Name Cells\n        var tdN = tr.insertCell();\n        // Mission Name Text\n        var nameText = typeof launchList[i].missionName != 'undefined' ? launchList[i].missionName : 'Unknown';\n        // Mission Name HTML Setup\n        var nameHTML = void 0;\n        if (typeof launchList[i].missionURL == 'undefined' || launchList[i].missionURL == '') {\n            nameHTML = \"\" + truncateString(nameText, 15);\n        }\n        else {\n            nameHTML = \"<a class='iframe' href=\\\"\" + launchList[i].missionURL + \"\\\">\" + truncateString(nameText, 15) + \"</a>\";\n        }\n        // Rocket Name HTML Setup\n        var rocketHTML = void 0;\n        if (typeof launchList[i].rocketURL == 'undefined') {\n            rocketHTML = \"\" + launchList[i].rocket;\n        }\n        else {\n            rocketHTML = \"<a class='iframe' href=\\\"\" + launchList[i].rocketURL + \"\\\">\" + launchList[i].rocket + \"</a>\";\n        }\n        // Set Name and Rocket HTML\n        tdN.innerHTML = nameHTML + \"<br />\" + rocketHTML;\n        // Location Name HTML Setup\n        var locationHTML = void 0;\n        if (typeof launchList[i].locationURL == 'undefined' || launchList[i].locationURL == '') {\n            locationHTML = \"\" + truncateString(launchList[i].location, 25);\n        }\n        else {\n            if (window.location.protocol === 'http:') {\n                locationHTML = \"<a class='iframe' href=\\\"\" + launchList[i].locationURL + \"\\\">\" + truncateString(launchList[i].location, 25) + \"</a>\";\n            }\n            else {\n                locationHTML = \"<a class='iframe' href=\\\"\" + launchList[i].locationURL + \"\\\">\" + truncateString(launchList[i].location, 25) + \"</a>\";\n            }\n        }\n        var tdL = tr.insertCell();\n        tdL.innerHTML = locationHTML;\n        // Agency Name HTML Setup\n        var agencyHTML = void 0;\n        if (typeof launchList[i].agencyURL == 'undefined') {\n            agencyHTML = \"\" + truncateString(launchList[i].agency, 30);\n        }\n        else {\n            if (window.location.protocol === 'http:') {\n                agencyHTML = \"<a class='iframe' href=\\\"\" + launchList[i].agencyURL + \"\\\">\" + truncateString(launchList[i].agency, 30) + \"</a>\";\n            }\n            else {\n                agencyHTML = \"<a class='iframe' href=\\\"\" + launchList[i].agencyURL + \"\\\">\" + truncateString(launchList[i].agency, 30) + \"</a>\";\n            }\n        }\n        var tdA = tr.insertCell();\n        tdA.innerHTML = agencyHTML;\n        // Country Cell\n        var tdC = tr.insertCell();\n        tdC.innerHTML = \"<span class=\\\"badge dark-blue-badge\\\" data-badge-caption=\\\"\" + launchList[i].country + \"\\\"></span>\";\n    }\n};\nexport var nextLaunchManager = {\n    launchList: [],\n    init: function () {\n        if (settingsManager.offline) {\n            $('#menu-nextLaunch').hide();\n            return;\n        }\n        // Won't Work Offline\n        if (window.location.hostname === 'localhost')\n            return;\n        $.get('https://ll.thespacedevs.com/2.0.0/launch/upcoming/?format=json&limit=20&mode=detailed')\n            .done(function (resp) { return nextLaunchManager.processData(resp); })\n            .fail(function () { return console.warn(\"https://ll.thespacedevs.com/2.0.0/ is Unavailable!\"); });\n    },\n    showTable: function () {\n        var tbl = _getTableElement();\n        if (typeof tbl == 'boolean')\n            return;\n        // Only needs populated once\n        if (tbl.innerHTML == '') {\n            _initTable(tbl, nextLaunchManager.launchList);\n            try {\n                $('a.iframe').colorbox({\n                    iframe: true,\n                    width: '80%',\n                    height: '80%',\n                    fastIframe: false,\n                    closeButton: false,\n                });\n            }\n            catch (error) {\n                console.warn(error);\n            }\n        }\n    },\n    processData: function (resp) {\n        for (var i = 0; i < resp.results.length; i++) {\n            /**\n             * Info from launchlibrary.net\n             */\n            var launchLibResult = resp.results[i];\n            var launchInfo = {\n                name: '',\n                updated: null,\n                windowStart: new Date(launchLibResult.window_start),\n                windowEnd: new Date(launchLibResult.window_end),\n                location: '',\n                locationURL: '',\n                agency: '',\n                agencyURL: '',\n                country: '',\n                mission: '',\n                missionName: '',\n                missionType: '',\n                missionURL: '',\n                rocket: '',\n                rocketConfig: '',\n                rocketFamily: '',\n                rocketURL: '',\n            };\n            if (typeof launchLibResult.last_updated !== 'undefined')\n                launchInfo.updated = new Date(launchLibResult.last_updated);\n            launchInfo.name = typeof launchLibResult.name != 'undefined' ? launchLibResult.name : 'Unknown';\n            launchInfo.location = launchLibResult.pad.location.name.split(',', 1);\n            launchInfo.location = launchInfo.location[0];\n            launchInfo.locationURL = launchLibResult.pad.wiki_url;\n            if (typeof launchLibResult.launch_service_provider != 'undefined') {\n                launchInfo.agency = typeof launchLibResult.launch_service_provider.name != 'undefined' ? launchLibResult.launch_service_provider.name : 'Unknown';\n                launchInfo.country = typeof launchLibResult.launch_service_provider.country_code != 'undefined' ? launchLibResult.launch_service_provider.country_code : 'Unknown';\n                if (typeof launchLibResult.launch_service_provider.wiki_url != 'undefined') {\n                    launchInfo.agencyURL = launchLibResult.launch_service_provider.wiki_url;\n                }\n            }\n            else {\n                launchInfo.agency = 'Unknown';\n                launchInfo.country = 'UNK';\n                launchInfo.agencyURL = '';\n            }\n            if (launchLibResult.mission != null) {\n                launchInfo.mission = launchLibResult.mission.description;\n                launchInfo.missionName = launchLibResult.mission.name;\n                launchInfo.missionType = launchLibResult.mission.type;\n                if (typeof launchLibResult.mission.wiki_url != 'undefined') {\n                    launchInfo.missionURL = launchLibResult.mission.wiki_url;\n                }\n            }\n            launchInfo.rocket = launchLibResult.rocket.configuration.full_name;\n            launchInfo.rocketConfig = launchLibResult.rocket.configuration.name;\n            launchInfo.rocketFamily = launchLibResult.rocket.configuration.family;\n            if (typeof launchLibResult.rocket.configuration.wiki_url != 'undefined') {\n                launchInfo.rocketURL = launchLibResult.rocket.configuration.wiki_url;\n            }\n            nextLaunchManager.launchList[i] = launchInfo;\n        }\n    },\n};\nexport var init = function () {\n    // Load CSS\n    import('@app/js/plugins/nextLaunch/nextLaunch.css').then(function (resp) { return resp; });\n    var isNextLaunchMenuOpen = false;\n    // Add HTML\n    keepTrackApi.register({\n        method: 'uiManagerInit',\n        cbName: 'nextLaunchManager',\n        cb: function () {\n            // Side Menu\n            $('#left-menus').append(keepTrackApi.html(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n      <div id=\\\"nextLaunch-menu\\\" class=\\\"side-menu-parent start-hidden text-select\\\">\\n        <div id=\\\"nextLaunch-content\\\" class=\\\"side-menu\\\">\\n          <div class=\\\"row\\\">\\n            <h5 class=\\\"center-align\\\">Next Launches</h5>\\n            <table id=\\\"nextLaunch-table\\\" class=\\\"center-align striped-light centered\\\"></table>\\n          </div>\\n          <div class=\\\"row\\\">\\n            <center>\\n              <button id=\\\"export-launch-info\\\" class=\\\"btn btn-ui waves-effect waves-light\\\">Export Launch Info &#9658;</button>\\n            </center>\\n          </div>\\n        </div>\\n      </div>\\n    \"], [\"\\n      <div id=\\\"nextLaunch-menu\\\" class=\\\"side-menu-parent start-hidden text-select\\\">\\n        <div id=\\\"nextLaunch-content\\\" class=\\\"side-menu\\\">\\n          <div class=\\\"row\\\">\\n            <h5 class=\\\"center-align\\\">Next Launches</h5>\\n            <table id=\\\"nextLaunch-table\\\" class=\\\"center-align striped-light centered\\\"></table>\\n          </div>\\n          <div class=\\\"row\\\">\\n            <center>\\n              <button id=\\\"export-launch-info\\\" class=\\\"btn btn-ui waves-effect waves-light\\\">Export Launch Info &#9658;</button>\\n            </center>\\n          </div>\\n        </div>\\n      </div>\\n    \"]))));\n            // Bottom Icon\n            $('#bottom-icons').append(keepTrackApi.html(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n        <div id=\\\"menu-nextLaunch\\\" class=\\\"bmenu-item\\\">\\n          <img alt=\\\"calendar\\\" src=\\\"\\\" delayedsrc=\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAABNUlEQVR4nO3cQWrCQBiAUS29Tne9/wm680C6Erow0GBnvtG8txQxkY8/jBP1dAIAAADgKM4zD/b1c70+evzyfZ56HncrnM/HrAPxmACxp0Zta4SP5plLlgmICRATICZATIDY54gX3VoVrPDB57e95zNi1WcCYgLEhlyCtlSXmi0rnI8JiAkQG3IJskf0dyYgJkBMgJgAMQFiU/eCXp29oDckQEyAmAAxAWJTt6P3+q87VivfoTMBMQFiAsQEiAkQW3oVtHc1Mvr5I5iAmAAxAWICxASITV0Frba3Yy8IAWoCxASICRAb8kv5FfZYRhjxfk1ATICYADEBYgLEDr0XtAITEBMgJkBMgJgAsaX/rOMVv+ezlwmICRATICZATICY/wuKmYCYADEBYgLEBAAAAAAAgPd3AzYrWtKgtEhrAAAAAElFTkSuQmCC\\\">\\n          <span class=\\\"bmenu-title\\\">Next Launches</span>\\n          <div class=\\\"status-icon\\\"></div>\\n        </div>\\n      \"], [\"\\n        <div id=\\\"menu-nextLaunch\\\" class=\\\"bmenu-item\\\">\\n          <img alt=\\\"calendar\\\" src=\\\"\\\" delayedsrc=\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAABNUlEQVR4nO3cQWrCQBiAUS29Tne9/wm680C6Erow0GBnvtG8txQxkY8/jBP1dAIAAADgKM4zD/b1c70+evzyfZ56HncrnM/HrAPxmACxp0Zta4SP5plLlgmICRATICZATIDY54gX3VoVrPDB57e95zNi1WcCYgLEhlyCtlSXmi0rnI8JiAkQG3IJskf0dyYgJkBMgJgAMQFiU/eCXp29oDckQEyAmAAxAWJTt6P3+q87VivfoTMBMQFiAsQEiAkQW3oVtHc1Mvr5I5iAmAAxAWICxASITV0Frba3Yy8IAWoCxASICRAb8kv5FfZYRhjxfk1ATICYADEBYgLEDr0XtAITEBMgJkBMgJgAsaX/rOMVv+ezlwmICRATICZATICY/wuKmYCYADEBYgLEBAAAAAAAgPd3AzYrWtKgtEhrAAAAAElFTkSuQmCC\\\">\\n          <span class=\\\"bmenu-title\\\">Next Launches</span>\\n          <div class=\\\"status-icon\\\"></div>\\n        </div>\\n      \"]))));\n            $('#nextLaunch-menu').resizable({\n                handles: 'e',\n                stop: function () {\n                    $(this).css('height', '');\n                },\n                maxWidth: 650,\n                minWidth: 450,\n            });\n            $('#export-launch-info').on('click', function () {\n                saveCsv(nextLaunchManager.launchList, 'launchList');\n            });\n        },\n    });\n    // Add JavaScript\n    keepTrackApi.register({\n        method: 'bottomMenuClick',\n        cbName: 'nextLaunch',\n        cb: function (iconName) {\n            if (iconName === 'menu-nextLaunch') {\n                if (isNextLaunchMenuOpen) {\n                    keepTrackApi.programs.uiManager.hideSideMenus();\n                    isNextLaunchMenuOpen = false;\n                    return;\n                }\n                else {\n                    keepTrackApi.programs.uiManager.hideSideMenus();\n                    nextLaunchManager.showTable();\n                    $('#nextLaunch-menu').effect('slide', { direction: 'left', mode: 'show' }, 1000);\n                    isNextLaunchMenuOpen = true;\n                    $('#menu-nextLaunch').addClass('bmenu-item-selected');\n                    return;\n                }\n            }\n        },\n    });\n    keepTrackApi.register({\n        method: 'hideSideMenus',\n        cbName: 'nextLaunch',\n        cb: function () {\n            $('#nextLaunch-menu').effect('slide', { direction: 'left', mode: 'hide' }, 1000);\n            $('#menu-nextLaunch').removeClass('bmenu-item-selected');\n            isNextLaunchMenuOpen = false;\n        },\n    });\n    keepTrackApi.register({\n        method: 'onCruncherReady',\n        cbName: 'nextLaunch',\n        cb: function () {\n            nextLaunchManager.init();\n        },\n    });\n};\nvar templateObject_1, templateObject_2;\n"],"names":[],"sourceRoot":""}