/*! For license information please see positionCruncher.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={131:(__unused_webpack_module,exports,__webpack_require__)=>{var numeric=exports;void 0!==__webpack_require__.g&&(__webpack_require__.g.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(r,e){var n,t,i;for(void 0===e&&(e=15),t=.5,n=new Date;;){for(i=t*=2;i>3;i-=4)r(),r(),r(),r();for(;i>0;)r(),i--;if(new Date-n>e)break}for(i=t;i>3;i-=4)r(),r(),r(),r();for(;i>0;)r(),i--;return 1e3*(3*t-1)/(new Date-n)},numeric._myIndexOf=function(r){var e,n=this.length;for(e=0;e<n;++e)if(this[e]===r)return e;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(r){function e(r){if(0===r)return"0";if(isNaN(r))return"NaN";if(r<0)return"-"+e(-r);if(isFinite(r)){var n=Math.floor(Math.log(r)/Math.log(10)),t=r/Math.pow(10,n),i=t.toPrecision(numeric.precision);return 10===parseFloat(i)&&(n++,i=(t=1).toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+n.toString()}return"Infinity"}var n=[];return function r(t){var i;if(void 0===t)return n.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof t)return n.push('"'+t+'"'),!1;if("boolean"==typeof t)return n.push(t.toString()),!1;if("number"==typeof t){var a=e(t),o=t.toPrecision(numeric.precision),s=parseFloat(t.toString()).toString(),c=[a,o,s,parseFloat(o).toString(),parseFloat(s).toString()];for(i=1;i<c.length;i++)c[i].length<a.length&&(a=c[i]);return n.push(Array(numeric.precision+8-a.length).join(" ")+a),!1}if(null===t)return n.push("null"),!1;if("function"==typeof t){n.push(t.toString());var u=!1;for(i in t)t.hasOwnProperty(i)&&(u?n.push(",\n"):n.push("\n{"),u=!0,n.push(i),n.push(": \n"),r(t[i]));return u&&n.push("}\n"),!0}if(t instanceof Array){if(t.length>numeric.largeArray)return n.push("...Large Array..."),!0;for(u=!1,n.push("["),i=0;i<t.length;i++)i>0&&(n.push(","),u&&n.push("\n ")),u=r(t[i]);return n.push("]"),!0}for(i in n.push("{"),u=!1,t)t.hasOwnProperty(i)&&(u&&n.push(",\n"),u=!0,n.push(i),n.push(": \n"),r(t[i]));return n.push("}"),!0}(r),n.join("")},numeric.parseDate=function(r){return function r(e){if("string"==typeof e)return Date.parse(e.replace(/-/g,"/"));if(!(e instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,t=[];for(n=0;n<e.length;n++)t[n]=r(e[n]);return t}(r)},numeric.parseFloat=function(r){return function r(e){if("string"==typeof e)return parseFloat(e);if(!(e instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,t=[];for(n=0;n<e.length;n++)t[n]=r(e[n]);return t}(r)},numeric.parseCSV=function(r){var e,n,t,i=r.split("\n"),a=[],o=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,c=0;for(n=0;n<i.length;n++){var u,h=(i[n]+",").match(o);if(h.length>0){for(a[c]=[],e=0;e<h.length;e++)u=(t=h[e]).substr(0,t.length-1),s.test(u)?a[c][e]=parseFloat(u):a[c][e]=u;c++}}return a},numeric.toCSV=function(r){var e,n,t,i,a,o=numeric.dim(r);for(t=o[0],o[1],a=[],e=0;e<t;e++){for(i=[],n=0;n<t;n++)i[n]=r[e][n].toString();a[e]=i.join(", ")}return a.join("\n")+"\n"},numeric.getURL=function(r){var e=new XMLHttpRequest;return e.overrideMimeType("text/html"),e.open("GET",r,!1),e.send(),e},numeric.imageURL=function(r){function e(r,e,n){void 0===e&&(e=0),void 0===n&&(n=r.length);var t,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],a=-1;for(r.length,t=e;t<n;t++)a=a>>>8^i[255&(a^r[t])];return-1^a}var n,t,i,a,o,s,c,u,h,m,f=r[0].length,l=r[0][0].length,d=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,l>>24&255,l>>16&255,l>>8&255,255&l,f>>24&255,f>>16&255,f>>8&255,255&f,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(m=e(d,12,29),d[29]=m>>24&255,d[30]=m>>16&255,d[31]=m>>8&255,d[32]=255&m,n=1,t=0,c=0;c<f;c++){for(c<f-1?d.push(0):d.push(1),o=3*l+1+(0===c)&255,s=3*l+1+(0===c)>>8&255,d.push(o),d.push(s),d.push(255&~o),d.push(255&~s),0===c&&d.push(0),u=0;u<l;u++)for(i=0;i<3;i++)t=(t+(n=(n+(o=(o=r[i][c][u])>255?255:o<0?0:Math.round(o)))%65521))%65521,d.push(o);d.push(0)}return h=(t<<16)+n,d.push(h>>24&255),d.push(h>>16&255),d.push(h>>8&255),d.push(255&h),a=d.length-41,d[33]=a>>24&255,d[34]=a>>16&255,d[35]=a>>8&255,d[36]=255&a,m=e(d,37),d.push(m>>24&255),d.push(m>>16&255),d.push(m>>8&255),d.push(255&m),d.push(0),d.push(0),d.push(0),d.push(0),d.push(73),d.push(69),d.push(78),d.push(68),d.push(174),d.push(66),d.push(96),d.push(130),"data:image/png;base64,"+function(r){var e,n,t,i,a,o,s,c=r.length,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="";for(e=0;e<c;e+=3)a=((3&(n=r[e]))<<4)+((t=r[e+1])>>4),o=((15&t)<<2)+((i=r[e+2])>>6),s=63&i,e+1>=c?o=s=64:e+2>=c&&(s=64),h+=u.charAt(n>>2)+u.charAt(a)+u.charAt(o)+u.charAt(s);return h}(d)},numeric._dim=function(r){for(var e=[];"object"==typeof r;)e.push(r.length),r=r[0];return e},numeric.dim=function(r){var e;return"object"==typeof r?"object"==typeof(e=r[0])?"object"==typeof e[0]?numeric._dim(r):[r.length,e.length]:[r.length]:[]},numeric.mapreduce=function(r,e){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+e+';\nif(typeof x === "number") { var xi = x; '+r+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+r+";\n    xi = x[i-1];\n    "+r+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+r+"\n}\nreturn accum;")},numeric.mapreduce2=function(r,e){return Function("x","var n = x.length;\nvar i,xi;\n"+e+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+r+";\n}\nreturn accum;")},numeric.same=function r(e,n){var t,i;if(!(e instanceof Array&&n instanceof Array))return!1;if((i=e.length)!==n.length)return!1;for(t=0;t<i;t++)if(e[t]!==n[t]){if("object"!=typeof e[t])return!1;if(!r(e[t],n[t]))return!1}return!0},numeric.rep=function(r,e,n){void 0===n&&(n=0);var t,i=r[n],a=Array(i);if(n===r.length-1){for(t=i-2;t>=0;t-=2)a[t+1]=e,a[t]=e;return-1===t&&(a[0]=e),a}for(t=i-1;t>=0;t--)a[t]=numeric.rep(r,e,n+1);return a},numeric.dotMMsmall=function(r,e){var n,t,i,a,o,s,c,u,h,m,f;for(a=r.length,o=e.length,s=e[0].length,c=Array(a),n=a-1;n>=0;n--){for(u=Array(s),h=r[n],i=s-1;i>=0;i--){for(m=h[o-1]*e[o-1][i],t=o-2;t>=1;t-=2)f=t-1,m+=h[t]*e[t][i]+h[f]*e[f][i];0===t&&(m+=h[0]*e[0][i]),u[i]=m}c[n]=u}return c},numeric._getCol=function(r,e,n){var t;for(t=r.length-1;t>0;--t)n[t]=r[t][e],n[--t]=r[t][e];0===t&&(n[0]=r[0][e])},numeric.dotMMbig=function(r,e){var n,t,i,a=numeric._getCol,o=e.length,s=Array(o),c=r.length,u=e[0].length,h=new Array(c),m=numeric.dotVV;for(--o,t=--c;-1!==t;--t)h[t]=Array(u);for(t=--u;-1!==t;--t)for(a(e,t,s),i=c;-1!==i;--i)n=r[i],h[i][t]=m(n,s);return h},numeric.dotMV=function(r,e){var n,t=r.length,i=(e.length,Array(t)),a=numeric.dotVV;for(n=t-1;n>=0;n--)i[n]=a(r[n],e);return i},numeric.dotVM=function(r,e){var n,t,i,a,o,s,c;for(i=r.length,a=e[0].length,o=Array(a),t=a-1;t>=0;t--){for(s=r[i-1]*e[i-1][t],n=i-2;n>=1;n-=2)c=n-1,s+=r[n]*e[n][t]+r[c]*e[c][t];0===n&&(s+=r[0]*e[0][t]),o[t]=s}return o},numeric.dotVV=function(r,e){var n,t,i=r.length,a=r[i-1]*e[i-1];for(n=i-2;n>=1;n-=2)t=n-1,a+=r[n]*e[n]+r[t]*e[t];return 0===n&&(a+=r[0]*e[0]),a},numeric.dot=function(r,e){var n=numeric.dim;switch(1e3*n(r).length+n(e).length){case 2002:return e.length<10?numeric.dotMMsmall(r,e):numeric.dotMMbig(r,e);case 2001:return numeric.dotMV(r,e);case 1002:return numeric.dotVM(r,e);case 1001:return numeric.dotVV(r,e);case 1e3:return numeric.mulVS(r,e);case 1:return numeric.mulSV(r,e);case 0:return r*e;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(r){var e,n,t,i,a=r.length,o=Array(a);for(e=a-1;e>=0;e--){for(i=Array(a),n=e+2,t=a-1;t>=n;t-=2)i[t]=0,i[t-1]=0;for(t>e&&(i[t]=0),i[e]=r[e],t=e-1;t>=1;t-=2)i[t]=0,i[t-1]=0;0===t&&(i[0]=0),o[e]=i}return o},numeric.getDiag=function(r){var e,n=Math.min(r.length,r[0].length),t=Array(n);for(e=n-1;e>=1;--e)t[e]=r[e][e],t[--e]=r[e][e];return 0===e&&(t[0]=r[0][0]),t},numeric.identity=function(r){return numeric.diag(numeric.rep([r],1))},numeric.pointwise=function(r,e,n){void 0===n&&(n="");var t,i,a=[],o=/\[i\]$/,s="",c=!1;for(t=0;t<r.length;t++)o.test(r[t])?s=i=r[t].substring(0,r[t].length-3):i=r[t],"ret"===i&&(c=!0),a.push(i);return a[r.length]="_s",a[r.length+1]="_k",a[r.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(c?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+r.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+e+"\n}\nreturn ret;",Function.apply(null,a)},numeric.pointwise2=function(r,e,n){void 0===n&&(n="");var t,i,a=[],o=/\[i\]$/,s="",c=!1;for(t=0;t<r.length;t++)o.test(r[t])?s=i=r[t].substring(0,r[t].length-3):i=r[t],"ret"===i&&(c=!0),a.push(i);return a[r.length]="var _n = "+s+".length;\nvar i"+(c?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+e+"\n}\nreturn ret;",Function.apply(null,a)},numeric._biforeach=function r(e,n,t,i,a){var o;if(i!==t.length-1)for(o=t[i]-1;o>=0;o--)r("object"==typeof e?e[o]:e,"object"==typeof n?n[o]:n,t,i+1,a);else a(e,n)},numeric._biforeach2=function r(e,n,t,i,a){if(i===t.length-1)return a(e,n);var o,s=t[i],c=Array(s);for(o=s-1;o>=0;--o)c[o]=r("object"==typeof e?e[o]:e,"object"==typeof n?n[o]:n,t,i+1,a);return c},numeric._foreach=function r(e,n,t,i){var a;if(t!==n.length-1)for(a=n[t]-1;a>=0;a--)r(e[a],n,t+1,i);else i(e)},numeric._foreach2=function r(e,n,t,i){if(t===n.length-1)return i(e);var a,o=n[t],s=Array(o);for(a=o-1;a>=0;a--)s[a]=r(e[a],n,t+1,i);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var r,e;for(r=0;r<numeric.mathfuns2.length;++r)e=numeric.mathfuns2[r],numeric.ops2[e]=e;for(r in numeric.ops2)if(numeric.ops2.hasOwnProperty(r)){e=numeric.ops2[r];var n,t,i="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,r)?(i="var "+e+" = Math."+e+";\n",n=function(r,n,t){return r+" = "+e+"("+n+","+t+")"},t=function(r,n){return r+" = "+e+"("+r+","+n+")"}):(n=function(r,n,t){return r+" = "+n+" "+e+" "+t},t=numeric.opseq.hasOwnProperty(r+"eq")?function(r,n){return r+" "+e+"= "+n}:function(r,n){return r+" = "+r+" "+e+" "+n}),numeric[r+"VV"]=numeric.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),i),numeric[r+"SV"]=numeric.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),i),numeric[r+"VS"]=numeric.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),i),numeric[r]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+r+"VV, VS = numeric."+r+"VS, SV = numeric."+r+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+t("x","y")+"\n}\nreturn x;\n"),numeric[e]=numeric[r],numeric[r+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],t("ret[i]","x[i]"),i),numeric[r+"eqS"]=numeric.pointwise2(["ret[i]","x"],t("ret[i]","x"),i),numeric[r+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+r+"eqV, S = numeric."+r+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(r=0;r<numeric.mathfuns2.length;++r)e=numeric.mathfuns2[r],delete numeric.ops2[e];for(r=0;r<numeric.mathfuns.length;++r)e=numeric.mathfuns[r],numeric.ops1[e]=e;for(r in numeric.ops1)numeric.ops1.hasOwnProperty(r)&&(i="",e=numeric.ops1[r],-1!==numeric.myIndexOf.call(numeric.mathfuns,r)&&Math.hasOwnProperty(e)&&(i="var "+e+" = Math."+e+";\n"),numeric[r+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+e+"(ret[i]);",i),numeric[r+"eq"]=Function("x",'if(typeof x !== "object") return '+e+"x\nvar i;\nvar V = numeric."+r+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[r+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+e+"(x[i]);",i),numeric[r]=Function("x",'if(typeof x !== "object") return '+e+"(x)\nvar i;\nvar V = numeric."+r+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(r=0;r<numeric.mathfuns.length;++r)e=numeric.mathfuns[r],delete numeric.ops1[e];for(r in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(r)&&(e=numeric.mapreducers[r],numeric[r+"V"]=numeric.mapreduce2(e[0],e[1]),numeric[r]=Function("x","s","k",e[1]+'if(typeof x !== "object") {    xi = x;\n'+e[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+r+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+e[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(r,e){return"object"==typeof r?"object"==typeof e?numeric.truncVV(r,e):numeric.truncVS(r,e):"object"==typeof e?numeric.truncSV(r,e):Math.round(r/e)*e},numeric.inv=function(r){var e,n,t,i,a,o,s,c=numeric.dim(r),u=Math.abs,h=c[0],m=c[1],f=numeric.clone(r),l=numeric.identity(h);for(o=0;o<m;++o){var d=-1,p=-1;for(a=o;a!==h;++a)(s=u(f[a][o]))>p&&(d=a,p=s);for(n=f[d],f[d]=f[o],f[o]=n,i=l[d],l[d]=l[o],l[o]=i,r=n[o],s=o;s!==m;++s)n[s]/=r;for(s=m-1;-1!==s;--s)i[s]/=r;for(a=h-1;-1!==a;--a)if(a!==o){for(e=f[a],t=l[a],r=e[o],s=o+1;s!==m;++s)e[s]-=n[s]*r;for(s=m-1;s>0;--s)t[s]-=i[s]*r,t[--s]-=i[s]*r;0===s&&(t[0]-=i[0]*r)}}return l},numeric.det=function(r){var e=numeric.dim(r);if(2!==e.length||e[0]!==e[1])throw new Error("numeric: det() only works on square matrices");var n,t,i,a,o,s,c,u,h=e[0],m=1,f=numeric.clone(r);for(t=0;t<h-1;t++){for(i=t,n=t+1;n<h;n++)Math.abs(f[n][t])>Math.abs(f[i][t])&&(i=n);for(i!==t&&(c=f[i],f[i]=f[t],f[t]=c,m*=-1),a=f[t],n=t+1;n<h;n++){for(s=(o=f[n])[t]/a[t],i=t+1;i<h-1;i+=2)u=i+1,o[i]-=a[i]*s,o[u]-=a[u]*s;i!==h&&(o[i]-=a[i]*s)}if(0===a[t])return 0;m*=a[t]}return m*f[t][t]},numeric.transpose=function(r){var e,n,t,i,a,o=r.length,s=r[0].length,c=Array(s);for(n=0;n<s;n++)c[n]=Array(o);for(e=o-1;e>=1;e-=2){for(i=r[e],t=r[e-1],n=s-1;n>=1;--n)(a=c[n])[e]=i[n],a[e-1]=t[n],(a=c[--n])[e]=i[n],a[e-1]=t[n];0===n&&((a=c[0])[e]=i[0],a[e-1]=t[0])}if(0===e){for(t=r[0],n=s-1;n>=1;--n)c[n][0]=t[n],c[--n][0]=t[n];0===n&&(c[0][0]=t[0])}return c},numeric.negtranspose=function(r){var e,n,t,i,a,o=r.length,s=r[0].length,c=Array(s);for(n=0;n<s;n++)c[n]=Array(o);for(e=o-1;e>=1;e-=2){for(i=r[e],t=r[e-1],n=s-1;n>=1;--n)(a=c[n])[e]=-i[n],a[e-1]=-t[n],(a=c[--n])[e]=-i[n],a[e-1]=-t[n];0===n&&((a=c[0])[e]=-i[0],a[e-1]=-t[0])}if(0===e){for(t=r[0],n=s-1;n>=1;--n)c[n][0]=-t[n],c[--n][0]=-t[n];0===n&&(c[0][0]=-t[0])}return c},numeric._random=function r(e,n){var t,i,a=e[n],o=Array(a);if(n===e.length-1){for(i=Math.random,t=a-1;t>=1;t-=2)o[t]=i(),o[t-1]=i();return 0===t&&(o[0]=i()),o}for(t=a-1;t>=0;t--)o[t]=r(e,n+1);return o},numeric.random=function(r){return numeric._random(r,0)},numeric.norm2=function(r){return Math.sqrt(numeric.norm2Squared(r))},numeric.linspace=function(r,e,n){if(void 0===n&&(n=Math.max(Math.round(e-r)+1,1)),n<2)return 1===n?[r]:[];var t,i=Array(n);for(t=--n;t>=0;t--)i[t]=(t*e+(n-t)*r)/n;return i},numeric.getBlock=function(r,e,n){var t=numeric.dim(r);return function r(i,a){var o,s=e[a],c=n[a]-s,u=Array(c);if(a===t.length-1){for(o=c;o>=0;o--)u[o]=i[o+s];return u}for(o=c;o>=0;o--)u[o]=r(i[o+s],a+1);return u}(r,0)},numeric.setBlock=function(r,e,n,t){var i=numeric.dim(r);return function r(t,a,o){var s,c=e[o],u=n[o]-c;if(o===i.length-1)for(s=u;s>=0;s--)t[s+c]=a[s];for(s=u;s>=0;s--)r(t[s+c],a[s],o+1)}(r,t,0),r},numeric.getRange=function(r,e,n){var t,i,a,o,s=e.length,c=n.length,u=Array(s);for(t=s-1;-1!==t;--t)for(u[t]=Array(c),a=u[t],o=r[e[t]],i=c-1;-1!==i;--i)a[i]=o[n[i]];return u},numeric.blockMatrix=function(r){var e=numeric.dim(r);if(e.length<4)return numeric.blockMatrix([r]);var n,t,i,a,o,s=e[0],c=e[1];for(n=0,t=0,i=0;i<s;++i)n+=r[i][0].length;for(a=0;a<c;++a)t+=r[0][a][0].length;var u=Array(n);for(i=0;i<n;++i)u[i]=Array(t);var h,m,f,l,d,p=0;for(i=0;i<s;++i){for(h=t,a=c-1;-1!==a;--a)for(h-=(o=r[i][a])[0].length,f=o.length-1;-1!==f;--f)for(d=o[f],m=u[p+f],l=d.length-1;-1!==l;--l)m[h+l]=d[l];p+=r[i][0].length}return u},numeric.tensor=function(r,e){if("number"==typeof r||"number"==typeof e)return numeric.mul(r,e);var n=numeric.dim(r),t=numeric.dim(e);if(1!==n.length||1!==t.length)throw new Error("numeric: tensor product is only defined for vectors");var i,a,o,s,c=n[0],u=t[0],h=Array(c);for(a=c-1;a>=0;a--){for(i=Array(u),s=r[a],o=u-1;o>=3;--o)i[o]=s*e[o],i[--o]=s*e[o],i[--o]=s*e[o],i[--o]=s*e[o];for(;o>=0;)i[o]=s*e[o],--o;h[a]=i}return h},numeric.T=function(r,e){this.x=r,this.y=e},numeric.t=function(r,e){return new numeric.T(r,e)},numeric.Tbinop=function(r,e,n,t,i){var a;if(numeric.indexOf,"string"!=typeof i)for(a in i="",numeric)numeric.hasOwnProperty(a)&&(r.indexOf(a)>=0||e.indexOf(a)>=0||n.indexOf(a)>=0||t.indexOf(a)>=0)&&a.length>1&&(i+="var "+a+" = numeric."+a+";\n");return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+i+"\nif(x.y) {  if(y.y) {    return new numeric.T("+t+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+e+");\n}\nreturn new numeric.T("+r+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var r=numeric.mul,e=numeric.div;if(this.y){var n=numeric.add(r(this.x,this.x),r(this.y,this.y));return new numeric.T(e(this.x,n),e(numeric.neg(this.y),n))}return new T(e(1,this.x))},numeric.T.prototype.div=function(r){if(r instanceof numeric.T||(r=new numeric.T(r)),r.y)return this.mul(r.reciprocal());var e=numeric.div;return this.y?new numeric.T(e(this.x,r.x),e(this.y,r.x)):new numeric.T(e(this.x,r.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var r=numeric.transpose,e=this.x,n=this.y;return n?new numeric.T(r(e),r(n)):new numeric.T(r(e))},numeric.T.prototype.transjugate=function(){var r=numeric.transpose,e=this.x,n=this.y;return n?new numeric.T(r(e),numeric.negtranspose(n)):new numeric.T(r(e))},numeric.Tunop=function(r,e,n){return"string"!=typeof n&&(n=""),Function("var x = this;\n"+n+"\nif(x.y) {  "+e+";\n}\n"+r+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var r=this;if(void 0===r.y)return new numeric.T(numeric.inv(r.x));var e,n,t,i,a,o,s,c,u,h,m,f,l,d,p,M,g,x,y=r.x.length,v=numeric.identity(y),b=numeric.rep([y,y],0),w=numeric.clone(r.x),T=numeric.clone(r.y);for(u=0;u<y;u++){for(f=(d=w[u][u])*d+(p=T[u][u])*p,m=u,h=u+1;h<y;h++)(l=(d=w[h][u])*d+(p=T[h][u])*p)>f&&(m=h,f=l);for(m!==u&&(x=w[u],w[u]=w[m],w[m]=x,x=T[u],T[u]=T[m],T[m]=x,x=v[u],v[u]=v[m],v[m]=x,x=b[u],b[u]=b[m],b[m]=x),e=w[u],n=T[u],a=v[u],o=b[u],d=e[u],p=n[u],h=u+1;h<y;h++)M=e[h],g=n[h],e[h]=(M*d+g*p)/f,n[h]=(g*d-M*p)/f;for(h=0;h<y;h++)M=a[h],g=o[h],a[h]=(M*d+g*p)/f,o[h]=(g*d-M*p)/f;for(h=u+1;h<y;h++){for(t=w[h],i=T[h],s=v[h],c=b[h],d=t[u],p=i[u],m=u+1;m<y;m++)M=e[m],g=n[m],t[m]-=M*d-g*p,i[m]-=g*d+M*p;for(m=0;m<y;m++)M=a[m],g=o[m],s[m]-=M*d-g*p,c[m]-=g*d+M*p}}for(u=y-1;u>0;u--)for(a=v[u],o=b[u],h=u-1;h>=0;h--)for(s=v[h],c=b[h],d=w[h][u],p=T[h][u],m=y-1;m>=0;m--)M=a[m],g=o[m],s[m]-=d*M-p*g,c[m]-=d*g+p*M;return new numeric.T(v,b)},numeric.T.prototype.get=function(r){var e,n=this.x,t=this.y,i=0,a=r.length;if(t){for(;i<a;)n=n[e=r[i]],t=t[e],i++;return new numeric.T(n,t)}for(;i<a;)n=n[e=r[i]],i++;return new numeric.T(n)},numeric.T.prototype.set=function(r,e){var n,t=this.x,i=this.y,a=0,o=r.length,s=e.x,c=e.y;if(0===o)return c?this.y=c:i&&(this.y=void 0),this.x=t,this;if(c){for(i||(i=numeric.rep(numeric.dim(t),0),this.y=i);a<o-1;)t=t[n=r[a]],i=i[n],a++;return t[n=r[a]]=s,i[n]=c,this}if(i){for(;a<o-1;)t=t[n=r[a]],i=i[n],a++;return t[n=r[a]]=s,i[n]=s instanceof Array?numeric.rep(numeric.dim(s),0):0,this}for(;a<o-1;)t=t[n=r[a]],a++;return t[n=r[a]]=s,this},numeric.T.prototype.getRows=function(r,e){var n,t,i=e-r+1,a=Array(i),o=this.x,s=this.y;for(n=r;n<=e;n++)a[n-r]=o[n];if(s){for(t=Array(i),n=r;n<=e;n++)t[n-r]=s[n];return new numeric.T(a,t)}return new numeric.T(a)},numeric.T.prototype.setRows=function(r,e,n){var t,i=this.x,a=this.y,o=n.x,s=n.y;for(t=r;t<=e;t++)i[t]=o[t-r];if(s)for(a||(a=numeric.rep(numeric.dim(i),0),this.y=a),t=r;t<=e;t++)a[t]=s[t-r];else if(a)for(t=r;t<=e;t++)a[t]=numeric.rep([o[t-r].length],0);return this},numeric.T.prototype.getRow=function(r){var e=this.x,n=this.y;return n?new numeric.T(e[r],n[r]):new numeric.T(e[r])},numeric.T.prototype.setRow=function(r,e){var n=this.x,t=this.y,i=e.x,a=e.y;return n[r]=i,a?(t||(t=numeric.rep(numeric.dim(n),0),this.y=t),t[r]=a):t&&(t=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(r,e){var n=this.x,t=this.y,i=numeric.getBlock;return t?new numeric.T(i(n,r,e),i(t,r,e)):new numeric.T(i(n,r,e))},numeric.T.prototype.setBlock=function(r,e,n){n instanceof numeric.T||(n=new numeric.T(n));var t=this.x,i=this.y,a=numeric.setBlock,o=n.x,s=n.y;if(s)return i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),a(t,r,e,o),a(i,r,e,s),this;a(t,r,e,o),i&&a(i,r,e,numeric.rep(numeric.dim(o),0))},numeric.T.rep=function(r,e){var n=numeric.T;e instanceof n||(e=new n(e));var t=e.x,i=e.y,a=numeric.rep;return i?new n(a(r,t),a(r,i)):new n(a(r,t))},numeric.T.diag=function(r){r instanceof numeric.T||(r=new numeric.T(r));var e=r.x,n=r.y,t=numeric.diag;return n?new numeric.T(t(e),t(n)):new numeric.T(t(e))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(r){return new numeric.T(numeric.identity(r))},numeric.T.prototype.getDiag=function(){var r=numeric,e=this.x,n=this.y;return n?new r.T(r.getDiag(e),r.getDiag(n)):new r.T(r.getDiag(e))},numeric.house=function(r){var e=numeric.clone(r),n=(r[0]>=0?1:-1)*numeric.norm2(r);e[0]+=n;var t=numeric.norm2(e);if(0===t)throw new Error("eig: internal error");return numeric.div(e,t)},numeric.toUpperHessenberg=function(r){var e=numeric.dim(r);if(2!==e.length||e[0]!==e[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,t,i,a,o,s,c,u,h,m,f=e[0],l=numeric.clone(r),d=numeric.identity(f);for(t=0;t<f-2;t++){for(a=Array(f-t-1),n=t+1;n<f;n++)a[n-t-1]=l[n][t];if(numeric.norm2(a)>0){for(o=numeric.house(a),s=numeric.getBlock(l,[t+1,t],[f-1,f-1]),c=numeric.tensor(o,numeric.dot(o,s)),n=t+1;n<f;n++)for(u=l[n],h=c[n-t-1],i=t;i<f;i++)u[i]-=2*h[i-t];for(s=numeric.getBlock(l,[0,t+1],[f-1,f-1]),c=numeric.tensor(numeric.dot(s,o),o),n=0;n<f;n++)for(u=l[n],h=c[n],i=t+1;i<f;i++)u[i]-=2*h[i-t-1];for(s=Array(f-t-1),n=t+1;n<f;n++)s[n-t-1]=d[n];for(c=numeric.tensor(o,numeric.dot(o,s)),n=t+1;n<f;n++)for(m=d[n],h=c[n-t-1],i=0;i<f;i++)m[i]-=2*h[i]}}return{H:l,Q:d}},numeric.epsilon=2220446049250313e-31,numeric.QRFrancis=function(r,e){void 0===e&&(e=1e4),r=numeric.clone(r),numeric.clone(r);var n,t,i,a,o,s,c,u,h,m,f,l,d,p,M,g,x,y,v=numeric.dim(r)[0],b=numeric.identity(v);if(v<3)return{Q:b,B:[[0,v-1]]};var w=numeric.epsilon;for(y=0;y<e;y++){for(g=0;g<v-1;g++)if(Math.abs(r[g+1][g])<w*(Math.abs(r[g][g])+Math.abs(r[g+1][g+1]))){var T=numeric.QRFrancis(numeric.getBlock(r,[0,0],[g,g]),e),z=numeric.QRFrancis(numeric.getBlock(r,[g+1,g+1],[v-1,v-1]),e);for(l=Array(g+1),M=0;M<=g;M++)l[M]=b[M];for(d=numeric.dot(T.Q,l),M=0;M<=g;M++)b[M]=d[M];for(l=Array(v-g-1),M=g+1;M<v;M++)l[M-g-1]=b[M];for(d=numeric.dot(z.Q,l),M=g+1;M<v;M++)b[M]=d[M-g-1];return{Q:b,B:T.B.concat(numeric.add(z.B,g+1))}}var S,A,k;for(i=r[v-2][v-2],a=r[v-2][v-1],o=r[v-1][v-2],u=i+(s=r[v-1][v-1]),c=i*s-a*o,h=numeric.getBlock(r,[0,0],[2,2]),u*u>=4*c?(S=.5*(u+Math.sqrt(u*u-4*c)),A=.5*(u-Math.sqrt(u*u-4*c)),h=numeric.add(numeric.sub(numeric.dot(h,h),numeric.mul(h,S+A)),numeric.diag(numeric.rep([3],S*A)))):h=numeric.add(numeric.sub(numeric.dot(h,h),numeric.mul(h,u)),numeric.diag(numeric.rep([3],c))),n=[h[0][0],h[1][0],h[2][0]],t=numeric.house(n),l=[r[0],r[1],r[2]],d=numeric.tensor(t,numeric.dot(t,l)),M=0;M<3;M++)for(f=r[M],p=d[M],x=0;x<v;x++)f[x]-=2*p[x];for(l=numeric.getBlock(r,[0,0],[v-1,2]),d=numeric.tensor(numeric.dot(l,t),t),M=0;M<v;M++)for(f=r[M],p=d[M],x=0;x<3;x++)f[x]-=2*p[x];for(l=[b[0],b[1],b[2]],d=numeric.tensor(t,numeric.dot(t,l)),M=0;M<3;M++)for(m=b[M],p=d[M],x=0;x<v;x++)m[x]-=2*p[x];for(g=0;g<v-2;g++){for(x=g;x<=g+1;x++)if(Math.abs(r[x+1][x])<w*(Math.abs(r[x][x])+Math.abs(r[x+1][x+1]))){for(T=numeric.QRFrancis(numeric.getBlock(r,[0,0],[x,x]),e),z=numeric.QRFrancis(numeric.getBlock(r,[x+1,x+1],[v-1,v-1]),e),l=Array(x+1),M=0;M<=x;M++)l[M]=b[M];for(d=numeric.dot(T.Q,l),M=0;M<=x;M++)b[M]=d[M];for(l=Array(v-x-1),M=x+1;M<v;M++)l[M-x-1]=b[M];for(d=numeric.dot(z.Q,l),M=x+1;M<v;M++)b[M]=d[M-x-1];return{Q:b,B:T.B.concat(numeric.add(z.B,x+1))}}for(k=Math.min(v-1,g+3),n=Array(k-g),M=g+1;M<=k;M++)n[M-g-1]=r[M][g];for(t=numeric.house(n),l=numeric.getBlock(r,[g+1,g],[k,v-1]),d=numeric.tensor(t,numeric.dot(t,l)),M=g+1;M<=k;M++)for(f=r[M],p=d[M-g-1],x=g;x<v;x++)f[x]-=2*p[x-g];for(l=numeric.getBlock(r,[0,g+1],[v-1,k]),d=numeric.tensor(numeric.dot(l,t),t),M=0;M<v;M++)for(f=r[M],p=d[M],x=g+1;x<=k;x++)f[x]-=2*p[x-g-1];for(l=Array(k-g),M=g+1;M<=k;M++)l[M-g-1]=b[M];for(d=numeric.tensor(t,numeric.dot(t,l)),M=g+1;M<=k;M++)for(m=b[M],p=d[M-g-1],x=0;x<v;x++)m[x]-=2*p[x]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(r,e){var n,t,i,a,o,s,c,u,h,m,f,l,d,p,M,g,x=numeric.toUpperHessenberg(r),y=numeric.QRFrancis(x.H,e),v=numeric.T,b=r.length,w=y.B,T=numeric.dot(y.Q,numeric.dot(x.H,numeric.transpose(y.Q))),z=new v(numeric.dot(y.Q,x.Q)),S=w.length,A=Math.sqrt;for(t=0;t<S;t++)if((n=w[t][0])===w[t][1]);else{if(a=n+1,o=T[n][n],s=T[n][a],c=T[a][n],u=T[a][a],0===s&&0===c)continue;(m=(h=-o-u)*h-4*(o*u-s*c))>=0?((M=(o-(f=h<0?-.5*(h-A(m)):-.5*(h+A(m))))*(o-f)+s*s)>(g=c*c+(u-f)*(u-f))?(d=(o-f)/(M=A(M)),p=s/M):(d=c/(g=A(g)),p=(u-f)/g),i=new v([[p,-d],[d,p]]),z.setRows(n,a,i.dot(z.getRows(n,a)))):(f=-.5*h,l=.5*A(-m),(M=(o-f)*(o-f)+s*s)>(g=c*c+(u-f)*(u-f))?(d=(o-f)/(M=A(M+l*l)),p=s/M,f=0,l/=M):(d=c/(g=A(g+l*l)),p=(u-f)/g,f=l/g,l=0),i=new v([[p,-d],[d,p]],[[f,l],[l,-f]]),z.setRows(n,a,i.dot(z.getRows(n,a))))}var k=z.dot(r).dot(z.transjugate()),_=(b=r.length,numeric.T.identity(b));for(a=0;a<b;a++)if(a>0)for(t=a-1;t>=0;t--){var j=k.get([t,t]),P=k.get([a,a]);numeric.neq(j.x,P.x)||numeric.neq(j.y,P.y)?(f=k.getRow(t).getBlock([t],[a-1]),l=_.getRow(a).getBlock([t],[a-1]),_.set([a,t],k.get([t,a]).neg().sub(f.dot(l)).div(j.sub(P)))):_.setRow(a,_.getRow(t))}for(a=0;a<b;a++)f=_.getRow(a),_.setRow(a,f.div(f.norm2()));return _=_.transpose(),_=z.transjugate().dot(_),{lambda:k.getDiag(),E:_}},numeric.ccsSparse=function(r){var e,n,t,i=r.length,a=[];for(n=i-1;-1!==n;--n)for(t in e=r[n]){for(t=parseInt(t);t>=a.length;)a[a.length]=0;0!==e[t]&&a[t]++}var o=a.length,s=Array(o+1);for(s[0]=0,n=0;n<o;++n)s[n+1]=s[n]+a[n];var c=Array(s[o]),u=Array(s[o]);for(n=i-1;-1!==n;--n)for(t in e=r[n])0!==e[t]&&(a[t]--,c[s[t]+a[t]]=n,u[s[t]+a[t]]=e[t]);return[s,c,u]},numeric.ccsFull=function(r){var e,n,t,i,a=r[0],o=r[1],s=r[2],c=numeric.ccsDim(r),u=c[0],h=c[1],m=numeric.rep([u,h],0);for(e=0;e<h;e++)for(t=a[e],i=a[e+1],n=t;n<i;++n)m[o[n]][e]=s[n];return m},numeric.ccsTSolve=function(r,e,n,t,i){var a,o,s,c,u,h,m,f=r[0],l=r[1],d=r[2],p=f.length-1,M=Math.max,g=0;function x(r){var e;if(0===n[r]){for(n[r]=1,e=f[r];e<f[r+1];++e)x(l[e]);i[g]=r,++g}}for(void 0===t&&(n=numeric.rep([p],0)),void 0===t&&(t=numeric.linspace(0,n.length-1)),void 0===i&&(i=[]),a=t.length-1;-1!==a;--a)x(t[a]);for(i.length=g,a=i.length-1;-1!==a;--a)n[i[a]]=0;for(a=t.length-1;-1!==a;--a)o=t[a],n[o]=e[o];for(a=i.length-1;-1!==a;--a){for(o=i[a],s=f[o],c=M(f[o+1],s),u=s;u!==c;++u)if(l[u]===o){n[o]/=d[u];break}for(m=n[o],u=s;u!==c;++u)(h=l[u])!==o&&(n[h]-=m*d[u])}return n},numeric.ccsDFS=function(r){this.k=Array(r),this.k1=Array(r),this.j=Array(r)},numeric.ccsDFS.prototype.dfs=function(r,e,n,t,i,a){var o,s,c,u=0,h=i.length,m=this.k,f=this.k1,l=this.j;if(0===t[r])for(t[r]=1,l[0]=r,m[0]=s=e[r],f[0]=c=e[r+1];;)if(s>=c){if(i[h]=l[u],0===u)return;++h,s=m[--u],c=f[u]}else 0===t[o=a[n[s]]]?(t[o]=1,m[u]=s,l[++u]=o,s=e[o],f[u]=c=e[o+1]):++s},numeric.ccsLPSolve=function(r,e,n,t,i,a,o){var s,c,u,h,m,f,l,d,p,M=r[0],g=r[1],x=r[2],y=(M.length,e[0]),v=e[1],b=e[2];for(c=y[i],u=y[i+1],t.length=0,s=c;s<u;++s)o.dfs(a[v[s]],M,g,n,t,a);for(s=t.length-1;-1!==s;--s)n[t[s]]=0;for(s=c;s!==u;++s)n[h=a[v[s]]]=b[s];for(s=t.length-1;-1!==s;--s){for(m=M[h=t[s]],f=M[h+1],l=m;l<f;++l)if(a[g[l]]===h){n[h]/=x[l];break}for(p=n[h],l=m;l<f;++l)(d=a[g[l]])!==h&&(n[d]-=p*x[l])}return n},numeric.ccsLUP1=function(r,e){var n,t,i,a,o,s,c,u=r[0].length-1,h=[numeric.rep([u+1],0),[],[]],m=[numeric.rep([u+1],0),[],[]],f=h[0],l=h[1],d=h[2],p=m[0],M=m[1],g=m[2],x=numeric.rep([u],0),y=numeric.rep([u],0),v=numeric.ccsLPSolve,b=(Math.max,Math.abs),w=numeric.linspace(0,u-1),T=numeric.linspace(0,u-1),z=new numeric.ccsDFS(u);for(void 0===e&&(e=1),n=0;n<u;++n){for(v(h,r,x,y,n,T,z),a=-1,o=-1,t=y.length-1;-1!==t;--t)(i=y[t])<=n||(s=b(x[i]))>a&&(o=i,a=s);for(b(x[n])<e*a&&(t=w[n],a=w[o],w[n]=a,T[a]=n,w[o]=t,T[t]=o,a=x[n],x[n]=x[o],x[o]=a),a=f[n],o=p[n],c=x[n],l[a]=w[n],d[a]=1,++a,t=y.length-1;-1!==t;--t)s=x[i=y[t]],y[t]=0,x[i]=0,i<=n?(M[o]=i,g[o]=s,++o):(l[a]=w[i],d[a]=s/c,++a);f[n+1]=a,p[n+1]=o}for(t=l.length-1;-1!==t;--t)l[t]=T[l[t]];return{L:h,U:m,P:w,Pinv:T}},numeric.ccsDFS0=function(r){this.k=Array(r),this.k1=Array(r),this.j=Array(r)},numeric.ccsDFS0.prototype.dfs=function(r,e,n,t,i,a,o){var s,c,u,h=0,m=i.length,f=this.k,l=this.k1,d=this.j;if(0===t[r])for(t[r]=1,d[0]=r,f[0]=c=e[a[r]],l[0]=u=e[a[r]+1];;){if(isNaN(c))throw new Error("Ow!");if(c>=u){if(i[m]=a[d[h]],0===h)return;++m,c=f[--h],u=l[h]}else 0===t[s=n[c]]?(t[s]=1,f[h]=c,d[++h]=s,c=e[s=a[s]],l[h]=u=e[s+1]):++c}},numeric.ccsLPSolve0=function(r,e,n,t,i,a,o,s){var c,u,h,m,f,l,d,p,M,g=r[0],x=r[1],y=r[2],v=(g.length,e[0]),b=e[1],w=e[2];for(u=v[i],h=v[i+1],t.length=0,c=u;c<h;++c)s.dfs(b[c],g,x,n,t,a,o);for(c=t.length-1;-1!==c;--c)n[o[m=t[c]]]=0;for(c=u;c!==h;++c)n[m=b[c]]=w[c];for(c=t.length-1;-1!==c;--c){for(p=o[m=t[c]],f=g[m],l=g[m+1],d=f;d<l;++d)if(x[d]===p){n[p]/=y[d];break}for(M=n[p],d=f;d<l;++d)n[x[d]]-=M*y[d];n[p]=M}},numeric.ccsLUP0=function(r,e){var n,t,i,a,o,s,c,u=r[0].length-1,h=[numeric.rep([u+1],0),[],[]],m=[numeric.rep([u+1],0),[],[]],f=h[0],l=h[1],d=h[2],p=m[0],M=m[1],g=m[2],x=numeric.rep([u],0),y=numeric.rep([u],0),v=numeric.ccsLPSolve0,b=(Math.max,Math.abs),w=numeric.linspace(0,u-1),T=numeric.linspace(0,u-1),z=new numeric.ccsDFS0(u);for(void 0===e&&(e=1),n=0;n<u;++n){for(v(h,r,x,y,n,T,w,z),a=-1,o=-1,t=y.length-1;-1!==t;--t)(i=y[t])<=n||(s=b(x[w[i]]))>a&&(o=i,a=s);for(b(x[w[n]])<e*a&&(t=w[n],a=w[o],w[n]=a,T[a]=n,w[o]=t,T[t]=o),a=f[n],o=p[n],c=x[w[n]],l[a]=w[n],d[a]=1,++a,t=y.length-1;-1!==t;--t)s=x[w[i=y[t]]],y[t]=0,x[w[i]]=0,i<=n?(M[o]=i,g[o]=s,++o):(l[a]=w[i],d[a]=s/c,++a);f[n+1]=a,p[n+1]=o}for(t=l.length-1;-1!==t;--t)l[t]=T[l[t]];return{L:h,U:m,P:w,Pinv:T}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(r){return[numeric.sup(r[1])+1,r[0].length-1]},numeric.ccsGetBlock=function(r,e,n){var t=numeric.ccsDim(r),i=t[0],a=t[1];void 0===e?e=numeric.linspace(0,i-1):"number"==typeof e&&(e=[e]),void 0===n?n=numeric.linspace(0,a-1):"number"==typeof n&&(n=[n]);var o,s,c,u,h=e.length,m=n.length,f=numeric.rep([a],0),l=[],d=[],p=[f,l,d],M=r[0],g=r[1],x=r[2],y=numeric.rep([i],0),v=0,b=numeric.rep([i],0);for(s=0;s<m;++s){var w=M[u=n[s]],T=M[u+1];for(o=w;o<T;++o)b[c=g[o]]=1,y[c]=x[o];for(o=0;o<h;++o)b[e[o]]&&(l[v]=o,d[v]=y[e[o]],++v);for(o=w;o<T;++o)b[c=g[o]]=0;f[s+1]=v}return p},numeric.ccsDot=function(r,e){var n,t,i,a,o,s,c,u,h,m,f,l=r[0],d=r[1],p=r[2],M=e[0],g=e[1],x=e[2],y=numeric.ccsDim(r),v=numeric.ccsDim(e),b=y[0],w=(y[1],v[1]),T=numeric.rep([b],0),z=numeric.rep([b],0),S=Array(b),A=numeric.rep([w],0),k=[],_=[],j=[A,k,_];for(i=0;i!==w;++i){for(a=M[i],o=M[i+1],h=0,t=a;t<o;++t)for(m=g[t],f=x[t],s=l[m],c=l[m+1],n=s;n<c;++n)0===z[u=d[n]]&&(S[h]=u,z[u]=1,h+=1),T[u]=T[u]+p[n]*f;for(o=(a=A[i])+h,A[i+1]=o,t=h-1;-1!==t;--t)f=a+t,n=S[t],k[f]=n,_[f]=T[n],z[n]=0,T[n]=0;A[i+1]=A[i]+h}return j},numeric.ccsLUPSolve=function(r,e){var n=r.L,t=r.U,i=(r.P,e[0]),a=!1;"object"!=typeof i&&(i=(e=[[0,e.length],numeric.linspace(0,e.length-1),e])[0],a=!0);var o,s,c,u,h,m,f=e[1],l=e[2],d=n[0].length-1,p=i.length-1,M=numeric.rep([d],0),g=Array(d),x=numeric.rep([d],0),y=Array(d),v=numeric.rep([p+1],0),b=[],w=[],T=numeric.ccsTSolve,z=0;for(o=0;o<p;++o){for(h=0,c=i[o],u=i[o+1],s=c;s<u;++s)m=r.Pinv[f[s]],y[h]=m,x[m]=l[s],++h;for(y.length=h,T(n,x,M,y,g),s=y.length-1;-1!==s;--s)x[y[s]]=0;if(T(t,M,x,g,y),a)return x;for(s=g.length-1;-1!==s;--s)M[g[s]]=0;for(s=y.length-1;-1!==s;--s)m=y[s],b[z]=m,w[z]=x[m],x[m]=0,++z;v[o+1]=z}return[v,b,w]},numeric.ccsbinop=function(r,e){return void 0===e&&(e=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+e+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+r+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(r){var e,n=r[0],t=r[1],i=r[2],a=numeric.sup(t)+1,o=n.length,s=numeric.rep([a],0),c=Array(o),u=Array(o),h=numeric.rep([a],0);for(e=0;e<o;++e)h[t[e]]++;for(e=0;e<a;++e)s[e+1]=s[e]+h[e];var m,f,l=s.slice(0);for(e=0;e<o;++e)c[m=l[f=t[e]]]=n[e],u[m]=i[e],l[f]=l[f]+1;return[s,c,u]},numeric.ccsGather=function(r){var e,n,t,i,a,o=r[0],s=r[1],c=r[2],u=o.length-1,h=s.length,m=Array(h),f=Array(h),l=Array(h);for(a=0,e=0;e<u;++e)for(t=o[e],i=o[e+1],n=t;n!==i;++n)f[a]=e,m[a]=s[n],l[a]=c[n],++a;return[m,f,l]},numeric.sdim=function r(e,n,t){if(void 0===n&&(n=[]),"object"!=typeof e)return n;var i;for(i in void 0===t&&(t=0),t in n||(n[t]=0),e.length>n[t]&&(n[t]=e.length),e)e.hasOwnProperty(i)&&r(e[i],n,t+1);return n},numeric.sclone=function r(e,n,t){void 0===n&&(n=0),void 0===t&&(t=numeric.sdim(e).length);var i,a=Array(e.length);if(n===t-1){for(i in e)e.hasOwnProperty(i)&&(a[i]=e[i]);return a}for(i in e)e.hasOwnProperty(i)&&(a[i]=r(e[i],n+1,t));return a},numeric.sdiag=function(r){var e,n,t=r.length,i=Array(t);for(e=t-1;e>=1;e-=2)n=e-1,i[e]=[],i[e][e]=r[e],i[n]=[],i[n][n]=r[n];return 0===e&&(i[0]=[],i[0][0]=r[e]),i},numeric.sidentity=function(r){return numeric.sdiag(numeric.rep([r],1))},numeric.stranspose=function(r){var e,n,t,i=[];for(e in r.length,r)if(r.hasOwnProperty(e))for(n in t=r[e])t.hasOwnProperty(n)&&("object"!=typeof i[n]&&(i[n]=[]),i[n][e]=t[n]);return i},numeric.sLUP=function(r,e){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(r,e){var n,t,i,a,o,s,c,u=r.length,h=(e.length,numeric.stranspose(e)),m=h.length,f=Array(u);for(i=u-1;i>=0;i--){for(c=[],n=r[i],o=m-1;o>=0;o--){for(a in s=0,t=h[o],n)n.hasOwnProperty(a)&&a in t&&(s+=n[a]*t[a]);s&&(c[o]=s)}f[i]=c}return f},numeric.sdotMV=function(r,e){var n,t,i,a,o=r.length,s=Array(o);for(t=o-1;t>=0;t--){for(i in a=0,n=r[t])n.hasOwnProperty(i)&&e[i]&&(a+=n[i]*e[i]);a&&(s[t]=a)}return s},numeric.sdotVM=function(r,e){var n,t,i,a,o=[];for(n in r)if(r.hasOwnProperty(n))for(t in i=e[n],a=r[n],i)i.hasOwnProperty(t)&&(o[t]||(o[t]=0),o[t]+=a*i[t]);return o},numeric.sdotVV=function(r,e){var n,t=0;for(n in r)r[n]&&e[n]&&(t+=r[n]*e[n]);return t},numeric.sdot=function(r,e){var n=numeric.sdim(r).length,t=numeric.sdim(e).length;switch(1e3*n+t){case 0:return r*e;case 1001:return numeric.sdotVV(r,e);case 2001:return numeric.sdotMV(r,e);case 1002:return numeric.sdotVM(r,e);case 2002:return numeric.sdotMM(r,e);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+t)}},numeric.sscatter=function(r){var e,n,t,i,a=r[0].length,o=r.length,s=[];for(n=a-1;n>=0;--n)if(r[o-1][n]){for(i=s,t=0;t<o-2;t++)i[e=r[t][n]]||(i[e]=[]),i=i[e];i[r[t][n]]=r[t+1][n]}return s},numeric.sgather=function r(e,n,t){var i,a,o;for(a in void 0===n&&(n=[]),void 0===t&&(t=[]),i=t.length,e)if(e.hasOwnProperty(a))if(t[i]=parseInt(a),"number"==typeof(o=e[a])){if(o){if(0===n.length)for(a=i+1;a>=0;--a)n[a]=[];for(a=i;a>=0;--a)n[a].push(t[a]);n[i+1].push(o)}}else r(o,n,t);return t.length>i&&t.pop(),n},numeric.cLU=function(r){var e,n,t,i,a,o,s=r[0],c=r[1],u=r[2],h=s.length,m=0;for(e=0;e<h;e++)s[e]>m&&(m=s[e]);m++;var f,l=Array(m),d=Array(m),p=numeric.rep([m],1/0),M=numeric.rep([m],-1/0);for(t=0;t<h;t++)e=s[t],(n=c[t])<p[e]&&(p[e]=n),n>M[e]&&(M[e]=n);for(e=0;e<m-1;e++)M[e]>M[e+1]&&(M[e+1]=M[e]);for(e=m-1;e>=1;e--)p[e]<p[e-1]&&(p[e-1]=p[e]);for(e=0;e<m;e++)d[e]=numeric.rep([M[e]-p[e]+1],0),l[e]=numeric.rep([e-p[e]],0),p[e],M[e];for(t=0;t<h;t++)d[e=s[t]][c[t]-p[e]]=u[t];for(e=0;e<m-1;e++)for(i=e-p[e],y=d[e],n=e+1;p[n]<=e&&n<m;n++)if(a=e-p[n],o=M[e]-e,f=(v=d[n])[a]/y[i]){for(t=1;t<=o;t++)v[t+a]-=f*y[t+i];l[n][e-p[n]]=f}var g,x,y=[],v=[],b=[],w=[],T=[],z=[];for(h=0,g=0,e=0;e<m;e++){for(i=p[e],a=M[e],x=d[e],n=e;n<=a;n++)x[n-i]&&(y[h]=e,v[h]=n,b[h]=x[n-i],h++);for(x=l[e],n=i;n<e;n++)x[n-i]&&(w[g]=e,T[g]=n,z[g]=x[n-i],g++);w[g]=e,T[g]=e,z[g]=1,g++}return{U:[y,v,b],L:[w,T,z]}},numeric.cLUsolve=function(r,e){var n,t,i=r.L,a=r.U,o=numeric.clone(e),s=i[0],c=i[1],u=i[2],h=a[0],m=a[1],f=a[2],l=h.length,d=(s.length,o.length);for(t=0,n=0;n<d;n++){for(;c[t]<n;)o[n]-=u[t]*o[c[t]],t++;t++}for(t=l-1,n=d-1;n>=0;n--){for(;m[t]>n;)o[n]-=f[t]*o[m[t]],t--;o[n]/=f[t],t--}return o},numeric.cgrid=function(r,e){"number"==typeof r&&(r=[r,r]);var n,t,i,a=numeric.rep(r,-1);if("function"!=typeof e)switch(e){case"L":e=function(e,n){return e>=r[0]/2||n<r[1]/2};break;default:e=function(r,e){return!0}}for(i=0,n=1;n<r[0]-1;n++)for(t=1;t<r[1]-1;t++)e(n,t)&&(a[n][t]=i,i++);return a},numeric.cdelsq=function(r){var e,n,t,i,a,o=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(r),c=s[0],u=s[1],h=[],m=[],f=[];for(e=1;e<c-1;e++)for(n=1;n<u-1;n++)if(!(r[e][n]<0)){for(t=0;t<4;t++)i=e+o[t][0],a=n+o[t][1],r[i][a]<0||(h.push(r[e][n]),m.push(r[i][a]),f.push(-1));h.push(r[e][n]),m.push(r[e][n]),f.push(4)}return[h,m,f]},numeric.cdotMV=function(r,e){var n,t,i,a=r[0],o=r[1],s=r[2],c=a.length;for(i=0,t=0;t<c;t++)a[t]>i&&(i=a[t]);for(i++,n=numeric.rep([i],0),t=0;t<c;t++)n[a[t]]+=s[t]*e[o[t]];return n},numeric.Spline=function(r,e,n,t,i){this.x=r,this.yl=e,this.yr=n,this.kl=t,this.kr=i},numeric.Spline.prototype._at=function(r,e){var n,t,i,a=this.x,o=this.yl,s=this.yr,c=this.kl,u=this.kr,h=numeric.add,m=numeric.sub,f=numeric.mul;n=m(f(c[e],a[e+1]-a[e]),m(s[e+1],o[e])),t=h(f(u[e+1],a[e]-a[e+1]),m(s[e+1],o[e]));var l=(i=(r-a[e])/(a[e+1]-a[e]))*(1-i);return h(h(h(f(1-i,o[e]),f(i,s[e+1])),f(n,l*(1-i))),f(t,l*i))},numeric.Spline.prototype.at=function(r){if("number"==typeof r){var e,n,t,i=this.x,a=i.length,o=Math.floor;for(e=0,n=a-1;n-e>1;)i[t=o((e+n)/2)]<=r?e=t:n=t;return this._at(r,e)}a=r.length;var s,c=Array(a);for(s=a-1;-1!==s;--s)c[s]=this.at(r[s]);return c},numeric.Spline.prototype.diff=function(){var r,e,n,t=this.x,i=this.yl,a=this.yr,o=this.kl,s=this.kr,c=i.length,u=o,h=s,m=Array(c),f=Array(c),l=numeric.add,d=numeric.mul,p=numeric.div,M=numeric.sub;for(r=c-1;-1!==r;--r)e=t[r+1]-t[r],n=M(a[r+1],i[r]),m[r]=p(l(d(n,6),d(o[r],-4*e),d(s[r+1],-2*e)),e*e),f[r+1]=p(l(d(n,-6),d(o[r],2*e),d(s[r+1],4*e)),e*e);return new numeric.Spline(t,u,h,m,f)},numeric.Spline.prototype.roots=function(){function r(r){return r*r}var e=[],n=this.x,t=this.yl,i=this.yr,a=this.kl,o=this.kr;"number"==typeof t[0]&&(t=[t],i=[i],a=[a],o=[o]);var s,c,u,h,m,f,l,d,p,M,g,x,y,v,b,w,T,z,S,A,k,_,j,P=t.length,q=n.length-1,D=(e=Array(P),Math.sqrt);for(s=0;s!==P;++s){for(h=t[s],m=i[s],f=a[s],l=o[s],d=[],c=0;c!==q;c++){for(c>0&&m[c]*h[c]<0&&d.push(n[c]),w=n[c+1]-n[c],n[c],g=h[c],x=m[c+1],p=f[c]/w,y=(M=l[c+1]/w)+3*g+2*p-3*x,v=3*(M+p+2*(g-x)),(b=r(p-M+3*(g-x))+12*M*g)<=0?T=(z=y/v)>n[c]&&z<n[c+1]?[n[c],z,n[c+1]]:[n[c],n[c+1]]:(z=(y-D(b))/v,S=(y+D(b))/v,T=[n[c]],z>n[c]&&z<n[c+1]&&T.push(z),S>n[c]&&S<n[c+1]&&T.push(S),T.push(n[c+1])),k=T[0],z=this._at(k,c),u=0;u<T.length-1;u++)if(_=T[u+1],S=this._at(_,c),0!==z)if(0===S||z*S>0)k=_,z=S;else{for(var I=0;!((j=(z*_-S*k)/(z-S))<=k||j>=_);)if((A=this._at(j,c))*S>0)_=j,S=A,-1===I&&(z*=.5),I=-1;else{if(!(A*z>0))break;k=j,z=A,1===I&&(S*=.5),I=1}d.push(j),k=T[u+1],z=this._at(k,c)}else d.push(k),k=_,z=S;0===S&&d.push(_)}e[s]=d}return"number"==typeof this.yl[0]?e[0]:e},numeric.spline=function(r,e,n,t){var i,a=r.length,o=[],s=[],c=[],u=numeric.sub,h=numeric.mul,m=numeric.add;for(i=a-2;i>=0;i--)s[i]=r[i+1]-r[i],c[i]=u(e[i+1],e[i]);"string"!=typeof n&&"string"!=typeof t||(n=t="periodic");var f=[[],[],[]];switch(typeof n){case"undefined":o[0]=h(3/(s[0]*s[0]),c[0]),f[0].push(0,0),f[1].push(0,1),f[2].push(2/s[0],1/s[0]);break;case"string":o[0]=m(h(3/(s[a-2]*s[a-2]),c[a-2]),h(3/(s[0]*s[0]),c[0])),f[0].push(0,0,0),f[1].push(a-2,0,1),f[2].push(1/s[a-2],2/s[a-2]+2/s[0],1/s[0]);break;default:o[0]=n,f[0].push(0),f[1].push(0),f[2].push(1)}for(i=1;i<a-1;i++)o[i]=m(h(3/(s[i-1]*s[i-1]),c[i-1]),h(3/(s[i]*s[i]),c[i])),f[0].push(i,i,i),f[1].push(i-1,i,i+1),f[2].push(1/s[i-1],2/s[i-1]+2/s[i],1/s[i]);switch(typeof t){case"undefined":o[a-1]=h(3/(s[a-2]*s[a-2]),c[a-2]),f[0].push(a-1,a-1),f[1].push(a-2,a-1),f[2].push(1/s[a-2],2/s[a-2]);break;case"string":f[1][f[1].length-1]=0;break;default:o[a-1]=t,f[0].push(a-1),f[1].push(a-1),f[2].push(1)}o="number"!=typeof o[0]?numeric.transpose(o):[o];var l=Array(o.length);if("string"==typeof n)for(i=l.length-1;-1!==i;--i)l[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(f)),o[i]),l[i][a-1]=l[i][0];else for(i=l.length-1;-1!==i;--i)l[i]=numeric.cLUsolve(numeric.cLU(f),o[i]);return l="number"==typeof e[0]?l[0]:numeric.transpose(l),new numeric.Spline(r,e,e,l,l)},numeric.fftpow2=function r(e,n){var t=e.length;if(1!==t){var i,a,o=Math.cos,s=Math.sin,c=Array(t/2),u=Array(t/2),h=Array(t/2),m=Array(t/2);for(a=t/2,i=t-1;-1!==i;--i)h[--a]=e[i],m[a]=n[i],--i,c[a]=e[i],u[a]=n[i];r(c,u),r(h,m),a=t/2;var f,l,d,p=-6.283185307179586/t;for(i=t-1;-1!==i;--i)-1==--a&&(a=t/2-1),l=o(f=p*i),d=s(f),e[i]=c[a]+l*h[a]-d*m[a],n[i]=u[a]+l*m[a]+d*h[a]}},numeric._ifftpow2=function r(e,n){var t=e.length;if(1!==t){var i,a,o=Math.cos,s=Math.sin,c=Array(t/2),u=Array(t/2),h=Array(t/2),m=Array(t/2);for(a=t/2,i=t-1;-1!==i;--i)h[--a]=e[i],m[a]=n[i],--i,c[a]=e[i],u[a]=n[i];r(c,u),r(h,m),a=t/2;var f,l,d,p=6.283185307179586/t;for(i=t-1;-1!==i;--i)-1==--a&&(a=t/2-1),l=o(f=p*i),d=s(f),e[i]=c[a]+l*h[a]-d*m[a],n[i]=u[a]+l*m[a]+d*h[a]}},numeric.ifftpow2=function(r,e){numeric._ifftpow2(r,e),numeric.diveq(r,r.length),numeric.diveq(e,e.length)},numeric.convpow2=function(r,e,n,t){var i,a,o,s,c;for(numeric.fftpow2(r,e),numeric.fftpow2(n,t),i=r.length-1;-1!==i;--i)a=r[i],s=e[i],o=n[i],c=t[i],r[i]=a*o-s*c,e[i]=a*c+s*o;numeric.ifftpow2(r,e)},numeric.T.prototype.fft=function(){var r,e,n=this.x,t=this.y,i=n.length,a=Math.log,o=a(2),s=Math.ceil(a(2*i-1)/o),c=Math.pow(2,s),u=numeric.rep([c],0),h=numeric.rep([c],0),m=Math.cos,f=Math.sin,l=-3.141592653589793/i,d=numeric.rep([c],0),p=numeric.rep([c],0);for(Math.floor(i/2),r=0;r<i;r++)d[r]=n[r];if(void 0!==t)for(r=0;r<i;r++)p[r]=t[r];for(u[0]=1,r=1;r<=c/2;r++)e=l*r*r,u[r]=m(e),h[r]=f(e),u[c-r]=m(e),h[c-r]=f(e);var M=new numeric.T(d,p),g=new numeric.T(u,h);return M=M.mul(g),numeric.convpow2(M.x,M.y,numeric.clone(g.x),numeric.neg(g.y)),(M=M.mul(g)).x.length=i,M.y.length=i,M},numeric.T.prototype.ifft=function(){var r,e,n=this.x,t=this.y,i=n.length,a=Math.log,o=a(2),s=Math.ceil(a(2*i-1)/o),c=Math.pow(2,s),u=numeric.rep([c],0),h=numeric.rep([c],0),m=Math.cos,f=Math.sin,l=3.141592653589793/i,d=numeric.rep([c],0),p=numeric.rep([c],0);for(Math.floor(i/2),r=0;r<i;r++)d[r]=n[r];if(void 0!==t)for(r=0;r<i;r++)p[r]=t[r];for(u[0]=1,r=1;r<=c/2;r++)e=l*r*r,u[r]=m(e),h[r]=f(e),u[c-r]=m(e),h[c-r]=f(e);var M=new numeric.T(d,p),g=new numeric.T(u,h);return M=M.mul(g),numeric.convpow2(M.x,M.y,numeric.clone(g.x),numeric.neg(g.y)),(M=M.mul(g)).x.length=i,M.y.length=i,M.div(i)},numeric.gradient=function(r,e){var n=e.length,t=r(e);if(isNaN(t))throw new Error("gradient: f(x) is a NaN!");var i,a,o,s,c,u,h,m,f,l=Math.max,d=numeric.clone(e),p=Array(n),M=(numeric.div,numeric.sub,l=Math.max,Math.abs),g=Math.min,x=0;for(i=0;i<n;i++)for(var y=l(1e-6*t,1e-8);;){if(++x>20)throw new Error("Numerical gradient fails");if(d[i]=e[i]+y,a=r(d),d[i]=e[i]-y,o=r(d),d[i]=e[i],isNaN(a)||isNaN(o))y/=16;else{if(p[i]=(a-o)/(2*y),s=e[i]-y,c=e[i],u=e[i]+y,h=(a-t)/y,m=(t-o)/y,f=l(M(p[i]),M(t),M(a),M(o),M(s),M(c),M(u),1e-8),!(g(l(M(h-p[i]),M(m-p[i]),M(h-m))/f,y/f)>.001))break;y/=16}}return p},numeric.uncmin=function(r,e,n,t,i,a,o){var s=numeric.gradient;void 0===o&&(o={}),void 0===n&&(n=1e-8),void 0===t&&(t=function(e){return s(r,e)}),void 0===i&&(i=1e3);var c,u,h=(e=numeric.clone(e)).length,m=r(e);if(isNaN(m))throw new Error("uncmin: f(x0) is a NaN!");var f=Math.max,l=numeric.norm2;n=f(n,numeric.epsilon);var d,p,M,g,x,y,v,b,w,T,z=o.Hinv||numeric.identity(h),S=numeric.dot,A=(numeric.inv,numeric.sub),k=numeric.add,_=numeric.tensor,j=numeric.div,P=numeric.mul,q=numeric.all,D=numeric.isFinite,I=numeric.neg,C=0,L="";for(p=t(e);C<i;){if("function"==typeof a&&a(C,e,m,p,z)){L="Callback returned true";break}if(!q(D(p))){L="Gradient has Infinity or NaN";break}if(!q(D(d=I(S(z,p))))){L="Search direction has Infinity or NaN";break}if((T=l(d))<n){L="Newton step smaller than tol";break}for(w=1,u=S(p,d),x=e;C<i&&!(w*T<n)&&(x=k(e,g=P(d,w)),(c=r(x))-m>=.1*w*u||isNaN(c));)w*=.5,++C;if(w*T<n){L="Line search step size smaller than tol";break}if(C===i){L="maxit reached during line search";break}b=S(y=A(M=t(x),p),g),v=S(z,y),z=A(k(z,P((b+S(y,v))/(b*b),_(g,g))),j(k(_(v,g),_(g,v)),b)),e=x,m=c,p=M,++C}return{solution:e,f:m,gradient:p,invHessian:z,iterations:C,message:L}},numeric.Dopri=function(r,e,n,t,i,a,o){this.x=r,this.y=e,this.f=n,this.ymid=t,this.iterations=i,this.events=o,this.message=a},numeric.Dopri.prototype._at=function(r,e){function n(r){return r*r}var t,i,a,o,s,c,u,h,m,f=this,l=f.x,d=f.y,p=f.f,M=f.ymid,g=(l.length,Math.floor,numeric.add),x=numeric.mul,y=numeric.sub;return t=l[e],i=l[e+1],o=d[e],s=d[e+1],a=t+.5*(i-t),c=M[e],u=y(p[e],x(o,1/(t-a)+2/(t-i))),h=y(p[e+1],x(s,1/(i-a)+2/(i-t))),g(g(g(g(x(o,(m=[n(r-i)*(r-a)/n(t-i)/(t-a),n(r-t)*n(r-i)/n(t-a)/n(i-a),n(r-t)*(r-a)/n(i-t)/(i-a),(r-t)*n(r-i)*(r-a)/n(t-i)/(t-a),(r-i)*n(r-t)*(r-a)/n(t-i)/(i-a)])[0]),x(c,m[1])),x(s,m[2])),x(u,m[3])),x(h,m[4]))},numeric.Dopri.prototype.at=function(r){var e,n,t,i=Math.floor;if("number"!=typeof r){var a=r.length,o=Array(a);for(e=a-1;-1!==e;--e)o[e]=this.at(r[e]);return o}var s=this.x;for(e=0,n=s.length-1;n-e>1;)s[t=i(.5*(e+n))]<=r?e=t:n=t;return this._at(r,e)},numeric.dopri=function(r,e,n,t,i,a,o){void 0===i&&(i=1e-6),void 0===a&&(a=1e3);var s,c,u,h,m,f,l,d,p,M,g,x,y,v=[r],b=[n],w=[t(r,n)],T=[],z=[3/40,9/40],S=[44/45,-56/15,32/9],A=[19372/6561,-25360/2187,64448/6561,-212/729],k=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],_=[35/384,0,500/1113,125/192,-2187/6784,11/84],j=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,5618549.5/235043384],P=[.2,.3,.8,8/9,1,1],q=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40],D=0,I=(e-r)/10,C=0,L=numeric.add,U=numeric.mul,J=(Math.max,Math.min),N=Math.abs,F=numeric.norminf,E=Math.pow,O=numeric.any,V=numeric.lt,R=numeric.and,G=(numeric.sub,new numeric.Dopri(v,b,w,T,-1,""));for("function"==typeof o&&(g=o(r,n));r<e&&C<a;)if(++C,r+I>e&&(I=e-r),s=t(r+P[0]*I,L(n,U(.2*I,w[D]))),c=t(r+P[1]*I,L(L(n,U(z[0]*I,w[D])),U(z[1]*I,s))),u=t(r+P[2]*I,L(L(L(n,U(S[0]*I,w[D])),U(S[1]*I,s)),U(S[2]*I,c))),h=t(r+P[3]*I,L(L(L(L(n,U(A[0]*I,w[D])),U(A[1]*I,s)),U(A[2]*I,c)),U(A[3]*I,u))),m=t(r+P[4]*I,L(L(L(L(L(n,U(k[0]*I,w[D])),U(k[1]*I,s)),U(k[2]*I,c)),U(k[3]*I,u)),U(k[4]*I,h))),f=t(r+I,p=L(L(L(L(L(n,U(w[D],I*_[0])),U(c,I*_[2])),U(u,I*_[3])),U(h,I*_[4])),U(m,I*_[5]))),(M="number"==typeof(l=L(L(L(L(L(U(w[D],I*q[0]),U(c,I*q[2])),U(u,I*q[3])),U(h,I*q[4])),U(m,I*q[5])),U(f,I*q[6])))?N(l):F(l))>i){if(r+(I=.2*I*E(i/M,.25))===r){G.msg="Step size became too small";break}}else{if(T[D]=L(L(L(L(L(L(n,U(w[D],I*j[0])),U(c,I*j[2])),U(u,I*j[3])),U(h,I*j[4])),U(m,I*j[5])),U(f,I*j[6])),v[++D]=r+I,b[D]=p,w[D]=f,"function"==typeof o){var Y,B,H=r,X=r+.5*I;if(x=o(X,T[D-1]),O(y=R(V(g,0),V(0,x)))||(H=X,g=x,x=o(X=r+I,p),y=R(V(g,0),V(0,x))),O(y)){for(var Q,Z,W=0,$=1,K=1;;){if("number"==typeof g)B=(K*x*H-$*g*X)/(K*x-$*g);else for(B=X,d=g.length-1;-1!==d;--d)g[d]<0&&x[d]>0&&(B=J(B,(K*x[d]*H-$*g[d]*X)/(K*x[d]-$*g[d])));if(B<=H||B>=X)break;Z=o(B,Y=G._at(B,D-1)),O(Q=R(V(g,0),V(0,Z)))?(X=B,x=Z,y=Q,K=1,-1===W?$*=.5:$=1,W=-1):(H=B,g=Z,$=1,1===W?K*=.5:K=1,W=1)}return p=G._at(.5*(r+B),D-1),G.f[D]=t(B,Y),G.x[D]=B,G.y[D]=Y,G.ymid[D-1]=p,G.events=y,G.iterations=C,G}}r+=I,n=p,g=x,I=J(.8*I*E(i/M,.25),4*I)}return G.iterations=C,G},numeric.LU=function(r,e){e=e||!1;var n,t,i,a,o,s,c,u,h,m=Math.abs,f=r.length,l=f-1,d=new Array(f);for(e||(r=numeric.clone(r)),i=0;i<f;++i){for(c=i,h=m((s=r[i])[i]),t=i+1;t<f;++t)h<(a=m(r[t][i]))&&(h=a,c=t);for(d[i]=c,c!=i&&(r[i]=r[c],r[c]=s,s=r[i]),o=s[i],n=i+1;n<f;++n)r[n][i]/=o;for(n=i+1;n<f;++n){for(u=r[n],t=i+1;t<l;++t)u[t]-=u[i]*s[t],u[++t]-=u[i]*s[t];t===l&&(u[t]-=u[i]*s[t])}}return{LU:r,P:d}},numeric.LUsolve=function(r,e){var n,t,i,a,o,s=r.LU,c=s.length,u=numeric.clone(e),h=r.P;for(n=c-1;-1!==n;--n)u[n]=e[n];for(n=0;n<c;++n)for(i=h[n],h[n]!==n&&(o=u[n],u[n]=u[i],u[i]=o),a=s[n],t=0;t<n;++t)u[n]-=u[t]*a[t];for(n=c-1;n>=0;--n){for(a=s[n],t=n+1;t<c;++t)u[n]-=u[t]*a[t];u[n]/=a[n]}return u},numeric.solve=function(r,e,n){return numeric.LUsolve(numeric.LU(r,n),e)},numeric.echelonize=function(r){var e,n,t,i,a,o,s,c,u=numeric.dim(r),h=u[0],m=u[1],f=numeric.identity(h),l=Array(h),d=Math.abs,p=numeric.diveq;for(r=numeric.clone(r),e=0;e<h;++e){for(t=0,a=r[e],o=f[e],n=1;n<m;++n)d(a[t])<d(a[n])&&(t=n);for(l[e]=t,p(o,a[t]),p(a,a[t]),n=0;n<h;++n)if(n!==e){for(c=(s=r[n])[t],i=m-1;-1!==i;--i)s[i]-=a[i]*c;for(s=f[n],i=h-1;-1!==i;--i)s[i]-=o[i]*c}}return{I:f,A:r,P:l}},numeric.__solveLP=function(r,e,n,t,i,a,o){var s,c,u,h,m=numeric.sum,f=(numeric.log,numeric.mul),l=numeric.sub,d=numeric.dot,p=numeric.div,M=numeric.add,g=r.length,x=n.length,y=!1,v=1,b=(numeric.transpose(e),numeric.svd,numeric.transpose),w=(numeric.leq,Math.sqrt),T=Math.abs,z=(numeric.muleq,numeric.norminf,numeric.any,Math.min),S=numeric.all,A=numeric.gt,k=Array(g),_=Array(x),j=(numeric.rep([x],1),numeric.solve),P=l(n,d(e,a)),q=d(r,r);for(u=0;u<i;++u){var D,I;for(D=x-1;-1!==D;--D)_[D]=p(e[D],P[D]);var C=b(_);for(D=g-1;-1!==D;--D)k[D]=m(C[D]);v=.25*T(q/d(r,k));var L=100*w(q/d(k,k));for((!isFinite(v)||v>L)&&(v=L),h=M(r,f(v,k)),c=d(C,_),D=g-1;-1!==D;--D)c[D][D]+=1;I=j(c,p(h,v),!0);var U=p(P,d(e,I)),J=1;for(D=x-1;-1!==D;--D)U[D]<0&&(J=z(J,-.999*U[D]));if(s=l(a,f(I,J)),!S(A(P=l(n,d(e,s)),0)))return{solution:a,message:"",iterations:u};if(a=s,v<t)return{solution:s,message:"",iterations:u};if(o){var N=d(r,h),F=d(e,h);for(y=!0,D=x-1;-1!==D;--D)if(N*F[D]<0){y=!1;break}}else y=!(a[g-1]>=0);if(y)return{solution:s,message:"Unbounded",iterations:u}}return{solution:a,message:"maximum iteration count exceeded",iterations:u}},numeric._solveLP=function(r,e,n,t,i){var a=r.length,o=n.length,s=(numeric.sum,numeric.log,numeric.mul,numeric.sub),c=numeric.dot,u=(numeric.div,numeric.add,numeric.rep([a],0).concat([1])),h=numeric.rep([o,1],-1),m=numeric.blockMatrix([[e,h]]),f=n,l=numeric.rep([a],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),d=numeric.__solveLP(u,m,f,t,i,l,!1),p=numeric.clone(d.solution);if(p.length=a,numeric.inf(s(n,c(e,p)))<0)return{solution:NaN,message:"Infeasible",iterations:d.iterations};var M=numeric.__solveLP(r,e,n,t,i-d.iterations,p,!0);return M.iterations+=d.iterations,M},numeric.solveLP=function(r,e,n,t,i,a,o){if(void 0===o&&(o=1e3),void 0===a&&(a=numeric.epsilon),void 0===t)return numeric._solveLP(r,e,n,a,o);var s,c=t.length,u=t[0].length,h=e.length,m=numeric.echelonize(t),f=numeric.rep([u],0),l=m.P,d=[];for(s=l.length-1;-1!==s;--s)f[l[s]]=1;for(s=u-1;-1!==s;--s)0===f[s]&&d.push(s);var p=numeric.getRange,M=numeric.linspace(0,c-1),g=numeric.linspace(0,h-1),x=p(t,M,d),y=p(e,g,l),v=p(e,g,d),b=numeric.dot,w=numeric.sub,T=b(y,m.I),z=w(v,b(T,x)),S=w(n,b(T,i)),A=Array(l.length),k=Array(d.length);for(s=l.length-1;-1!==s;--s)A[s]=r[l[s]];for(s=d.length-1;-1!==s;--s)k[s]=r[d[s]];var _=w(k,b(A,b(m.I,x))),j=numeric._solveLP(_,z,S,a,o),P=j.solution;if(P!=P)return j;var q=b(m.I,w(i,b(x,P))),D=Array(r.length);for(s=l.length-1;-1!==s;--s)D[l[s]]=q[s];for(s=d.length-1;-1!==s;--s)D[d[s]]=P[s];return{solution:D,message:j.message,iterations:j.iterations}},numeric.MPStoLP=function(r){r instanceof String&&r.split("\n");var e,n,t,i,a=0,o=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],s=r.length,c=0,u={},h=[],m=0,f={},l=0,d=[],p=[],M=[];function g(n){throw new Error("MPStoLP: "+n+"\nLine "+e+": "+r[e]+"\nCurrent state: "+o[a]+"\n")}for(e=0;e<s;++e){var x=(t=r[e]).match(/\S*/g),y=[];for(n=0;n<x.length;++n)""!==x[n]&&y.push(x[n]);if(0!==y.length){for(n=0;n<o.length&&t.substr(0,o[n].length)!==o[n];++n);if(n<o.length){if(a=n,1===n&&(i=y[1]),6===n)return{name:i,c:d,A:numeric.transpose(p),b:M,rows:u,vars:f}}else switch(a){case 0:case 1:g("Unexpected line");case 2:switch(y[0]){case"N":0===c?c=y[1]:g("Two or more N rows");break;case"L":u[y[1]]=m,h[m]=1,M[m]=0,++m;break;case"G":u[y[1]]=m,h[m]=-1,M[m]=0,++m;break;case"E":u[y[1]]=m,h[m]=0,M[m]=0,++m;break;default:g("Parse error "+numeric.prettyPrint(y))}break;case 3:f.hasOwnProperty(y[0])||(f[y[0]]=l,d[l]=0,p[l]=numeric.rep([m],0),++l);var v=f[y[0]];for(n=1;n<y.length;n+=2)if(y[n]!==c){var b=u[y[n]];p[v][b]=(h[b]<0?-1:1)*parseFloat(y[n+1])}else d[v]=parseFloat(y[n+1]);break;case 4:for(n=1;n<y.length;n+=2)M[u[y[n]]]=(h[u[y[n]]]<0?-1:1)*parseFloat(y[n+1]);break;case 5:break;case 6:g("Internal error")}}}g("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(r,e,n,t,i,a,o){function s(r){var e,t,i=this,a=r.length,o=0,s=i.i=i.j=i.m=0;for(i.S=[],i.c=[],a||(r=[a++]);o<n;)i.S[o]=o++;for(o=0;o<n;o++)s=h(s+(e=i.S[o])+r[o%a]),t=i.S[s],i.S[o]=t,i.S[s]=e;i.g=function(r){var e=i.S,t=h(i.i+1),a=e[t],o=h(i.j+a),s=e[o];e[t]=s,e[o]=a;for(var c=e[h(a+s)];--r;)t=h(t+1),s=e[o=h(o+(a=e[t]))],e[t]=s,e[o]=a,c=c*n+e[h(a+s)];return i.i=t,i.j=o,c},i.g(n)}function c(r,e,n,t,i){if(n=[],i=typeof r,e&&"object"==i)for(t in r)if(t.indexOf("S")<5)try{n.push(c(r[t],e-1))}catch(r){}return n.length?n:r+("string"!=i?"\0":"")}function u(r,e,n,t){for(r+="",n=0,t=0;t<r.length;t++)e[h(t)]=h((n^=19*e[h(t)])+r.charCodeAt(t));for(t in r="",e)r+=String.fromCharCode(e[t]);return r}function h(r){return 255&r}e.seedrandom=function(t,h){var m,f=[];return t=u(c(h?[t,r]:arguments.length?t:[(new Date).getTime(),r,window],3),f),u((m=new s(f)).S,r),e.random=function(){for(var r=m.g(6),e=o,t=0;r<i;)r=(r+t)*n,e*=n,t=m.g(1);for(;r>=a;)r/=2,e/=2,t>>>=1;return(r+t)/e},t},o=e.pow(n,6),i=e.pow(2,i),a=2*i,u(e.random(),r)}([],numeric.seedrandom,256,0,52),function(r){function e(r){if("object"!=typeof r)return r;var n,t=[],i=r.length;for(n=0;n<i;n++)t[n+1]=e(r[n]);return t}function n(r){if("object"!=typeof r)return r;var e,t=[],i=r.length;for(e=1;e<i;e++)t[e-1]=n(r[e]);return t}r.solveQP=function(r,t,i,a,o,s){r=e(r),t=e(t),i=e(i);var c,u,h,m,f,l=[],d=[],p=[],M=[],g=[];if(o=o||0,s=s?e(s):[void 0,0],a=a?e(a):[],u=r.length-1,h=i[1].length-1,!a)for(c=1;c<=h;c+=1)a[c]=0;for(c=1;c<=h;c+=1)d[c]=0;for(m=Math.min(u,h),c=1;c<=u;c+=1)p[c]=0;for(l[1]=0,c=1;c<=2*u+m*(m+5)/2+2*h+1;c+=1)M[c]=0;for(c=1;c<=2;c+=1)g[c]=0;return function(r,e,n,t,i,a,o,s,c,u,h,m,f,l,d,p){var M,g,x,y,v,b,w,T,z,S,A,k,_,j,P,q,D,I,C,L,U,J,N,F,E,O,V;_=Math.min(t,u),x=2*t+_*(_+5)/2+2*u+1,F=1e-60;do{E=1+.1*(F+=F),O=1+.2*F}while(E<=1||O<=1);for(M=1;M<=t;M+=1)d[M]=e[M];for(M=t+1;M<=x;M+=1)d[M]=0;for(M=1;M<=u;M+=1)m[M]=0;if(v=[],0===p[1]){if(function(r,e,n,t){var i,a,o,s,c,u;for(a=1;a<=n;a+=1){if(t[1]=a,u=0,(o=a-1)<1){if((u=r[a][a]-u)<=0)break;r[a][a]=Math.sqrt(u)}else{for(s=1;s<=o;s+=1){for(c=r[s][a],i=1;i<s;i+=1)c-=r[i][a]*r[i][s];c/=r[s][s],r[s][a]=c,u+=c*c}if((u=r[a][a]-u)<=0)break;r[a][a]=Math.sqrt(u)}t[1]=0}}(r,0,t,v),0!==v[1])return void(p[1]=2);!function(r,e,n,t){var i,a,o,s;for(a=1;a<=n;a+=1){for(s=0,i=1;i<a;i+=1)s+=r[i][a]*t[i];t[a]=(t[a]-s)/r[a][a]}for(o=1;o<=n;o+=1)for(t[a=n+1-o]=t[a]/r[a][a],s=-t[a],i=1;i<a;i+=1)t[i]=t[i]+s*r[i][a]}(r,0,t,e),function(r,e,n){var t,i,a,o,s;for(a=1;a<=n;a+=1){for(r[a][a]=1/r[a][a],s=-r[a][a],t=1;t<a;t+=1)r[t][a]=s*r[t][a];if(n<(o=a+1))break;for(i=o;i<=n;i+=1)for(s=r[a][i],r[a][i]=0,t=1;t<=a;t+=1)r[t][i]=r[t][i]+s*r[t][a]}}(r,0,t)}else{for(g=1;g<=t;g+=1)for(i[g]=0,M=1;M<=g;M+=1)i[g]=i[g]+r[M][g]*e[M];for(g=1;g<=t;g+=1)for(e[g]=0,M=g;M<=t;M+=1)e[g]=e[g]+r[g][M]*i[M]}for(a[1]=0,g=1;g<=t;g+=1)for(i[g]=e[g],a[1]=a[1]+d[g]*i[g],d[g]=0,M=g+1;M<=t;M+=1)r[M][g]=0;for(a[1]=-a[1]/2,p[1]=0,j=(S=(z=(A=(T=(w=t)+t)+_)+_+1)+_*(_+1)/2)+u,M=1;M<=u;M+=1){for(q=0,g=1;g<=t;g+=1)q+=o[g][M]*o[g][M];d[j+M]=Math.sqrt(q)}function R(){for(l[1]=l[1]+1,x=S,M=1;M<=u;M+=1){for(x+=1,q=-s[M],g=1;g<=t;g+=1)q+=o[g][M]*i[g];if(Math.abs(q)<F&&(q=0),M>h)d[x]=q;else if(d[x]=-Math.abs(q),q>0){for(g=1;g<=t;g+=1)o[g][M]=-o[g][M];s[M]=-s[M]}}for(M=1;M<=f;M+=1)d[S+m[M]]=0;for(k=0,P=0,M=1;M<=u;M+=1)d[S+M]<P*d[j+M]&&(k=M,P=d[S+M]/d[j+M]);return 0===k?999:0}function G(){for(M=1;M<=t;M+=1){for(q=0,g=1;g<=t;g+=1)q+=r[g][M]*o[g][k];d[M]=q}for(y=w,M=1;M<=t;M+=1)d[y+M]=0;for(g=f+1;g<=t;g+=1)for(M=1;M<=t;M+=1)d[y+M]=d[y+M]+r[M][g]*d[g];for(J=!0,M=f;M>=1;M-=1){for(q=d[M],y=(x=z+M*(M+3)/2)-M,g=M+1;g<=f;g+=1)q-=d[x]*d[T+g],x+=g;if(q/=d[y],d[T+M]=q,m[M]<h)break;if(q<0)break;J=!1,b=M}if(!J)for(D=d[A+b]/d[T+b],M=1;M<=f&&!(m[M]<h)&&!(d[T+M]<0);M+=1)(P=d[A+M]/d[T+M])<D&&(D=P,b=M);for(q=0,M=w+1;M<=w+t;M+=1)q+=d[M]*d[M];if(Math.abs(q)<=F){if(J)return p[1]=1,999;for(M=1;M<=f;M+=1)d[A+M]=d[A+M]-D*d[T+M];return d[A+f+1]=d[A+f+1]+D,700}for(q=0,M=1;M<=t;M+=1)q+=d[w+M]*o[M][k];for(I=-d[S+k]/q,N=!0,J||D<I&&(I=D,N=!1),M=1;M<=t;M+=1)i[M]=i[M]+I*d[w+M],Math.abs(i[M])<F&&(i[M]=0);for(a[1]=a[1]+I*q*(I/2+d[A+f+1]),M=1;M<=f;M+=1)d[A+M]=d[A+M]-I*d[T+M];if(d[A+f+1]=d[A+f+1]+I,!N){for(q=-s[k],g=1;g<=t;g+=1)q+=i[g]*o[g][k];if(k>h)d[S+k]=q;else if(d[S+k]=-Math.abs(q),q>0){for(g=1;g<=t;g+=1)o[g][k]=-o[g][k];s[k]=-s[k]}return 700}for(m[f+=1]=k,x=z+(f-1)*f/2+1,M=1;M<=f-1;M+=1)d[x]=d[M],x+=1;if(f===t)d[x]=d[t];else{for(M=t;M>=f+1&&0!==d[M]&&(C=Math.max(Math.abs(d[M-1]),Math.abs(d[M])),L=Math.min(Math.abs(d[M-1]),Math.abs(d[M])),P=d[M-1]>=0?Math.abs(C*Math.sqrt(1+L*L/(C*C))):-Math.abs(C*Math.sqrt(1+L*L/(C*C))),C=d[M-1]/P,L=d[M]/P,1!==C);M-=1)if(0===C)for(d[M-1]=L*P,g=1;g<=t;g+=1)P=r[g][M-1],r[g][M-1]=r[g][M],r[g][M]=P;else for(d[M-1]=P,U=L/(1+C),g=1;g<=t;g+=1)P=C*r[g][M-1]+L*r[g][M],r[g][M]=U*(r[g][M-1]+P)-r[g][M],r[g][M-1]=P;d[x]=d[f]}return 0}function Y(){if(0===d[y=(x=z+b*(b+1)/2+1)+b])return 798;if(C=Math.max(Math.abs(d[y-1]),Math.abs(d[y])),L=Math.min(Math.abs(d[y-1]),Math.abs(d[y])),P=d[y-1]>=0?Math.abs(C*Math.sqrt(1+L*L/(C*C))):-Math.abs(C*Math.sqrt(1+L*L/(C*C))),C=d[y-1]/P,L=d[y]/P,1===C)return 798;if(0===C){for(M=b+1;M<=f;M+=1)P=d[y-1],d[y-1]=d[y],d[y]=P,y+=M;for(M=1;M<=t;M+=1)P=r[M][b],r[M][b]=r[M][b+1],r[M][b+1]=P}else{for(U=L/(1+C),M=b+1;M<=f;M+=1)P=C*d[y-1]+L*d[y],d[y]=U*(d[y-1]+P)-d[y],d[y-1]=P,y+=M;for(M=1;M<=t;M+=1)P=C*r[M][b]+L*r[M][b+1],r[M][b+1]=U*(r[M][b]+P)-r[M][b+1],r[M][b]=P}return 0}function B(){for(y=x-b,M=1;M<=b;M+=1)d[y]=d[x],x+=1,y+=1;return d[A+b]=d[A+b+1],m[b]=m[b+1],(b+=1)<f?797:0}function H(){return d[A+f]=d[A+f+1],d[A+f+1]=0,m[f]=0,f-=1,l[2]=l[2]+1,0}for(f=0,l[1]=0,l[2]=0,V=0;;){if(999===(V=R()))return;for(;0!==(V=G());){if(999===V)return;if(700===V)if(b===f)H();else{for(;Y(),797===(V=B()););H()}}}}(r,t,0,u,p,l,i,a,0,h,o,d,0,g,M,s),f="",1===s[1]&&(f="constraints are inconsistent, no solution!"),2===s[1]&&(f="matrix D in quadratic function is not positive definite!"),{solution:n(p),value:n(l),unconstrained_solution:n(t),iterations:n(g),iact:n(d),message:f}}}(numeric),numeric.svd=function(r){var e,n=numeric.epsilon,t=1e-64/n,i=0,a=0,o=0,s=0,c=0,u=numeric.clone(r),h=u.length,m=u[0].length;if(h<m)throw"Need more rows than columns";var f=new Array(m),l=new Array(m);for(a=0;a<m;a++)f[a]=l[a]=0;var d=numeric.rep([m,m],0);function p(r,e){return(r=Math.abs(r))>(e=Math.abs(e))?r*Math.sqrt(1+e*e/r/r):0==e?r:e*Math.sqrt(1+r*r/e/e)}var M=0,g=0,x=0,y=0,v=0,b=0,w=0;for(a=0;a<m;a++){for(f[a]=g,w=0,c=a+1,o=a;o<h;o++)w+=u[o][a]*u[o][a];if(w<=t)g=0;else for(M=u[a][a],g=Math.sqrt(w),M>=0&&(g=-g),x=M*g-w,u[a][a]=M-g,o=c;o<m;o++){for(w=0,s=a;s<h;s++)w+=u[s][a]*u[s][o];for(M=w/x,s=a;s<h;s++)u[s][o]+=M*u[s][a]}for(l[a]=g,w=0,o=c;o<m;o++)w+=u[a][o]*u[a][o];if(w<=t)g=0;else{for(M=u[a][a+1],g=Math.sqrt(w),M>=0&&(g=-g),x=M*g-w,u[a][a+1]=M-g,o=c;o<m;o++)f[o]=u[a][o]/x;for(o=c;o<h;o++){for(w=0,s=c;s<m;s++)w+=u[o][s]*u[a][s];for(s=c;s<m;s++)u[o][s]+=w*f[s]}}(v=Math.abs(l[a])+Math.abs(f[a]))>y&&(y=v)}for(a=m-1;-1!=a;a+=-1){if(0!=g){for(x=g*u[a][a+1],o=c;o<m;o++)d[o][a]=u[a][o]/x;for(o=c;o<m;o++){for(w=0,s=c;s<m;s++)w+=u[a][s]*d[s][o];for(s=c;s<m;s++)d[s][o]+=w*d[s][a]}}for(o=c;o<m;o++)d[a][o]=0,d[o][a]=0;d[a][a]=1,g=f[a],c=a}for(a=m-1;-1!=a;a+=-1){for(c=a+1,g=l[a],o=c;o<m;o++)u[a][o]=0;if(0!=g){for(x=u[a][a]*g,o=c;o<m;o++){for(w=0,s=c;s<h;s++)w+=u[s][a]*u[s][o];for(M=w/x,s=a;s<h;s++)u[s][o]+=M*u[s][a]}for(o=a;o<h;o++)u[o][a]=u[o][a]/g}else for(o=a;o<h;o++)u[o][a]=0;u[a][a]+=1}for(n*=y,s=m-1;-1!=s;s+=-1)for(var T=0;T<50;T++){var z=!1;for(c=s;-1!=c;c+=-1){if(Math.abs(f[c])<=n){z=!0;break}if(Math.abs(l[c-1])<=n)break}if(!z){i=0,w=1;var S=c-1;for(a=c;a<s+1&&(M=w*f[a],f[a]=i*f[a],!(Math.abs(M)<=n));a++)for(x=p(M,g=l[a]),l[a]=x,i=g/x,w=-M/x,o=0;o<h;o++)v=u[o][S],b=u[o][a],u[o][S]=v*i+b*w,u[o][a]=-v*w+b*i}if(b=l[s],c==s){if(b<0)for(l[s]=-b,o=0;o<m;o++)d[o][s]=-d[o][s];break}if(T>=49)throw"Error: no convergence.";for(y=l[c],g=p(M=(((v=l[s-1])-b)*(v+b)+((g=f[s-1])-(x=f[s]))*(g+x))/(2*x*v),1),M=M<0?((y-b)*(y+b)+x*(v/(M-g)-x))/y:((y-b)*(y+b)+x*(v/(M+g)-x))/y,i=1,w=1,a=c+1;a<s+1;a++){for(g=f[a],v=l[a],x=w*g,g*=i,b=p(M,x),f[a-1]=b,M=y*(i=M/b)+g*(w=x/b),g=-y*w+g*i,x=v*w,v*=i,o=0;o<m;o++)y=d[o][a-1],b=d[o][a],d[o][a-1]=y*i+b*w,d[o][a]=-y*w+b*i;for(b=p(M,x),l[a-1]=b,M=(i=M/b)*g+(w=x/b)*v,y=-w*g+i*v,o=0;o<h;o++)v=u[o][a-1],b=u[o][a],u[o][a-1]=v*i+b*w,u[o][a]=-v*w+b*i}f[c]=0,f[s]=M,l[s]=y}for(a=0;a<l.length;a++)l[a]<n&&(l[a]=0);for(a=0;a<m;a++)for(o=a-1;o>=0;o--)if(l[o]<l[a]){for(i=l[o],l[o]=l[a],l[a]=i,s=0;s<u.length;s++)e=u[s][a],u[s][a]=u[s][o],u[s][o]=e;for(s=0;s<d.length;s++)e=d[s][a],d[s][a]=d[s][o],d[s][o]=e;a=o}return{U:u,S:l,V:d}}}},__webpack_module_cache__={};function __webpack_require__(r){var e=__webpack_module_cache__[r];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r](n,n.exports,__webpack_require__),n.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}();var __webpack_exports__={};(()=>{__webpack_require__(131);var r=Math.PI,e=2*r,n=r/180,t=6378.137,i=60/Math.sqrt(650944.0944816993),a=t*i/60,o=1/i,s=.00108262998905,c=-253215306e-14/s,u=2/3;function h(r,e,n,t,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return 367*r-Math.floor(7*(r+Math.floor((e+9)/12))*.25)+Math.floor(275*e/9)+n+1721013.5+((o/6e4+a/60+i)/60+t)/24}function m(r,e,n,t,i,a,o){if(r instanceof Date){var s=r;return h(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds())}return h(r,e,n,t,i,a,o)}function f(n,t){var i,a,o,s,c,u,h,m,f,l,d,p,M,g,x,y,v,b,w=n.e3,T=n.ee2,z=n.peo,S=n.pgho,A=n.pho,k=n.pinco,_=n.plo,j=n.se2,P=n.se3,q=n.sgh2,D=n.sgh3,I=n.sgh4,C=n.sh2,L=n.sh3,U=n.si2,J=n.si3,N=n.sl2,F=n.sl3,E=n.sl4,O=n.t,V=n.xgh2,R=n.xgh3,G=n.xgh4,Y=n.xh2,B=n.xh3,H=n.xi2,X=n.xi3,Q=n.xl2,Z=n.xl3,W=n.xl4,$=n.zmol,K=n.zmos,rr=t.init,er=t.opsmode,nr=t.ep,tr=t.inclp,ir=t.nodep,ar=t.argpp,or=t.mp;b=K+119459e-10*O,"y"===rr&&(b=K),v=b+.0335*Math.sin(b);var sr=j*(h=.5*(g=Math.sin(v))*g-.25)+P*(m=-.5*g*Math.cos(v)),cr=U*h+J*m,ur=N*h+F*m+E*g,hr=q*h+D*m+I*g,mr=C*h+L*m;return b=$+.00015835218*O,"y"===rr&&(b=$),v=b+.1098*Math.sin(b),f=sr+(T*(h=.5*(g=Math.sin(v))*g-.25)+w*(m=-.5*g*Math.cos(v))),p=cr+(H*h+X*m),M=ur+(Q*h+Z*m+W*g),l=hr+(V*h+R*m+G*g),d=mr+(Y*h+B*m),"n"===rr&&(M-=_,l-=S,d-=A,tr+=p-=k,nr+=f-=z,s=Math.sin(tr),o=Math.cos(tr),tr>=.2?(ar+=l-=o*(d/=s),ir+=d,or+=M):(i=s*(u=Math.sin(ir)),a=s*(c=Math.cos(ir)),i+=d*c+p*o*u,a+=-d*u+p*o*c,(ir%=e)<0&&"a"===er&&(ir+=e),x=or+ar+o*ir,x+=M+l-p*ir*s,y=ir,(ir=Math.atan2(i,a))<0&&"a"===er&&(ir+=e),Math.abs(y-ir)>r&&(ir<y?ir+=e:ir-=e),ar=x-(or+=M)-o*ir)),{ep:nr,inclp:tr,nodep:ir,argpp:ar,mp:or}}function l(r){var t=(r-2451545)/36525,i=-62e-7*t*t*t+.093104*t*t+3164400184.812866*t+67310.54841;return(i=i*n/240%e)<0&&(i+=e),i}function d(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?l(m.apply(void 0,arguments)):l.apply(void 0,arguments)}function p(n,o){var h,m,l,d,p,M,g,x,y,v,b,w,T,z,S,A,k,_,j,P,q,D,I,C,L,U;n.t=o,n.error=0;var J=n.mo+n.mdot*n.t,N=n.argpo+n.argpdot*n.t,F=n.nodeo+n.nodedot*n.t;x=N,P=J;var E=n.t*n.t;if(D=F+n.nodecf*E,A=1-n.cc1*n.t,k=n.bstar*n.cc4*n.t,_=n.t2cof*E,1!==n.isimp){M=n.omgcof*n.t;var O=1+n.eta*Math.cos(J);P=J+(S=M+n.xmcof*(O*O*O-n.delmo)),x=N-S,w=(b=E*n.t)*n.t,A=A-n.d2*E-n.d3*b-n.d4*w,k+=n.bstar*n.cc5*(Math.sin(P)-n.sinmao),_=_+n.t3cof*b+w*(n.t4cof+n.t*n.t5cof)}q=n.no;var V=n.ecco;if(j=n.inclo,"d"===n.method){T=n.t;var R=function(r){var n,t,i,a,o,s,c,u,h=r.irez,m=r.d2201,f=r.d2211,l=r.d3210,d=r.d3222,p=r.d4410,M=r.d4422,g=r.d5220,x=r.d5232,y=r.d5421,v=r.d5433,b=r.del1,w=r.del2,T=r.del3,z=r.argpo,S=r.argpdot,A=r.t,k=r.xfact,_=r.xlamo,j=r.no,P=r.atime,q=r.em,D=r.argpm,I=r.inclm,C=r.xli,L=r.mm,U=r.xni,J=r.nodem,N=r.nm,F=.13130908,E=2.8843198,O=.37448087,V=5.7686396,R=.95240898,G=1.8014998,Y=1.050833,B=4.4108898,H=259200,X=0,Q=0,Z=(r.gsto+.0043752690880113*r.tc)%e;if(q+=r.dedt*A,I+=r.didt*A,D+=r.domdt*A,J+=r.dnodt*A,L+=r.dmdt*A,0!==h){(0===P||A*P<=0||Math.abs(A)<Math.abs(P))&&(P=0,U=j,C=_),n=A>0?720:-720;for(var W=381;381===W;)2!==h?(c=b*Math.sin(C-F)+w*Math.sin(2*(C-E))+T*Math.sin(3*(C-O)),o=U+k,s=b*Math.cos(C-F)+2*w*Math.cos(2*(C-E))+3*T*Math.cos(3*(C-O)),s*=o):(i=(u=z+S*P)+u,t=C+C,c=m*Math.sin(i+C-V)+f*Math.sin(C-V)+l*Math.sin(u+C-R)+d*Math.sin(-u+C-R)+p*Math.sin(i+t-G)+M*Math.sin(t-G)+g*Math.sin(u+C-Y)+x*Math.sin(-u+C-Y)+y*Math.sin(u+t-B)+v*Math.sin(-u+t-B),o=U+k,s=m*Math.cos(i+C-V)+f*Math.cos(C-V)+l*Math.cos(u+C-R)+d*Math.cos(-u+C-R)+g*Math.cos(u+C-Y)+x*Math.cos(-u+C-Y)+2*p*Math.cos(i+t-G)+M*Math.cos(t-G)+y*Math.cos(u+t-B)+v*Math.cos(-u+t-B),s*=o),Math.abs(A-P)>=720?W=381:(Q=A-P,W=0),381===W&&(C+=o*n+c*H,U+=c*n+s*H,P+=n);N=U+c*Q+s*Q*Q*.5,a=C+o*Q+c*Q*Q*.5,1!==h?(L=a-2*J+2*Z,X=N-j):(L=a-J-D+Z,X=N-j),N=j+X}return{atime:P,em:q,argpm:D,inclm:I,xli:C,mm:L,xni:U,nodem:J,dndt:X,nm:N}}({irez:n.irez,d2201:n.d2201,d2211:n.d2211,d3210:n.d3210,d3222:n.d3222,d4410:n.d4410,d4422:n.d4422,d5220:n.d5220,d5232:n.d5232,d5421:n.d5421,d5433:n.d5433,dedt:n.dedt,del1:n.del1,del2:n.del2,del3:n.del3,didt:n.didt,dmdt:n.dmdt,dnodt:n.dnodt,domdt:n.domdt,argpo:n.argpo,argpdot:n.argpdot,t:n.t,tc:T,gsto:n.gsto,xfact:n.xfact,xlamo:n.xlamo,no:n.no,atime:n.atime,em:V,argpm:x,inclm:j,xli:n.xli,mm:P,xni:n.xni,nodem:D,nm:q});V=R.em,x=R.argpm,j=R.inclm,P=R.mm,D=R.nodem,q=R.nm}if(q<=0)return n.error=2,[!1,!1];var G=Math.pow(i/q,u)*A*A;if(q=i/Math.pow(G,1.5),(V-=k)>=1||V<-.001)return n.error=1,[!1,!1];V<1e-6&&(V=1e-6),C=(P+=n.no*_)+x+D;var Y=V;if(I=j,y=x%=e,U=D%=e,L=P=((C%=e)-x-D)%e,d=Math.sin(j),l=Math.cos(j),"d"===n.method){var B=f(n,{inclo:n.inclo,init:"n",ep:Y,inclp:I,nodep:U,argpp:y,mp:L,opsmode:n.operationmode});if(Y=B.ep,U=B.nodep,y=B.argpp,L=B.mp,(I=B.inclp)<0&&(I=-I,U+=r,y-=r),Y<0||Y>1)return n.error=3,[!1,!1]}"d"===n.method&&(d=Math.sin(I),l=Math.cos(I),n.aycof=-.5*c*d,Math.abs(l+1)>15e-13?n.xlcof=-.25*c*d*(3+5*l)/(1+l):n.xlcof=-.25*c*d*(3+5*l)/15e-13);var H=Y*Math.cos(y);S=1/(G*(1-Y*Y));var X=Y*Math.sin(y)+S*n.aycof,Q=(L+y+U+S*n.xlcof*H-U)%e;g=Q,z=9999.9;for(var Z=1;Math.abs(z)>=1e-12&&Z<=10;)m=Math.sin(g),z=(Q-X*(h=Math.cos(g))+H*m-g)/(z=1-h*H-m*X),Math.abs(z)>=.95&&(z=z>0?.95:-.95),g+=z,Z+=1;var W=H*h+X*m,$=H*m-X*h,K=H*H+X*X,rr=G*(1-K);if(rr<0)return n.error=4,[!1,!1];var er=G*(1-W),nr=Math.sqrt(G)*$/er,tr=Math.sqrt(rr)/er,ir=Math.sqrt(1-K),ar=G/er*(m-X-H*(S=$/(1+ir))),or=G/er*(h-H+X*S);v=Math.atan2(ar,or);var sr=(or+or)*ar,cr=1-2*ar*ar,ur=.5*s*(S=1/rr),hr=ur*S;"d"===n.method&&(p=l*l,n.con41=3*p-1,n.x1mth2=1-p,n.x7thm1=7*p-1);var mr=er*(1-1.5*hr*ir*n.con41)+.5*ur*n.x1mth2*cr;if(mr<1)return n.error=6,{position:!1,velocity:!1};v-=.25*hr*n.x7thm1*sr;var fr=U+1.5*hr*l*sr,lr=I+1.5*hr*l*d*cr,dr=nr-q*ur*n.x1mth2*sr/i,pr=tr+q*ur*(n.x1mth2*cr+1.5*n.con41)/i,Mr=Math.sin(v),gr=Math.cos(v),xr=Math.sin(fr),yr=Math.cos(fr),vr=Math.sin(lr),br=Math.cos(lr),wr=-xr*br,Tr=yr*br,zr=wr*Mr+yr*gr,Sr=Tr*Mr+xr*gr,Ar=vr*Mr;return{position:{x:mr*zr*t,y:mr*Sr*t,z:mr*Ar*t},velocity:{x:(dr*zr+pr*(wr*gr-yr*Mr))*a,y:(dr*Sr+pr*(Tr*gr-xr*Mr))*a,z:(dr*Ar+pr*(vr*gr))*a}}}function M(a,h){var l,M=1440/(2*r),g={error:0};g.satnum=a.substring(2,7),g.epochyr=parseInt(a.substring(18,20),10),g.epochdays=parseFloat(a.substring(20,32)),g.ndot=parseFloat(a.substring(33,43)),g.nddot=parseFloat(".".concat(parseInt(a.substring(44,50),10),"E").concat(a.substring(50,52))),g.bstar=parseFloat("".concat(a.substring(53,54),".").concat(parseInt(a.substring(54,59),10),"E").concat(a.substring(59,61))),g.inclo=parseFloat(h.substring(8,16)),g.nodeo=parseFloat(h.substring(17,25)),g.ecco=parseFloat(".".concat(h.substring(26,33))),g.argpo=parseFloat(h.substring(34,42)),g.mo=parseFloat(h.substring(43,51)),g.no=parseFloat(h.substring(52,63)),g.no/=M,g.a=Math.pow(g.no*o,-2/3),g.ndot/=1440*M,g.nddot/=1440*M*1440,g.inclo*=n,g.nodeo*=n,g.argpo*=n,g.mo*=n,g.alta=g.a*(1+g.ecco)-1,g.altp=g.a*(1-g.ecco)-1;var x=function(r,e){for(var n=[31,r%4==0?29:28,31,30,31,30,31,31,30,31,30,31],t=Math.floor(e),i=1,a=0;t>a+n[i-1]&&i<12;)a+=n[i-1],i+=1;var o=i,s=t-a,c=24*(e-t),u=Math.floor(c);c=60*(c-u);var h=Math.floor(c);return{mon:o,day:s,hr:u,minute:h,sec:60*(c-h)}}(l=g.epochyr<57?g.epochyr+2e3:g.epochyr+1900,g.epochdays),y=x.mon,v=x.day,b=x.hr,w=x.minute,T=x.sec;return g.jdsatepoch=m(l,y,v,b,w,T),function(n,a){var o,h,m,l,M,g,x,y,v,b,w,T,z,S,A,k,_,j,P,q,D,I,C,L,U,J,N,F,E,O,V,R,G,Y,B,H,X,Q,Z,W,$,K,rr,er,nr,tr,ir,ar,or,sr,cr,ur,hr=a.opsmode,mr=a.satn,fr=a.epoch,lr=a.xbstar,dr=a.xecco,pr=a.xargpo,Mr=a.xinclo,gr=a.xmo,xr=a.xno,yr=a.xnodeo;n.isimp=0,n.method="n",n.aycof=0,n.con41=0,n.cc1=0,n.cc4=0,n.cc5=0,n.d2=0,n.d3=0,n.d4=0,n.delmo=0,n.eta=0,n.argpdot=0,n.omgcof=0,n.sinmao=0,n.t=0,n.t2cof=0,n.t3cof=0,n.t4cof=0,n.t5cof=0,n.x1mth2=0,n.x7thm1=0,n.mdot=0,n.nodedot=0,n.xlcof=0,n.xmcof=0,n.nodecf=0,n.irez=0,n.d2201=0,n.d2211=0,n.d3210=0,n.d3222=0,n.d4410=0,n.d4422=0,n.d5220=0,n.d5232=0,n.d5421=0,n.d5433=0,n.dedt=0,n.del1=0,n.del2=0,n.del3=0,n.didt=0,n.dmdt=0,n.dnodt=0,n.domdt=0,n.e3=0,n.ee2=0,n.peo=0,n.pgho=0,n.pho=0,n.pinco=0,n.plo=0,n.se2=0,n.se3=0,n.sgh2=0,n.sgh3=0,n.sgh4=0,n.sh2=0,n.sh3=0,n.si2=0,n.si3=0,n.sl2=0,n.sl3=0,n.sl4=0,n.gsto=0,n.xfact=0,n.xgh2=0,n.xgh3=0,n.xgh4=0,n.xh2=0,n.xh3=0,n.xi2=0,n.xi3=0,n.xl2=0,n.xl3=0,n.xl4=0,n.xlamo=0,n.zmol=0,n.zmos=0,n.atime=0,n.xli=0,n.xni=0,n.bstar=lr,n.ecco=dr,n.argpo=pr,n.inclo=Mr,n.mo=gr,n.no=xr,n.nodeo=yr,n.operationmode=hr,n.init="y",n.t=0;var vr=function(r){var n=r.ecco,t=r.epoch,a=r.inclo,o=r.opsmode,c=r.no,h=n*n,m=1-h,f=Math.sqrt(m),l=Math.cos(a),p=l*l,M=Math.pow(i/c,u),g=.75*s*(3*p-1)/(f*m),x=g/(M*M),y=M*(1-x*x-x*(1/3+134*x*x/81));c/=1+(x=g/(y*y));var v,b=Math.pow(i/c,u),w=Math.sin(a),T=b*m,z=1-5*p,S=-z-p-p,A=1/b,k=T*T,_=b*(1-n);if("a"===o){var j=t-7305,P=Math.floor(j+1e-8),q=.017202791694070362;(v=(1.7321343856509375+q*P+(q+e)*(j-P)+j*j*5075514194322695e-30)%e)<0&&(v+=e)}else v=d(t+2433281.5);return{no:c,method:"n",ainv:A,ao:b,con41:S,con42:z,cosio:l,cosio2:p,eccsq:h,omeosq:m,posq:k,rp:_,rteosq:f,sinio:w,gsto:v}}({satn:mr,ecco:n.ecco,epoch:fr,inclo:n.inclo,no:n.no,method:n.method,opsmode:n.operationmode}),br=vr.ao,wr=vr.con42,Tr=vr.cosio,zr=vr.cosio2,Sr=vr.eccsq,Ar=vr.omeosq,kr=vr.posq,_r=vr.rp,jr=vr.rteosq,Pr=vr.sinio;if(n.no=vr.no,n.con41=vr.con41,n.gsto=vr.gsto,n.error=0,Ar>=0||n.no>=0){if(n.isimp=0,_r<220/t+1&&(n.isimp=1),L=1.0122292763545218,j=1.8802768006108976e-9,(A=(_r-1)*t)<156){L=A-78,A<98&&(L=20);var qr=(120-L)/t;j=qr*qr*qr*qr,L=L/t+1}k=1/kr,K=1/(br-L),n.eta=br*n.ecco*K,T=n.eta*n.eta,w=n.ecco*n.eta,_=Math.abs(1-T),l=(x=(g=j*Math.pow(K,4))/Math.pow(_,3.5))*n.no*(br*(1+1.5*T+w*(4+T))+.375*s*K/_*n.con41*(8+3*T*(8+T))),n.cc1=n.bstar*l,M=0,n.ecco>1e-4&&(M=-2*g*K*c*n.no*Pr/n.ecco),n.x1mth2=1-zr,n.cc4=2*n.no*x*br*Ar*(n.eta*(2+.5*T)+n.ecco*(.5+2*T)-s*K/(br*_)*(-3*n.con41*(1-2*w+T*(1.5-.5*w))+.75*n.x1mth2*(2*T-w*(1+T))*Math.cos(2*n.argpo))),n.cc5=2*x*br*Ar*(1+2.75*(T+w)+w*T),y=zr*zr,W=.5*(Z=1.5*s*k*n.no)*s*k,$=7.551504421875001e-7*k*k*n.no,n.mdot=n.no+.5*Z*jr*n.con41+.0625*W*jr*(13-78*zr+137*y),n.argpdot=-.5*Z*wr+.0625*W*(7-114*zr+395*y)+$*(3-36*zr+49*y),er=-Z*Tr,n.nodedot=er+(.5*W*(4-19*zr)+2*$*(3-7*zr))*Tr,rr=n.argpdot+n.nodedot,n.omgcof=n.bstar*M*Math.cos(n.argpo),n.xmcof=0,n.ecco>1e-4&&(n.xmcof=-u*g*n.bstar/w),n.nodecf=3.5*Ar*er*n.cc1,n.t2cof=1.5*n.cc1,Math.abs(Tr+1)>15e-13?n.xlcof=-.25*c*Pr*(3+5*Tr)/(1+Tr):n.xlcof=-.25*c*Pr*(3+5*Tr)/15e-13,n.aycof=-.5*c*Pr;var Dr=1+n.eta*Math.cos(n.mo);if(n.delmo=Dr*Dr*Dr,n.sinmao=Math.sin(n.mo),n.x7thm1=7*zr-1,2*r/n.no>=225){n.method="d",n.isimp=1,z=n.inclo;var Ir=function(r){var n,t,i,a,o,s,c,u,h,m,f,l,d,p,M,g,x,y,v,b,w,T,z,S,A,k,_,j,P,q,D,I,C,L,U,J,N,F,E,O,V,R,G,Y,B,H,X,Q,Z,W,$,K,rr,er,nr,tr,ir,ar,or,sr,cr,ur,hr,mr=r.epoch,fr=r.argpp,lr=r.tc,dr=r.inclp,pr=r.nodep,Mr=.01675,gr=.0549,xr=r.np,yr=r.ep,vr=Math.sin(pr),br=Math.cos(pr),wr=Math.sin(fr),Tr=Math.cos(fr),zr=Math.sin(dr),Sr=Math.cos(dr),Ar=yr*yr,kr=1-Ar,_r=Math.sqrt(kr),jr=mr+18261.5+lr/1440,Pr=(4.523602-.00092422029*jr)%e,qr=Math.sin(Pr),Dr=Math.cos(Pr),Ir=.91375164-.03568096*Dr,Cr=Math.sqrt(1-Ir*Ir),Lr=.089683511*qr/Cr,Ur=Math.sqrt(1-Lr*Lr),Jr=5.8351514+.001944368*jr,Nr=.39785416*qr/Cr,Fr=Ur*Dr+.91744867*Lr*qr;Nr=Math.atan2(Nr,Fr),Nr+=Jr-Pr;var Er=Math.cos(Nr),Or=Math.sin(Nr);b=.1945905,w=-.98088458,S=.91744867,A=.39785416,T=br,z=vr,f=29864797e-13;for(var Vr=1/xr,Rr=0;Rr<2;)nr=-6*(n=b*T+w*S*z)*(o=-zr*(c=-b*z+w*S*T)+Sr*(u=w*A))+Ar*(-24*(l=n*Tr+(t=Sr*c+zr*u)*wr)*(y=o*Tr)-6*(p=-n*wr+t*Tr)*(g=o*wr)),tr=-6*(n*(s=-zr*(h=w*z+b*S*T)+Sr*(m=b*A))+(i=-w*T+b*S*z)*o)+Ar*(-24*((d=i*Tr+(a=Sr*h+zr*m)*wr)*y+l*(v=s*Tr))+-6*(p*(x=s*wr)+(M=-i*wr+a*Tr)*g)),ir=-6*i*s+Ar*(-24*d*v-6*M*x),ar=6*t*o+Ar*(24*l*g-6*p*y),or=6*(a*o+t*s)+Ar*(24*(d*g+l*x)-6*(M*y+p*v)),sr=6*a*s+Ar*(24*d*x-6*M*v),K=(K=3*(n*n+t*t)+(cr=12*l*l-3*p*p)*Ar)+K+kr*cr,rr=(rr=6*(n*i+t*a)+(ur=24*l*d-6*p*M)*Ar)+rr+kr*ur,er=(er=3*(i*i+a*a)+(hr=12*d*d-3*M*M)*Ar)+er+kr*hr,H=-.5*(X=f*Vr)/_r,B=-15*yr*(Q=X*_r),Z=l*p+d*M,W=d*p+l*M,$=d*M-l*p,1===(Rr+=1)&&(k=B,_=H,j=X,P=Q,q=Z,D=W,I=$,C=K,L=rr,U=er,J=nr,N=tr,F=ir,E=ar,O=or,V=sr,R=cr,G=ur,Y=hr,b=Er,w=Or,S=Ir,A=Cr,T=Ur*br+Lr*vr,z=vr*Ur-br*Lr,f=4.7968065e-7);return{snodm:vr,cnodm:br,sinim:zr,cosim:Sr,sinomm:wr,cosomm:Tr,day:jr,e3:2*B*$,ee2:2*B*W,em:yr,emsq:Ar,gam:Jr,peo:0,pgho:0,pho:0,pinco:0,plo:0,rtemsq:_r,se2:2*k*D,se3:2*k*I,sgh2:2*P*G,sgh3:2*P*(Y-R),sgh4:-18*P*Mr,sh2:-2*_*O,sh3:-2*_*(V-E),si2:2*_*N,si3:2*_*(F-J),sl2:-2*j*L,sl3:-2*j*(U-C),sl4:-2*j*(-21-9*Ar)*Mr,s1:B,s2:H,s3:X,s4:Q,s5:Z,s6:W,s7:$,ss1:k,ss2:_,ss3:j,ss4:P,ss5:q,ss6:D,ss7:I,sz1:C,sz2:L,sz3:U,sz11:J,sz12:N,sz13:F,sz21:E,sz22:O,sz23:V,sz31:R,sz32:G,sz33:Y,xgh2:2*Q*ur,xgh3:2*Q*(hr-cr),xgh4:-18*Q*gr,xh2:-2*H*or,xh3:-2*H*(sr-ar),xi2:2*H*tr,xi3:2*H*(ir-nr),xl2:-2*X*rr,xl3:-2*X*(er-K),xl4:-2*X*(-21-9*Ar)*gr,nm:xr,z1:K,z2:rr,z3:er,z11:nr,z12:tr,z13:ir,z21:ar,z22:or,z23:sr,z31:cr,z32:ur,z33:hr,zmol:(.2299715*jr-Jr+4.7199672)%e,zmos:(6.2565837+.017201977*jr)%e}}({epoch:fr,ep:n.ecco,argpp:n.argpo,tc:0,inclp:n.inclo,nodep:n.nodeo,np:n.no,e3:n.e3,ee2:n.ee2,peo:n.peo,pgho:n.pgho,pho:n.pho,pinco:n.pinco,plo:n.plo,se2:n.se2,se3:n.se3,sgh2:n.sgh2,sgh3:n.sgh3,sgh4:n.sgh4,sh2:n.sh2,sh3:n.sh3,si2:n.si2,si3:n.si3,sl2:n.sl2,sl3:n.sl3,sl4:n.sl4,xgh2:n.xgh2,xgh3:n.xgh3,xgh4:n.xgh4,xh2:n.xh2,xh3:n.xh3,xi2:n.xi2,xi3:n.xi3,xl2:n.xl2,xl3:n.xl3,xl4:n.xl4,zmol:n.zmol,zmos:n.zmos});n.e3=Ir.e3,n.ee2=Ir.ee2,n.peo=Ir.peo,n.pgho=Ir.pgho,n.pho=Ir.pho,n.pinco=Ir.pinco,n.plo=Ir.plo,n.se2=Ir.se2,n.se3=Ir.se3,n.sgh2=Ir.sgh2,n.sgh3=Ir.sgh3,n.sgh4=Ir.sgh4,n.sh2=Ir.sh2,n.sh3=Ir.sh3,n.si2=Ir.si2,n.si3=Ir.si3,n.sl2=Ir.sl2,n.sl3=Ir.sl3,n.sl4=Ir.sl4,h=Ir.sinim,o=Ir.cosim,v=Ir.em,b=Ir.emsq,P=Ir.s1,q=Ir.s2,D=Ir.s3,I=Ir.s4,C=Ir.s5,U=Ir.ss1,J=Ir.ss2,N=Ir.ss3,F=Ir.ss4,E=Ir.ss5,O=Ir.sz1,V=Ir.sz3,R=Ir.sz11,G=Ir.sz13,Y=Ir.sz21,B=Ir.sz23,H=Ir.sz31,X=Ir.sz33,n.xgh2=Ir.xgh2,n.xgh3=Ir.xgh3,n.xgh4=Ir.xgh4,n.xh2=Ir.xh2,n.xh3=Ir.xh3,n.xi2=Ir.xi2,n.xi3=Ir.xi3,n.xl2=Ir.xl2,n.xl3=Ir.xl3,n.xl4=Ir.xl4,n.zmol=Ir.zmol,n.zmos=Ir.zmos,S=Ir.nm,nr=Ir.z1,tr=Ir.z3,ir=Ir.z11,ar=Ir.z13,or=Ir.z21,sr=Ir.z23,cr=Ir.z31,ur=Ir.z33;var Cr=f(n,{inclo:z,init:n.init,ep:n.ecco,inclp:n.inclo,nodep:n.nodeo,argpp:n.argpo,mp:n.mo,opsmode:n.operationmode});n.ecco=Cr.ep,n.inclo=Cr.inclp,n.nodeo=Cr.nodep,n.argpo=Cr.argpp,n.mo=Cr.mp;var Lr=function(n){var t,a,o,s,c,h,m,f,l,d,p,M,g,x,y,v,b,w,T,z,S=n.cosim,A=n.argpo,k=n.s2,_=n.sinim,j=n.ss2,P=n.t,q=n.mo,D=n.mdot,I=n.no,C=n.nodeo,L=n.nodedot,U=n.xpidot,J=n.ecco,N=n.eccsq,F=n.emsq,E=n.em,O=n.argpm,V=n.inclm,R=n.mm,G=n.nm,Y=n.nodem,B=n.irez,H=n.atime,X=n.d2201,Q=n.d2211,Z=n.d3210,W=n.d3222,$=n.d4410,K=n.d4422,rr=n.d5220,er=n.d5232,nr=n.d5421,tr=n.d5433,ir=n.dnodt,ar=n.domdt,or=n.del1,sr=n.del2,cr=n.del3,ur=n.xfact,hr=n.xlamo,mr=n.xli,fr=n.xni,lr=.0043752690880113,dr=.00015835218,pr=119459e-10;B=0,G<.0052359877&&G>.0034906585&&(B=1),G>=.00826&&G<=.00924&&E>=.5&&(B=2);var Mr=-pr*j*(n.sz21+n.sz23);(V<.052359877||V>r-.052359877)&&(Mr=0),0!==_&&(Mr/=_);var gr=-dr*k*(n.z21+n.z23);(V<.052359877||V>r-.052359877)&&(gr=0),ar=n.ss4*pr*(n.sz31+n.sz33-6)-S*Mr+n.s4*dr*(n.z31+n.z33-6),ir=Mr,0!==_&&(ar-=S/_*gr,ir+=gr/_);var xr=(n.gsto+n.tc*lr)%e;if(E+=(w=n.ss1*pr*n.ss5+n.s1*dr*n.s5)*P,V+=(T=j*pr*(n.sz11+n.sz13)+k*dr*(n.z11+n.z13))*P,O+=ar*P,Y+=ir*P,R+=(z=-pr*n.ss3*(n.sz1+n.sz3-14-6*F)-dr*n.s3*(n.z1+n.z3-14-6*F))*P,0!==B){if(y=Math.pow(G/i,u),2===B){var yr=E,vr=F;b=(E=J)*(F=N),E<=.65?(o=3.616-13.247*E+16.29*F,s=117.39*E-19.302-228.419*F+156.591*b,c=109.7927*E-18.9068-214.6334*F+146.5816*b,h=242.694*E-41.122-471.094*F+313.953*b,m=841.88*E-146.407-1629.014*F+1083.435*b,f=3017.977*E-532.114-5740.032*F+3708.276*b):(o=331.819*E-72.099-508.738*F+266.724*b,s=1582.851*E-346.844-2415.925*F+1246.113*b,c=1554.908*E-342.585-2366.899*F+1215.972*b,h=4758.686*E-1052.797-7193.992*F+3651.957*b,m=16178.11*E-3581.69-24462.77*F+12422.52*b,f=E>.715?29936.92*E-5149.66-54087.36*F+31324.56*b:1464.74-4664.75*E+3763.64*F),E<.7?(p=4988.61*E-919.2277-9064.77*F+5542.21*b,l=4568.6173*E-822.71072-8491.4146*F+5337.524*b,d=4690.25*E-853.666-8624.77*F+5341.4*b):(p=161616.52*E-37995.78-229838.2*F+109377.94*b,l=218913.95*E-51752.104-309468.16*F+146349.42*b,d=170470.89*E-40023.88-242699.48*F+115605.82*b),X=(g=17891679e-13*(x=G*G*3*(y*y)))*(t=.75*(1+2*S+(v=S*S)))*(-.306-.44*(E-.64)),Q=g*(1.5*(M=_*_))*o,Z=(g=3.7393792e-7*(x*=y))*(1.875*_*(1-2*S-3*v))*s,W=g*(-1.875*_*(1+2*S-3*v))*c,$=(g=2*(x*=y)*7.3636953e-9)*(35*M*t)*h,K=g*(39.375*M*M)*m,rr=(g=1.1428639e-7*(x*=y))*(9.84375*_*(M*(1-2*S-5*v)+.33333333*(4*S-2+6*v)))*f,er=g*(_*(4.92187512*M*(-2-4*S+10*v)+6.56250012*(1+2*S-3*v)))*d,nr=(g=2*x*2.1765803e-9)*(29.53125*_*(2-8*S+v*(8*S-12+10*v)))*l,tr=g*(29.53125*_*(-2-8*S+v*(12+8*S-10*v)))*p,hr=(q+C+C-(xr+xr))%e,ur=D+z+2*(L+ir-lr)-I,E=yr,F=vr}1===B&&(a=1+S,sr=2*(or=3*G*G*y*y)*(t=.75*(1+S)*(1+S))*(1+F*(.8125*F-2.5))*17891679e-13,cr=3*or*(a*=1.875*a*a)*(1+F*(6.60937*F-6))*2.2123015e-7*y,or=or*(.9375*_*_*(1+3*S)-.75*(1+S))*(s=1+2*F)*21460748e-13*y,hr=(q+C+A-xr)%e,ur=D+U+z+ar+ir-(I+lr)),mr=hr,fr=I,H=0,G=I+0}return{em:E,argpm:O,inclm:V,mm:R,nm:G,nodem:Y,irez:B,atime:H,d2201:X,d2211:Q,d3210:Z,d3222:W,d4410:$,d4422:K,d5220:rr,d5232:er,d5421:nr,d5433:tr,dedt:w,didt:T,dmdt:z,dndt:0,dnodt:ir,domdt:ar,del1:or,del2:sr,del3:cr,xfact:ur,xlamo:hr,xli:mr,xni:fr}}({cosim:o,emsq:b,argpo:n.argpo,s1:P,s2:q,s3:D,s4:I,s5:C,sinim:h,ss1:U,ss2:J,ss3:N,ss4:F,ss5:E,sz1:O,sz3:V,sz11:R,sz13:G,sz21:Y,sz23:B,sz31:H,sz33:X,t:n.t,tc:0,gsto:n.gsto,mo:n.mo,mdot:n.mdot,no:n.no,nodeo:n.nodeo,nodedot:n.nodedot,xpidot:rr,z1:nr,z3:tr,z11:ir,z13:ar,z21:or,z23:sr,z31:cr,z33:ur,ecco:n.ecco,eccsq:Sr,em:v,argpm:0,inclm:z,mm:0,nm:S,nodem:0,irez:n.irez,atime:n.atime,d2201:n.d2201,d2211:n.d2211,d3210:n.d3210,d3222:n.d3222,d4410:n.d4410,d4422:n.d4422,d5220:n.d5220,d5232:n.d5232,d5421:n.d5421,d5433:n.d5433,dedt:n.dedt,didt:n.didt,dmdt:n.dmdt,dnodt:n.dnodt,domdt:n.domdt,del1:n.del1,del2:n.del2,del3:n.del3,xfact:n.xfact,xlamo:n.xlamo,xli:n.xli,xni:n.xni});n.irez=Lr.irez,n.atime=Lr.atime,n.d2201=Lr.d2201,n.d2211=Lr.d2211,n.d3210=Lr.d3210,n.d3222=Lr.d3222,n.d4410=Lr.d4410,n.d4422=Lr.d4422,n.d5220=Lr.d5220,n.d5232=Lr.d5232,n.d5421=Lr.d5421,n.d5433=Lr.d5433,n.dedt=Lr.dedt,n.didt=Lr.didt,n.dmdt=Lr.dmdt,n.dnodt=Lr.dnodt,n.domdt=Lr.domdt,n.del1=Lr.del1,n.del2=Lr.del2,n.del3=Lr.del3,n.xfact=Lr.xfact,n.xlamo=Lr.xlamo,n.xli=Lr.xli,n.xni=Lr.xni}1!==n.isimp&&(m=n.cc1*n.cc1,n.d2=4*br*K*m,Q=n.d2*K*n.cc1/3,n.d3=(17*br+L)*Q,n.d4=.5*Q*br*K*(221*br+31*L)*n.cc1,n.t3cof=n.d2+2*m,n.t4cof=.25*(3*n.d3+n.cc1*(12*n.d2+10*m)),n.t5cof=.2*(3*n.d4+12*n.cc1*n.d3+6*n.d2*n.d2+15*m*(2*n.d2+m)))}p(n,0),n.init="n"}(g,{opsmode:"i",satn:g.satnum,epoch:g.jdsatepoch-2433281.5,xbstar:g.bstar,xecco:g.ecco,xargpo:g.argpo,xinclo:g.inclo,xmo:g.mo,xno:g.no,xnodeo:g.nodeo}),g}function g(r){var e=r.longitude,n=r.latitude,t=r.height,i=6378.137,a=(i-6356.7523142)/i,o=2*a-a*a,s=i/Math.sqrt(1-o*(Math.sin(n)*Math.sin(n)));return{x:(s+t)*Math.cos(n)*Math.cos(e),y:(s+t)*Math.cos(n)*Math.sin(e),z:(s*(1-o)+t)*Math.sin(n)}}function x(n,t){for(var i=6378.137,a=Math.sqrt(n.x*n.x+n.y*n.y),o=(i-6356.7523142)/i,s=2*o-o*o,c=Math.atan2(n.y,n.x)-t;c<-r;)c+=e;for(;c>r;)c-=e;for(var u,h=0,m=Math.atan2(n.z,Math.sqrt(n.x*n.x+n.y*n.y));h<20;)u=1/Math.sqrt(1-s*(Math.sin(m)*Math.sin(m))),m=Math.atan2(n.z+i*u*s*Math.sin(m),a),h+=1;return{longitude:c,latitude:m,height:a/Math.cos(m)-i*u}}function y(r,e){return{x:r.x*Math.cos(e)-r.y*Math.sin(e),y:r.x*Math.sin(e)+r.y*Math.cos(e),z:r.z}}function v(r,e){return{x:r.x*Math.cos(e)+r.y*Math.sin(e),y:r.x*-Math.sin(e)+r.y*Math.cos(e),z:r.z}}function b(e,n){var t,i,a,o,s,c;return i=(t=function(r,e){var n=r.longitude,t=r.latitude,i=g(r),a=e.x-i.x,o=e.y-i.y,s=e.z-i.z;return{topS:Math.sin(t)*Math.cos(n)*a+Math.sin(t)*Math.sin(n)*o-Math.cos(t)*s,topE:-Math.sin(n)*a+Math.cos(n)*o,topZ:Math.cos(t)*Math.cos(n)*a+Math.cos(t)*Math.sin(n)*o+Math.sin(t)*s}}(e,n)).topS,a=t.topE,o=t.topZ,s=Math.sqrt(i*i+a*a+o*o),c=Math.asin(o/s),{azimuth:Math.atan2(-a,i)+r,elevation:c,rangeSat:s}}var w={JMod:2400000.5,J2000:2451545,J1900:2415020,B1900:2415020.3135,B1950:2433282.4235,JulianYear:365.25,JulianCentury:36525,BesselianYear:365.2421988,AU:149597870};function T(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}w.EclCoord=function(r,e,n){if(isNaN(r)||isNaN(e))throw Error("Invalid EclCoord object: ("+r+", "+e+")");this.lat=r,this.lng=e,void 0!==n&&(this.h=n)},w.EclCoord.prototype={toWgs84String:function(){return w.Math.formatNum(180*this.lat/Math.PI)+", "+w.Math.formatNum(180*-this.lng/Math.PI)}},w.EclCoord.fromWgs84=function(r,e,n){return new w.EclCoord(r*Math.PI/180,-e*Math.PI/180,n)},w.EqCoord=function(r,e){if(isNaN(r)||isNaN(e))throw Error("Invalid EqCoord object: ("+r+", "+e+")");this.ra=r,this.dec=e},w.EqCoord.prototype={toString:function(){return"ra:"+w.Math.formatNum(180*this.ra/Math.PI)+", dec:"+w.Math.formatNum(180*this.dec/Math.PI)}},w.HzCoord=function(r,e){if(isNaN(r)||isNaN(e))throw Error("Invalid HzCoord object: ("+r+", "+e+")");this.az=r,this.alt=e},w.HzCoord.prototype={toString:function(){return"azi:"+w.Math.formatNum(180*this.az/Math.PI)+", alt:"+w.Math.formatNum(180*this.alt/Math.PI)}},w.Coord={dmsToDeg:function(r,e,n,t){return t=(60*(60*e+n)+t)/3600,r?-t:t},calcAngle:function(r,e,n,t){return w.Coord.dmsToDeg(r,e,n,t)*Math.PI/180},calcRA:function(r,e,n){return w.Coord.dmsToDeg(!1,r,e,n)%24*15*Math.PI/180},secondsToHMSStr:function(r){var e=Math.floor(r/86400);r=w.Math.pMod(r,86400);var n=Math.floor(r/3600)%24,t=Math.floor(r/60)%60;return(0!==e?e+"d ":"")+(10>n?"0":"")+n+":"+(10>t?"0":"")+t+":"+(10>(r=Math.floor(r%60))?"0":"")+r},secondsToHMStr:function(r){var e=Math.floor(r/86400);r=w.Math.pMod(r,86400);var n=Math.floor(r/3600)%24;return(0!==e?e+"d ":"")+(10>n?"0":"")+n+":"+(10>(r=Math.floor(r/60)%60)?"0":"")+r},eqToEcl:function(r,e){var n=Math.sin(r.ra),t=Math.sin(r.dec),i=Math.cos(r.dec),a=Math.sin(e);return e=Math.cos(e),new w.EclCoord(Math.atan2(n*e+t/i*a,Math.cos(r.ra)),Math.asin(t*e-i*a*n))},eclToEq:function(r,e){var n=Math.sin(r.lat),t=Math.sin(r.lng),i=Math.cos(r.lng),a=Math.sin(e);return e=Math.cos(e),0>(r=Math.atan2(n*e-t/i*a,Math.cos(r.lat)))&&(r+=2*Math.PI),new w.EqCoord(r,Math.asin(t*e+i*a*n))},eqToHz:function(r,e,n){n=n-e.lng-r.ra;var t=Math.cos(n),i=Math.sin(e.lat);e=Math.cos(e.lat);var a=Math.sin(r.dec);return r=Math.cos(r.dec),new w.HzCoord(Math.atan2(Math.sin(n),t*i-a/r*e),Math.asin(i*a+e*r*t))}},w.DeltaT={jdToJde:function(r,e){return e||(e=w.DeltaT.estimate(r)),r+e/86400},jdeToJd:function(r,e){return e||(e=w.DeltaT.estimate(r)),r-e/86400},decimalYear:function(r){return(r=w.JulianDay.jdToCalendar(r)).y+(r.m-.5)/12},estimate:function(r){var e=w.DeltaT.decimalYear(r);return r=Math.pow,-500>e?32*r((e-1820)/100,2)-20:500>e?10583.6-1014.41*(e/=100)+33.78311*r(e,2)-5.952053*r(e,3)-.1798452*r(e,4)+.022174192*r(e,5)+.0090316521*r(e,6):1600>e?1574.2-556.01*(e=(e-1e3)/100)+71.23472*r(e,2)+.319781*r(e,3)-.8503463*r(e,4)-.005050998*r(e,5)+.0083572073*r(e,6):1700>e?120-.9808*(e-=1600)-.01532*r(e,2)+r(e,3)/7129:1800>e?8.83+.1603*(e-=1700)-.0059285*r(e,2)+13336e-8*r(e,3)-r(e,4)/1174e3:1860>e?13.72-.332447*(e-=1800)+.0068612*r(e,2)+.0041116*r(e,3)-37436e-8*r(e,4)+121272e-10*r(e,5)-1.699e-7*r(e,6)+8.75e-10*r(e,7):1900>e?7.62+.5737*(e-=1860)-.251754*r(e,2)+.01680668*r(e,3)-.0004473624*r(e,4)+r(e,5)/233174:1920>e?1.494119*(e-=1900)-2.79-.0598939*r(e,2)+.0061966*r(e,3)-197e-6*r(e,4):1941>e?21.2+.84493*(e-=1920)-.0761*r(e,2)+.0020936*r(e,3):1961>e?29.07+.407*(e-=1950)-r(e,2)/233+r(e,3)/2547:1986>e?45.45+1.067*(e-=1975)-r(e,2)/260-r(e,3)/718:2005>e?63.86+.3345*(e-=2e3)-.060374*r(e,2)+.0017275*r(e,3)+651814e-9*r(e,4)+2373599e-11*r(e,5):2050>e?62.92+.32217*(e-=2e3)+.005589*r(e,2):2150>e?32*r((e-1820)/100,2)-20-.5628*(2150-e):32*r((e-1820)/100,2)-20}},w.Globe={Er:6378.14,Fl:1/298.257,parallaxConstants:function(r,e){e||(e=0);var n=1-w.Globe.Fl;return e=.001*e/w.Globe.Er,{rhoslat:Math.sin(Math.atan(n*Math.tan(r)))*n+e*Math.sin(r),rhoclat:Math.cos(Math.atan(n*Math.tan(r)))+e*Math.cos(r)}}},w.Interp={newLen3:function(r,e,n){if(3!=n.length)throw"Error not 3";if(e==r)throw"Error no x range";var t=n[1]-n[0],i=n[2]-n[1];return{x1:r,x3:e,y:n,a:t,b:i,c:i-t,abSum:t+i,xSum:e+r,xDiff:e-r}},interpolateX:function(r,e){return w.Interp.interpolateN(r,(2*e-r.xSum)/r.xDiff)},interpolateN:function(r,e){return r.y[1]+.5*e*(r.abSum+e*r.c)}},w.JulianDay=function(r,e){r instanceof Date&&(r=w.JulianDay.dateToJD(r)),this.jd=r,this.deltaT=e||w.DeltaT.estimate(this.jd),this.jde=w.DeltaT.jdToJde(this.jd,this.deltaT)},w.JulianDay.prototype={toCalendar:function(){return w.JulianDay.jdToCalendar(this.jd)},toDate:function(){return w.JulianDay.jdToDate(this.jd)},jdJ2000Century:function(){return(this.jd-w.J2000)/w.JulianCentury},jdeJ2000Century:function(){return(this.jde-w.J2000)/w.JulianCentury},startOfDay:function(){return new w.JulianDay(Math.floor(this.jde-.5)+.5,this.deltaT)}},w.JulianDay.gregorianTimeStart=Date.UTC(1582,9,4),w.JulianDay.jdFromGregorian=function(r,e,n){return new w.JulianDay(w.JulianDay.jdFromGregorian(r,e,n))},w.JulianDay.jdFromJulian=function(r,e,n){return new w.JulianDay(w.JulianDay.calendarJulianToJD(r,e,n))},w.JulianDay.jdFromJDE=function(r){var e=w.DeltaT.estimate(r);return r=w.DeltaT.jdeToJd(r,e),new w.JulianDay(r,e)},w.JulianDay.dateToJD=function(r){var e=r.getUTCDate()+w.JulianDay.secondsFromHMS(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds())/86400;return r.getTime()<w.JulianDay.gregorianTimeStart?w.JulianDay.calendarJulianToJD(r.getUTCFullYear(),r.getUTCMonth()+1,e):w.JulianDay.calendarGregorianToJD(r.getUTCFullYear(),r.getUTCMonth()+1,e)},w.JulianDay.calendarGregorianToJD=function(r,e,n){1!=e&&2!=e||(r--,e+=12);var t=Math.floor(r/100);return Math.floor(36525*(r+4716)/100)+Math.floor(306*(e+1)/10)+(2-t+Math.floor(t/4))+n-1524.5},w.JulianDay.calendarJulianToJD=function(r,e,n){return 1!=e&&2!=e||(r--,e+=12),Math.floor(36525*(r+4716)/100)+Math.floor(306*(e+1)/10)+n-1524.5},w.JulianDay.secondsFromHMS=function(r,e,n){return 3600*r+60*e+n},w.JulianDay.jdToDate=function(r){var e=w.JulianDay.jdToCalendar(r);return r=w.Math.modF(r+.5)[1],r=Math.round(86400*r),new Date(Date.UTC(e.y,e.m-1,Math.floor(e.d),Math.floor(r/3600)%24,Math.floor(r/60)%60,Math.floor(r%60)))},w.JulianDay.jdToCalendar=function(r){var e=(r=w.Math.modF(r+.5))[0],n=e;2299151<=e&&(n=e+1+(n=Math.floor((100*e-186721625)/3652425))-Math.floor(n/4));var t=n+1524;e=Math.floor((100*t-12210)/36525);var i=Math.floor(36525*e/100);return n=Math.floor(1e4*(t-i)/306001),r=t-i-Math.floor(306001*n/1e4)+r[1],{y:1==(n=14==n||15==n?n-13:n-1)||2==n?Math.floor(e)-4715:Math.floor(e)-4716,m:n,d:r}},w.JulianDay.leapYearGregorian=function(r){return 0==r%4&&0!=r%100||0==r%400},w.JulianDay.dayOfYear=function(r,e,n,t){return r=2,t&&r--,w.JulianDay._wholeMonths(e,r)+n},w.JulianDay._wholeMonths=function(r,e){return Math.round(275*r/9-(r+9)/12*e-30)},w.Math={pMod:function(r,e){return 0>(r%=e)&&(r+=e),r},modF:function(r){return 0>r?(r=-r,[-Math.floor(r),-r%1]):[Math.floor(r),r%1]},horner:function(r,e){var n=e.length-1;if(0>=n)throw"empty array not supported";for(var t=e[n];0<n;)t=t*r+e[--n];return t},formatNum:function(r,e){return e=Math.pow(10,4|e),Math.round(r*e)/e}},w.Moon={parallax:function(r){return Math.asin(6378.14/r)},apparentEquatorial:function(r){var e=w.Moon.geocentricPosition(r),n=w.Nutation.nutation(r);return r=w.Nutation.meanObliquityLaskar(r)+n.deltaobliquity,{eq:w.Coord.eclToEq(new w.EclCoord(e.lng+n.deltalng,e.lat),r),delta:e.delta}},apparentTopocentric:function(r,e,n){var t=w.Moon.apparentEquatorial(r),i=w.Globe.parallaxConstants(e.lat,e.h),a=w.Moon.parallax(t.delta);return n||(n=w.Sidereal.apparentInRa(r)),{eq:w.Parallax.topocentric(t.eq,a,i.rhoslat,i.rhoclat,e.lng,n),delta:t.delta}},topocentricPosition:function(r,e,n){var t=w.Sidereal.apparentInRa(r);r=w.Moon.apparentTopocentric(r,e,t);var i=w.Coord.eqToHz(r.eq,e,t);return!0===n&&(i.alt+=w.Refraction.bennett2(i.alt)),e=w.Moon.parallacticAngle(e.lat,t-(e.lng+r.eq.ra),r.eq.dec),{hz:i,eq:r.eq,delta:r.delta,q:e}},approxTransit:function(r,e){return r=r.startOfDay(),w.Rise.approxTransit(e,w.Sidereal.apparent0UT(r),w.Moon.apparentTopocentric(r,e).eq)},approxTimes:function(r,e){r=r.startOfDay();var n=w.Moon.apparentTopocentric(r,e),t=w.Moon.parallax(n.delta);return t=w.Rise.stdh0Lunar(t),r=w.Sidereal.apparent0UT(r),w.Rise.approxTimes(e,t,r,n.eq)},times:function(r,e){r=r.startOfDay();var n=w.Moon.apparentTopocentric(new w.JulianDay(r.jd-1,r.deltaT),e),t=w.Moon.apparentTopocentric(r,e),i=w.Moon.apparentTopocentric(new w.JulianDay(r.jd+1,r.deltaT),e),a=w.Moon.parallax(t.delta);a=w.Rise.stdh0Lunar(a);var o=w.Sidereal.apparent0UT(r);return w.Rise.times(e,r.deltaT,a,o,[n.eq,t.eq,i.eq])},parallacticAngle:function(r,e,n){return Math.atan2(Math.sin(e),Math.tan(r)*Math.cos(n)-Math.sin(n)*Math.cos(e))},geocentricPosition:function(r){var e=Math.PI/180,n=r.jdeJ2000Century();r=w.Math.pMod(w.Math.horner(n,[218.3164477*e,481267.88123421*e,-.0015786*e,e/538841,-e/65194e3]),2*Math.PI);var t=w.Math.pMod(w.Math.horner(n,[297.8501921*e,445267.1114034*e,-.0018819*e,e/545868,-e/113065e3]),2*Math.PI),i=w.Math.pMod(w.Math.horner(n,[357.5291092*e,35999.0502909*e,-1535e-7*e,e/2449e4]),2*Math.PI),a=w.Math.pMod(w.Math.horner(n,[134.9633964*e,477198.8675055*e,.0087414*e,e/69699,-e/14712e3]),2*Math.PI),o=w.Math.pMod(w.Math.horner(n,[93.272095*e,483202.0175233*e,-.0036539*e,-e/3526e3,e/86331e4]),2*Math.PI),s=119.75*e+131.849*e*n,c=53.09*e+479264.29*e*n,u=313.45*e+481266.484*e*n,h=(n=w.Math.horner(n,[1,-.002516,-74e-7]))*n;c=3958*Math.sin(s)+1962*Math.sin(r-o)+318*Math.sin(c);var m=0;for(s=-2235*Math.sin(r)+382*Math.sin(u)+175*Math.sin(s-o)+175*Math.sin(s+o)+127*Math.sin(r-a)-115*Math.sin(r+a),u=0;u<w.Moon.ta.length;u++){var f=w.Moon.ta[u],l=t*f[0]+i*f[1]+a*f[2]+o*f[3],d=Math.sin(l);switch(l=Math.cos(l),f[1]){case 0:c+=f[4]*d,m+=f[5]*l;break;case 1:case-1:c+=f[4]*d*n,m+=f[5]*l*n;break;case 2:case-2:c+=f[4]*d*h,m+=f[5]*l*h;break;default:throw"error"}}for(u=0;u<w.Moon.tb.length;u++)switch(f=w.Moon.tb[u],d=Math.sin(t*f[0]+i*f[1]+a*f[2]+o*f[3]),f[1]){case 0:s+=f[4]*d;break;case 1:case-1:s+=f[4]*d*n;break;case 2:case-2:s+=f[4]*d*h;break;default:throw"error"}return{lng:w.Math.pMod(r,2*Math.PI)+1e-6*c*e,lat:1e-6*s*e,delta:385000.56+.001*m}},ta:[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]],tb:[[0,0,0,1,5128122],[0,0,1,1,280602],[0,0,1,-1,277693],[2,0,0,-1,173237],[2,0,-1,1,55413],[2,0,-1,-1,46271],[2,0,0,1,32573],[0,0,2,1,17198],[2,0,1,-1,9266],[0,0,2,-1,8822],[2,-1,0,-1,8216],[2,0,-2,-1,4324],[2,0,1,1,4200],[2,1,0,-1,-3359],[2,-1,-1,1,2463],[2,-1,0,1,2211],[2,-1,-1,-1,2065],[0,1,-1,-1,-1870],[4,0,-1,-1,1828],[0,1,0,1,-1794],[0,0,0,3,-1749],[0,1,-1,1,-1565],[1,0,0,1,-1491],[0,1,1,1,-1475],[0,1,1,-1,-1410],[0,1,0,-1,-1344],[1,0,0,-1,-1335],[0,0,3,1,1107],[4,0,0,-1,1021],[4,0,-1,1,833],[0,0,1,-3,777],[4,0,-2,1,671],[2,0,0,-3,607],[2,0,2,-1,596],[2,-1,1,-1,491],[2,0,-2,1,-451],[0,0,3,-1,439],[2,0,2,1,422],[2,0,-3,-1,421],[2,1,-1,1,-366],[2,1,0,1,-351],[4,0,0,1,331],[2,-1,1,1,315],[2,-2,0,-1,302],[0,0,1,3,-283],[2,1,1,-1,-229],[1,1,0,-1,223],[1,1,0,1,223],[0,1,-2,-1,-220],[2,1,-1,-1,-220],[1,0,1,1,-185],[2,-1,-2,-1,181],[0,1,2,1,-177],[4,0,-2,-1,176],[4,-1,-1,-1,166],[1,0,1,-1,-164],[4,0,1,-1,132],[1,0,-1,-1,-119],[4,-1,0,-1,115],[2,-2,0,1,107]]},w.MoonIllum={phaseAngleEq:function(r,e,n,t){return r=w.MoonIllum._coselong(r,n),Math.atan2(t*Math.sin(Math.acos(r)),e-t*r)},phaseAngleEq2:function(r,e){return Math.acos(-w.MoonIllum._coselong(r,e))},illuminated:function(r){return(1+Math.cos(r))/2},positionAngle:function(r,e){var n=Math.cos(e.dec);return Math.atan2(n*Math.sin(e.ra-r.ra),Math.sin(e.dec)*Math.cos(r.dec)-n*Math.sin(r.dec)*Math.cos(e.ra-r.ra))},_coselong:function(r,e){return Math.sin(e.dec)*Math.sin(r.dec)+Math.cos(e.dec)*Math.cos(r.dec)*Math.cos(e.ra-r.ra)}},w.Nutation={nutation:function(r){r=r.jdeJ2000Century();for(var e=w.Math.horner(r,[297.85036,445267.11148,-.0019142,1/189474])*Math.PI/180,n=w.Math.horner(r,[357.52772,35999.05034,-1603e-7,-1/3e5])*Math.PI/180,t=w.Math.horner(r,[134.96298,477198.867398,.0086972,1/5620])*Math.PI/180,i=w.Math.horner(r,[93.27191,483202.017538,-.0036825,1/327270])*Math.PI/180,a=w.Math.horner(r,[125.04452,-1934.136261,.0020708,1/45e4])*Math.PI/180,o=0,s=0,c=w.Nutation.table22A.length-1;0<=c;c--){var u=w.Nutation.table22A[c],h=u[0]*e+u[1]*n+u[2]*t+u[3]*i+u[4]*a,m=Math.cos(h);o+=Math.sin(h)*(u[5]+u[6]*r),s+=m*(u[7]+u[8]*r)}return{deltalng:1e-4/3600*o*(Math.PI/180),deltaobliquity:1e-4/3600*s*(Math.PI/180)}},nutationInRA:function(r){var e=w.Nutation.meanObliquityLaskar(r);return(r=w.Nutation.nutation(r)).deltalng*Math.cos(e+r.deltaobliquity)},trueObliquity:function(r){return w.Nutation.meanObliquityLaskar(r)+(r=w.Nutation.nutation(r)).deltaobliquity},meanObliquity:function(r){return w.Math.horner(r.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-46.815/3600*(Math.PI/180),-59e-5/3600*(Math.PI/180),.001813/3600*(Math.PI/180)])},meanObliquityLaskar:function(r){return w.Math.horner(.01*r.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-4680.93/3600*(Math.PI/180),-1.55/3600*(Math.PI/180),1999.25/3600*(Math.PI/180),-51.38/3600*(Math.PI/180),-249.67/3600*(Math.PI/180),-39.05/3600*(Math.PI/180),7.12/3600*(Math.PI/180),27.87/3600*(Math.PI/180),5.79/3600*(Math.PI/180),2.45/3600*(Math.PI/180)])},table22A:[[0,0,0,0,1,-171996,-174.2,92025,8.9],[-2,0,0,2,2,-13187,-1.6,5736,-3.1],[0,0,0,2,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[0,0,1,0,0,712,.1,-7,0],[-2,1,0,2,2,-517,1.2,224,-.6],[0,0,0,2,1,-386,-.4,200,0],[0,0,1,2,2,-301,0,129,-.1],[-2,-1,0,2,2,217,-.5,-95,.3],[-2,0,1,0,0,-158,0,0,0],[-2,0,0,2,1,129,.1,-70,0],[0,0,-1,2,2,123,0,-53,0],[2,0,0,0,0,63,0,0,0],[0,0,1,0,1,63,.1,-33,0],[2,0,-1,2,2,-59,0,26,0],[0,0,-1,0,1,-58,-.1,32,0],[0,0,1,2,1,-51,0,27,0],[-2,0,2,0,0,48,0,0,0],[0,0,-2,2,1,46,0,-24,0],[2,0,0,2,2,-38,0,16,0],[0,0,2,2,2,-31,0,13,0],[0,0,2,0,0,29,0,0,0],[-2,0,1,2,2,29,0,-12,0],[0,0,0,2,0,26,0,0,0],[-2,0,0,2,0,-22,0,0,0],[0,0,-1,2,1,21,0,-10,0],[0,2,0,0,0,17,-.1,0,0],[2,0,-1,0,1,16,0,-8,0],[-2,2,0,2,2,-16,.1,7,0],[0,1,0,0,1,-15,0,9,0],[-2,0,1,0,1,-13,0,7,0],[0,-1,0,0,1,-12,0,6,0],[0,0,2,-2,0,11,0,0,0],[2,0,-1,2,1,-10,0,5,0],[2,0,1,2,2,-8,0,3,0],[0,1,0,2,2,7,0,-3,0],[-2,1,1,0,0,-7,0,0,0],[0,-1,0,2,2,-7,0,3,0],[2,0,0,2,1,-7,0,3,0],[2,0,1,0,0,6,0,0,0],[-2,0,2,2,2,6,0,-3,0],[-2,0,1,2,1,6,0,-3,0],[2,0,-2,0,1,-6,0,3,0],[2,0,0,0,1,-6,0,3,0],[0,-1,1,0,0,5,0,0,0],[-2,-1,0,2,1,-5,0,3,0],[-2,0,0,0,1,-5,0,3,0],[0,0,2,2,1,-5,0,3,0],[-2,0,2,0,1,4,0,0,0],[-2,1,0,2,1,4,0,0,0],[0,0,1,-2,0,4,0,0,0],[-1,0,1,0,0,-4,0,0,0],[-2,1,0,0,0,-4,0,0,0],[1,0,0,0,0,-4,0,0,0],[0,0,1,2,0,3,0,0,0],[0,0,-2,2,2,-3,0,0,0],[-1,-1,1,0,0,-3,0,0,0],[0,1,1,0,0,-3,0,0,0],[0,-1,1,2,2,-3,0,0,0],[2,-1,-1,2,2,-3,0,0,0],[0,0,3,2,2,-3,0,0,0],[2,-1,0,2,2,-3,0,0,0]]},w.Parallax={earthsunParallax:8.794/60/60*Math.PI/180,horizontal:function(r){return 8.794/60/60*Math.PI/180/r},topocentric:function(r,e,n,t,i,a){i=w.Math.pMod(a-i-r.ra,2*Math.PI),e=Math.sin(e),a=Math.cos(i);var o=Math.cos(r.dec);return i=Math.atan2(-t*e*Math.sin(i),o-t*e*a),new w.EqCoord(r.ra+i,Math.atan2((Math.sin(r.dec)-n*e)*Math.cos(i),o-t*e*a))},topocentric2:function(r,e,n,t,i,a){return i=w.Math.pMod(a-i-r.ra,2*Math.PI),a=Math.cos(r.dec),new w.EqCoord(r.ra+-e*t*Math.sin(i)/a,r.dec+-e*(n*a-t*Math.cos(i)*Math.sin(r.dec)))}},w.Refraction={bennett:function(r){0>r&&(r=0);var e=Math.PI/180;return e/60/Math.tan(r+7.31*e*e/(r+4.4*e))},bennett2:function(r){var e=Math.PI/180,n=60/e,t=.06/n;return n=14.7*n*e,e*=13,(r=w.Refraction.bennett(r))-t*Math.sin(n*r+e)},saemundsson:function(r){var e=Math.PI/180;return 1.02*e/60/Math.tan(r+10.3*e*e/(r+5.11*e))}},w.Rise={meanRefraction:.5667*Math.PI/180,stdh0Stellar:-.5667*Math.PI/180,stdh0Solar:-.8333*Math.PI/180,stdh0LunarMean:.125*Math.PI/180,stdh0Lunar:function(r){return.7275*r-w.Rise.meanRefraction},circumpolar:function(r,e,n){return-1>(r=(Math.sin(e)-Math.sin(r)*Math.sin(n))/(Math.cos(r)*Math.cos(n)))||1<r?null:r},approxTransit:function(r,e,n){return 43200*(n.ra+r.lng)/Math.PI-e},approxTimes:function(r,e,n,t){return(e=w.Rise.circumpolar(r.lat,e,t.dec))?(e=43200*Math.acos(e)/Math.PI,r=43200*(t.ra+r.lng)/Math.PI-n,{transit:w.Math.pMod(r,86400),transitd:Math.floor(r/86400),rise:w.Math.pMod(r-e,86400),rised:Math.floor((r-e)/86400),set:w.Math.pMod(r+e,86400),setd:Math.floor((r+e)/86400)}):null},times:function(r,e,n,t,i){function a(i){var a=w.Math.pMod(t+360.985647*i/360,86400),o=i+e,u=w.Interp.interpolateX(s,o);return o=w.Interp.interpolateX(c,o),a=a*Math.PI/43200-(r.lng+u),u=Math.cos(o),w.Math.pMod(i+(h*Math.sin(o)+m*u*Math.cos(a)-n)/(u*m*Math.sin(a))*43200/Math.PI,86400)}var o=w.Rise.approxTimes(r,n,t,i[1]);if(!o)return null;var s=w.Interp.newLen3(-86400,86400,[i[0].ra,i[1].ra,i[2].ra]),c=w.Interp.newLen3(-86400,86400,[i[0].dec,i[1].dec,i[2].dec]);i=t+360.985647*o.transit/360;var u=w.Interp.interpolateX(s,o.transit+e);o.transit=w.Math.pMod(o.transit-(i-43200*(r.lng+u)/Math.PI),86400);var h=Math.sin(r.lat),m=Math.cos(r.lat);return o.rise=a(o.rise),o.set=a(o.set),o}},w.Sidereal={iau82:[24110.54841,8640184.812866,.093104,62e-7],jdToCFrac:function(r){return r=w.Math.modF(r.jd+.5),[new w.JulianDay(r[0]-.5).jdJ2000Century(),r[1]]},mean:function(r){return w.Math.pMod(w.Sidereal._mean(r),86400)},_mean:function(r){return(r=w.Sidereal._mean0UT(r)).s+86636.55536784*r.f},_meanInRA:function(r){return(r=w.Sidereal._mean0UT(r)).s*Math.PI/43200+2.0054758187*r.f*Math.PI},mean0UT:function(r){return r=w.Sidereal._mean0UT(r),w.Math.pMod(r.s,86400)},_mean0UT:function(r){return r=w.Sidereal.jdToCFrac(r),{s:w.Math.horner(r[0],w.Sidereal.iau82),f:r[1]}},apparentInRa:function(r){var e=w.Sidereal._meanInRA(r);return r=w.Nutation.nutationInRA(r),w.Math.pMod(e+r,2*Math.PI)},apparent:function(r){var e=w.Sidereal._mean(r);return r=648e3*w.Nutation.nutationInRA(r)/Math.PI/15,w.Math.pMod(e+r,86400)},apparentLocal:function(r,e){return r=w.Sidereal.apparent(r),w.Math.pMod(r-43200*e/Math.PI,86400)},apparent0UT:function(r){var e=w.Math.modF(r.jd+.5);return r=w.Math.modF(r.jde+.5),e=w.Math.horner((e[0]-.5-w.J2000)/36525,w.Sidereal.iau82)+86636.55536784*e[1],r=648e3*w.Nutation.nutationInRA(new w.JulianDay(r[0]))/Math.PI/15,w.Math.pMod(e+r,86400)}},w.Solar={earthsunDelta:149597870,apparentEquatorial:function(r){var e=r.jdJ2000Century(),n=w.Solar.node(e);return e=w.Solar.apparentLongitude(e,n),r=w.Nutation.meanObliquityLaskar(r)+.00256*Math.PI/180*Math.cos(n),n=Math.sin(e),new w.EqCoord(Math.atan2(Math.cos(r)*n,Math.cos(e)),Math.asin(Math.sin(r)*n))},apparentTopocentric:function(r,e,n){var t=w.Solar.apparentEquatorial(r),i=w.Globe.parallaxConstants(e.lat,e.h);return n||(n=w.Sidereal.apparentInRa(r)),w.Parallax.topocentric2(t,w.Parallax.earthsunParallax,i.rhoslat,i.rhoclat,e.lng,n)},topocentricPosition:function(r,e,n){var t=w.Sidereal.apparentInRa(r);return r=w.Solar.apparentTopocentric(r,e,t),e=w.Coord.eqToHz(r,e,t),!0===n&&(e.alt+=w.Refraction.bennett2(e.alt)),{hz:e,eq:r}},approxTransit:function(r,e){return r=r.startOfDay(),w.Rise.approxTransit(e,w.Sidereal.apparent0UT(r),w.Solar.apparentTopocentric(r,e))},approxTimes:function(r,e){var n=r.startOfDay();r=w.Solar.apparentTopocentric(n,e);var t=w.Rise.stdh0Solar;return n=w.Sidereal.apparent0UT(n),w.Rise.approxTimes(e,t,n,r)},times:function(r,e){r=r.startOfDay();var n=w.Solar.apparentTopocentric(new w.JulianDay(r.jd-1,r.deltaT),e),t=w.Solar.apparentTopocentric(r,e),i=w.Solar.apparentTopocentric(new w.JulianDay(r.jd+1,r.deltaT),e),a=w.Rise.stdh0Solar,o=w.Sidereal.apparent0UT(r);return w.Rise.times(e,r.deltaT,a,o,[n,t,i])},meanAnomaly:function(r){return w.Math.horner(r,[357.52911,35999.05029,-1537e-7])*Math.PI/180},trueLongitude:function(r){var e=w.Math.horner(r,[280.46646,36000.76983,3032e-7])*Math.PI/180,n=w.Solar.meanAnomaly(r);return r=(w.Math.horner(r,[1.914602,-.004817,-14e-6])*Math.sin(n)+(.019993-101e-6*r)*Math.sin(2*n)+289e-6*Math.sin(3*n))*Math.PI/180,{s:w.Math.pMod(e+r,2*Math.PI),v:w.Math.pMod(n+r,2*Math.PI)}},apparentLongitude:function(r,e){return e||(e=w.Solar.node(r)),w.Solar.trueLongitude(r).s-.00569*Math.PI/180-.00478*Math.PI/180*Math.sin(e)},node:function(r){return(125.04-1934.136*r)*Math.PI/180}},w.Solistice={march:function(r){return 1e3>r?w.Solistice._eq(r,w.Solistice.mc0):w.Solistice._eq(r-2e3,w.Solistice.mc2)},june:function(r){return 1e3>r?w.Solistice._eq(r,w.Solistice.jc0):w.Solistice._eq(r-2e3,w.Solistice.jc2)},september:function(r){return 1e3>r?w.Solistice._eq(r,w.Solistice.sc0):w.Solistice._eq(r-2e3,w.Solistice.sc2)},december:function(r){return 1e3>r?w.Solistice._eq(r,w.Solistice.dc0):w.Solistice._eq(r-2e3,w.Solistice.dc2)},_eq:function(r,e){e=((r=w.Math.horner(.001*r,e))-w.J2000)/w.JulianCentury;var n=35999.373*Math.PI/180*e-2.47*Math.PI/180;n=1+.0334*Math.cos(n)+7e-4*Math.cos(2*n);for(var t=0,i=this.terms.length-1;0<=i;i--){var a=this.terms[i];t+=a[0]*Math.cos((a[1]+a[2]*e)*Math.PI/180)}return r+1e-5*t/n},mc0:[1721139.29189,365242.1374,.06134,.00111,-71e-5],jc0:[1721233.25401,365241.72562,-.05232,.00907,25e-5],sc0:[1721325.70455,365242.49558,-.11677,-.00297,74e-5],dc0:[1721414.39987,365242.88257,-.00769,-.00933,-6e-5],mc2:[2451623.80984,365242.37404,.05169,-.00411,-57e-5],jc2:[2451716.56767,365241.62603,.00325,.00888,-3e-4],sc2:[2451810.21715,365242.01767,-.11575,.00337,78e-5],dc2:[2451900.05952,365242.74049,-.06223,-.00823,32e-5],terms:[[485,324.96,1934.136],[203,337.23,32964.467],[199,342.08,20.186],[182,27.85,445267.112],[156,73.14,45036.886],[136,171.52,22518.443],[77,222.54,65928.934],[74,296.72,3034.906],[70,243.58,9037.513],[58,119.81,33718.147],[52,297.17,150.678],[50,21.02,2281.226],[45,247.54,29929.562],[44,325.15,31555.956],[29,60.93,4443.417],[18,155.12,67555.328],[17,288.79,4562.452],[16,198.04,62894.029],[14,199.76,31436.921],[12,95.39,14577.848],[12,287.11,31931.756],[12,320.81,34777.259],[9,227.73,1222.114],[8,15.45,16859.074]]};class z{static toJulian(r){return r.valueOf()/z.MILLISECONDS_IN_A_DAY-.5+z.J1970}static fromJulian(r){return new Date((r+.5-z.J1970)*z.MILLISECONDS_IN_A_DAY)}static toDays(r){return z.toJulian(r)-z.J2000}static rightAscension(r,e){return Math.atan2(Math.sin(r)*Math.cos(z.e)-Math.tan(e)*Math.sin(z.e),Math.cos(r))}static declination(r,e){return Math.asin(Math.sin(e)*Math.cos(z.e)+Math.cos(e)*Math.sin(z.e)*Math.sin(r))}static azimuth(r,e,n){return Math.atan2(Math.sin(r),Math.cos(r)*Math.sin(e)-Math.tan(n)*Math.cos(e))}static altitude(r,e,n){return Math.asin(Math.sin(e)*Math.sin(n)+Math.cos(e)*Math.cos(n)*Math.cos(r))}static siderealTime(r,e){return z.TAU/360*(280.16+360.9856235*r)-e}static astroRefraction(r){return r<0&&(r=0),2967e-7/Math.tan(r+.00312536/(r+.08901179))}static solarMeanAnomaly(r){return z.TAU/360*(357.5291+.98560028*r)}static eclipticLongitude(r){return r+z.TAU/360*(1.9148*Math.sin(r)+.02*Math.sin(2*r)+3e-4*Math.sin(3*r))+z.TAU/360*102.9372+z.TAU/2}static sunCoords(r){var e=z.solarMeanAnomaly(r),n=z.eclipticLongitude(e);return{dec:z.declination(n,0),ra:z.rightAscension(n,0)}}static julianCycle(r,e){return Math.round(r-z.J0-e/(2*z.TAU/2))}static approxTransit(r,e,n){return z.J0+(r+e)/(2*z.TAU/2)+n}static solarTransitJ(r,e,n){return z.J2000+r+.0053*Math.sin(e)-.0069*Math.sin(2*n)}static hourAngle(r,e,n){return Math.acos((Math.sin(r)-Math.sin(e)*Math.sin(n))/(Math.cos(e)*Math.cos(n)))}static getSetJ(r,e,n,t,i,a,o){var s=z.hourAngle(r,n,t),c=z.approxTransit(s,e,i);return z.solarTransitJ(c,a,o)}static moonCoords(r){var e=z.TAU/360*(218.316+13.176396*r),n=z.TAU/360*(134.963+13.064993*r),t=z.TAU/360*(93.272+13.22935*r),i=e+z.TAU/360*6.289*Math.sin(n),a=z.TAU/360*5.128*Math.sin(t),o=385001-20905*Math.cos(n);return{ra:z.rightAscension(i,a),dec:z.declination(i,a),dist:o}}static hoursLater(r,e){return new Date(r.valueOf()+e*z.MILLISECONDS_IN_A_DAY/24)}static getStarPosition(r,e,n,t){return z.lw=z.DEG2RAD*-n,z.phi=z.DEG2RAD*e,z.d=z.toDays(r),z.H=z.siderealTime(z.d,z.lw)-t.ra/12*Math.PI,z.h=z.altitude(z.H,z.phi,t.dec/180*Math.PI),z.h+=z.astroRefraction(z.h),{azimuth:z.azimuth(z.H,z.phi,t.dec/180*Math.PI),altitude:z.h,vmag:t.vmag,name:t.name,pname:t.pname,dist:t.dist}}static getSunPosition(r,e,n){var t=z.TAU/360*-n,i=z.TAU/360*e,a=z.toDays(r),o=z.sunCoords(a),s=z.siderealTime(a,t)-o.ra;return{azimuth:z.azimuth(s,i,o.dec),altitude:z.altitude(s,i,o.dec)}}static addTime(r,e,n){z.times.push([r,e,n])}static getTimes(r,e,n){var t,i,a,o,s,c=z.TAU/360*-n,u=z.TAU/360*e,h=z.toDays(r),m=z.julianCycle(h,c),f=z.approxTransit(0,c,m),l=z.solarMeanAnomaly(f),d=z.eclipticLongitude(l),p=z.declination(d,0),M=z.solarTransitJ(f,l,d),g={solarNoon:z.fromJulian(M),nadir:z.fromJulian(M-.5)};for(t=0,i=z.times.length;t<i;t+=1)a=z.times[t],s=M-((o=z.getSetJ(a[0]*z.TAU/360,c,u,p,m,l,d))-M),g[a[1]]=z.fromJulian(s),g[a[2]]=z.fromJulian(o);return g}static getMoonPosition(r,e,n){var t=z.TAU/360*-n,i=z.TAU/360*e,a=z.toDays(r),o=z.moonCoords(a),s=z.siderealTime(a,t)-o.ra,c=z.altitude(s,i,o.dec),u=Math.atan2(Math.sin(s),Math.tan(i)*Math.cos(o.dec)-Math.sin(o.dec)*Math.cos(s));return c+=z.astroRefraction(c),{azimuth:z.azimuth(s,i,o.dec),altitude:c,distance:o.dist,parallacticAngle:u}}static getMoonIllumination(r){var e=z.toDays(r||new Date),n=z.sunCoords(e),t=z.moonCoords(e),i=149598e3,a=Math.acos(Math.sin(n.dec)*Math.sin(t.dec)+Math.cos(n.dec)*Math.cos(t.dec)*Math.cos(n.ra-t.ra)),o=Math.atan2(i*Math.sin(a),t.dist-i*Math.cos(a)),s=Math.atan2(Math.cos(n.dec)*Math.sin(n.ra-t.ra),Math.sin(n.dec)*Math.cos(t.dec)-Math.cos(n.dec)*Math.sin(t.dec)*Math.cos(n.ra-t.ra));return{fraction:(1+Math.cos(o))/2,phase:.5+.5*o*(s<0?-1:1)/z.TAU/2,angle:s}}static getMoonTimes(r,e,n,t){var i=new Date(r);t?i.setUTCHours(0,0,0,0):i.setHours(0,0,0,0);for(var a,o,s,c,u,h,m,f,l,d,p,M,g,x=.133*z.TAU/360,y=z.getMoonPosition(i,e,n).altitude-x,v=1;v<=24&&(a=z.getMoonPosition(z.hoursLater(i,v),e,n).altitude-x,f=((u=(y+(o=z.getMoonPosition(z.hoursLater(i,v+1),e,n).altitude-x))/2-a)*(m=-(h=(o-y)/2)/(2*u))+h)*m+a,d=0,(l=h*h-4*u*a)>=0&&(p=m-(g=Math.sqrt(l)/(2*Math.abs(u))),M=m+g,Math.abs(p)<=1&&d++,Math.abs(M)<=1&&d++,p<-1&&(p=M)),1===d?y<0?s=v+p:c=v+p:2===d&&(s=v+(f<0?M:p),c=v+(f<0?p:M)),!s||!c);v+=2)y=o;var b={};return s&&(b.rise=z.hoursLater(i,s)),c&&(b.set=z.hoursLater(i,c)),s||c||(b[f>0?"alwaysUp":"alwaysDown"]=!0),b}}T(z,"MILLISECONDS_IN_A_DAY",864e5),T(z,"TAU",2*Math.PI),T(z,"J1970",2440588),T(z,"J2000",2451545),T(z,"J0",9e-4),T(z,"times",[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]]),T(z,"e",z.TAU/360*23.4397),T(z,"lw",void 0),T(z,"phi",void 0),T(z,"d",void 0),T(z,"H",void 0),T(z,"h",void 0),T(z,"DEG2RAD",z.TAU/360);var S,A,k,_,j,P,q,D,I,C,L,U,J,N,F,E,O,V,R,G,Y,B,H,X,Q,Z,W=Math.PI,$=2*W,K=$/360,rr=360/$,er=6371,nr=[],tr=[0],ir=[-1],ar=1e3,or=1,sr=!1,cr=1,ur=0,hr=1,mr=Date.now(),fr=90,lr=!1,dr=!1,pr=!1,Mr=!1,gr=!1,xr=!1,yr=!1,vr=!1,br=!1,wr=!1,Tr={},zr={},Sr={},Ar={lat:null,longitude:0,latitude:0,height:0};zr.defaultGd=Ar,zr.observerGd=Ar,onmessage=function(r){void 0===mr&&(mr=Date.now()),r.data.isSunlightView&&(yr=r.data.isSunlightView),r.data.satelliteSelected&&-1===(ir=r.data.satelliteSelected)[0]&&(gr=!0,0==br&&(br=!0)),r.data.isSlowCPUModeEnabled&&(or*=2),r.data.isLowPerf&&(vr=!0),r.data.fieldOfViewSetLength&&(j=r.data.fieldOfViewSetLength),"enable"===r.data.isShowSatOverfly&&(Mr=!0,fr=r.data.selectedSatFOV),"reset"===r.data.isShowSatOverfly&&(gr=!0,Mr=!1,0==br&&(br=!0)),"enable"===r.data.isShowFOVBubble&&(lr=!0),"reset"===r.data.isShowFOVBubble&&(pr=!0,lr=!1,0==br&&(br=!0)),"enable"===r.data.isShowSurvFence&&(dr=!0,0==br&&(br=!0)),"disable"===r.data.isShowSurvFence&&(dr=!1,0==br&&(br=!0)),r.data.multiSensor?(xr=!0,Sr=r.data.sensor,zr=r.data.sensor,ar=2e3,0==wr&&(wr=!0)):r.data.sensor&&(zr=r.data.sensor,r.data.setlatlong&&(r.data.resetObserverGd?(ar=1e3,zr.observerGd=Ar,Sr={},0==wr&&(wr=!0)):(ar=2e3,zr.observerGd={longitude:r.data.sensor.lon*K,latitude:r.data.sensor.lat*K,height:1*r.data.sensor.alt},0==wr&&(wr=!0))),xr=!1);var e=hr;switch(r.data.typ){case"offset":return ur=Number(r.data.dat.split(" ")[0]),hr=Number(r.data.dat.split(" ")[1]),0==e&&0==hr||(mr=Date.now()),void(cr=1);case"satdata":var n=JSON.parse(r.data.dat);P=n.length;for(var t,i=0,a=[],o={};i<P;)o={},t=null,n[i].static||n[i].missile||n[i].isRadarData?(delete(t=n[i]).id,a.push(o),nr.push(t),i++):(t=M(n[i].TLE1,n[i].TLE2),o.lowAlt=t.isimp,o.inclination=t.inclo,o.eccentricity=t.ecco,o.raan=t.nodeo,o.argPe=t.argpo,o.meanMotion=60*t.no*24/$,o.semiMajorAxis=Math.pow(8681663.653/o.meanMotion,2/3),o.semiMinorAxis=o.semiMajorAxis*Math.sqrt(1-Math.pow(o.eccentricity,2)),o.apogee=o.semiMajorAxis*(1+o.eccentricity)-er,t.apogee=o.apogee,o.perigee=o.semiMajorAxis*(1-o.eccentricity)-er,o.period=1440/o.meanMotion,a.push(o),delete t.id,nr.push(t),i++);S=new Float32Array(3*P),A=new Float32Array(3*P),k=new Int8Array(P),_=new Int8Array(P),postMessage({extraData:JSON.stringify(a)}),n=null;break;case"satEdit":nr[r.data.id]=M(r.data.TLE1,r.data.TLE2),t=nr[r.data.id],a=[],(o={}).inclination=t.inclo,o.eccentricity=t.ecco,o.raan=t.nodeo,o.argPe=t.argpo,o.meanMotion=60*t.no*24/(2*W),o.semiMajorAxis=Math.pow(8681663.653/o.meanMotion,2/3),o.semiMinorAxis=o.semiMajorAxis*Math.sqrt(1-Math.pow(o.eccentricity,2)),o.apogee=o.semiMajorAxis*(1+o.eccentricity)-er,o.perigee=o.semiMajorAxis*(1-o.eccentricity)-er,o.period=1440/o.meanMotion,o.TLE1=r.data.TLE1,o.TLE2=r.data.TLE2,a.push(o),postMessage({extraUpdate:!0,extraData:JSON.stringify(a),satId:r.data.id});break;case"newMissile":nr[r.data.id]=r.data}sr||(P=-1,_r())};var kr=(r,e,n,t,i,a)=>((q={}).latitude=t,q.longitude=i,q.height=a,D=g(q),I=D.x,C=D.y,L=D.z,U=Math.sin(t),J=Math.sin(i),N=Math.cos(t),F=Math.cos(i),E=K*r,O=K*e,V=-n*Math.cos(O)*Math.cos(E),R=n*Math.cos(O)*Math.sin(E),G=n*Math.sin(O),{x:U*F*V+-J*R+N*F*G+I,y:U*J*V+F*R+N*J*G+C,z:-N*V+U*G+L}),_r=()=>{sr=!0;var r=Pr(),e=jr(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds()),n=d(e+=1.15741e-8*r.getUTCMilliseconds()),t=!1;if(yr&&!xr){var i=new w.JulianDay(e),a=w.EclCoord.fromWgs84(0,0,0),o=w.EclCoord.fromWgs84(zr.observerGd.latitude*rr,zr.observerGd.longitude*rr,zr.observerGd.height),s=w.Solar.topocentricPosition(i,a,!1),c=w.Solar.topocentricPosition(i,o,!1);Y=s.hz.az*rr+180,B=s.hz.alt*rr%360,H=c.hz.alt*rr%360;var u=new w.JulianDay(w.JulianDay.dateToJD(r)).jdJ2000Century();Z=180*w.Solar.meanAnomaly(u)/W,Z%=360,X=1.00014-.01671*Math.cos(Z)-14e-5*Math.cos(2*Z),Q=y(kr(Y,B,149597870700*X/1e3,0,0,0),n),t=zr.observerGd!==Ar&&("Optical"===zr.type||"Observer"===zr.type)&&H>-6}var h=e;h=jr(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds()+1);var m=d(h+=1.15741e-8*r.getUTCMilliseconds());P=nr.length-1,(gr||Mr||pr||lr)&&!vr||(P-=j);for(var f,l,M,T,q,D,I,C,L,U,J,N,F,E,O,V,R,G,ur,hr,mr,br,wr,qr,Dr,Ir,Cr,Lr,Ur,Jr,Nr,Fr,Er,Or,Vr,Rr,Gr,Yr,Br,Hr=-1,Xr=!1;Hr<P;){if(Hr++,(ur=nr[Hr]).satnum){if(ur.skip)continue;V=p(ur,O=1440*(e-ur.jdsatepoch));try{if(S[3*Hr]=V.position.x,S[3*Hr+1]=V.position.y,S[3*Hr+2]=V.position.z,A[3*Hr]=V.velocity.x,A[3*Hr+1]=V.velocity.y,A[3*Hr+2]=V.velocity.z,ur.isimp||O/1440>30){for(var Qr=6378.137,Zr=Math.sqrt(V.position.x*V.position.x+V.position.y*V.position.y),Wr=(Qr-6356.7523142)/Qr,$r=2*Wr-Wr*Wr,Kr=Math.atan2(V.position.y,V.position.x)-n;Kr<-W;)Kr+=$;for(;Kr>W;)Kr-=$;for(var re=0,ee=Math.atan2(V.position.z,Math.sqrt(V.position.x*V.position.x+V.position.y*V.position.y)),ne=void 0;re<20;)ne=1/Math.sqrt(1-$r*(Math.sin(ee)*Math.sin(ee))),ee=Math.atan2(V.position.z+Qr*ne*$r*Math.sin(ee),Zr),re+=1;if(Zr/Math.cos(ee)-Qr*ne>ur.apogee+1e3)throw new Error("Impossible orbit")}Xr||(zr.observerGd===Ar||xr?Xr=!0:(f=v(V.position,n),M=(l=b(zr.observerGd,f)).azimuth,T=l.elevation,q=l.rangeSat))}catch(r){nr[Hr].skip=!0,S[3*Hr]=0,S[3*Hr+1]=0,S[3*Hr+2]=0,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,f=0,l=0,M=0,T=0,q=0}if(k[Hr]=!1,_[Hr]=2,yr&&(Ir=Math.asin(er/Math.sqrt(Math.pow(-S[3*Hr],2)+Math.pow(-S[3*Hr+1],2)+Math.pow(-S[3*Hr+2],2)))*rr,Cr=Math.asin(695700/Math.sqrt(Math.pow(-S[3*Hr]+Q.x,2)+Math.pow(-S[3*Hr+1]+Q.y,2)+Math.pow(-S[3*Hr+2]+Q.z,2)))*rr,Lr=Math.acos(self.numeric.dot([-S[3*Hr],-S[3*Hr+1],-S[3*Hr+2]],[-S[3*Hr]+Q.x,-S[3*Hr+1]+Q.y,-S[3*Hr+2]+Q.z])/(Math.sqrt(Math.pow(-S[3*Hr],2)+Math.pow(-S[3*Hr+1],2)+Math.pow(-S[3*Hr+2],2))*Math.sqrt(Math.pow(-S[3*Hr]+Q.x,2)+Math.pow(-S[3*Hr+1]+Q.y,2)+Math.pow(-S[3*Hr+2]+Q.z,2))))*rr,Ir>Cr&&Lr<Ir-Cr&&(_[Hr]=0),Math.abs(Ir-Cr)<Lr&&Lr<Ir+Cr&&(_[Hr]=1),Cr>Ir&&(_[Hr]=1),Lr<Cr-Ir&&(_[Hr]=1)),zr.observerGd!==Ar&&!t)if(xr){for(E=0;E<Sr.length;E++)if("Optical"!=zr.type||0!=_[Hr]){if(k[Hr])break;(zr=Sr[E]).observerGd={longitude:zr.lon*K,latitude:zr.lat*K,height:1*zr.alt};try{f=v(V.position,n),l=b(zr.observerGd,f)}catch(r){continue}M=l.azimuth,T=l.elevation,q=l.rangeSat,M*=rr,T*=rr,zr.obsminaz>zr.obsmaxaz?((M>=zr.obsminaz||M<=zr.obsmaxaz)&&T>=zr.obsminel&&T<=zr.obsmaxel&&q<=zr.obsmaxrange&&q>=zr.obsminrange||(M>=zr.obsminaz2||M<=zr.obsmaxaz2)&&T>=zr.obsminel2&&T<=zr.obsmaxel2&&q<=zr.obsmaxrange2&&q>=zr.obsminrange2)&&(k[Hr]=!0):(M>=zr.obsminaz&&M<=zr.obsmaxaz&&T>=zr.obsminel&&T<=zr.obsmaxel&&q<=zr.obsmaxrange&&q>=zr.obsminrange||M>=zr.obsminaz2&&M<=zr.obsmaxaz2&&T>=zr.obsminel2&&T<=zr.obsmaxel2&&q<=zr.obsmaxrange2&&q>=zr.obsminrange2)&&(k[Hr]=!0)}}else"Optical"==zr.type&&0==_[Hr]||(M*=rr,T*=rr,zr.obsminaz>zr.obsmaxaz?((M>=zr.obsminaz||M<=zr.obsmaxaz)&&T>=zr.obsminel&&T<=zr.obsmaxel&&q<=zr.obsmaxrange&&q>=zr.obsminrange||(M>=zr.obsminaz2||M<=zr.obsmaxaz2)&&T>=zr.obsminel2&&T<=zr.obsmaxel2&&q<=zr.obsmaxrange2&&q>=zr.obsminrange2)&&(k[Hr]=!0):(M>=zr.obsminaz&&M<=zr.obsmaxaz&&T>=zr.obsminel&&T<=zr.obsmaxel&&q<=zr.obsmaxrange&&q>=zr.obsminrange||M>=zr.obsminaz2&&M<=zr.obsmaxaz2&&T>=zr.obsminel2&&T<=zr.obsmaxel2&&q<=zr.obsmaxrange2&&q>=zr.obsminrange2)&&(k[Hr]=!0))}else if(nr[Hr].isRadarData){if(nr[Hr].skip)continue;nr[Hr].skip=!0,S[3*Hr]=0,S[3*Hr+1]=0,S[3*Hr+2]=0,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0}else if(nr[Hr].static&&!nr[Hr].marker)"Star"==nr[Hr].type?(Ur=z.getStarPosition(r,180,0,nr[Hr]),Ur=kr(Ur.azimuth*rr,Ur.altitude*rr,25e4,0,0,0),(0==S[3*Hr]||S[3*Hr]-Ur.x<.1&&S[3*Hr]-Ur.x>-.1)&&(S[3*Hr]=Ur.x),(0==S[3*Hr+1]||S[3*Hr+1]-Ur.y<.1&&S[3*Hr+1]-Ur.y>-.1)&&(S[3*Hr+1]=Ur.y),(0==S[3*Hr+2]||S[3*Hr+2]-Ur.z<.1&&S[3*Hr+2]-Ur.z>-.1)&&(S[3*Hr+2]=Ur.z)):(L=Math.cos(nr[Hr].lat*K),U=Math.sin(nr[Hr].lat*K),J=Math.cos(nr[Hr].lon*K+n),N=Math.sin(nr[Hr].lon*K+n),S[3*Hr]=(6372+nr[Hr].alt)*L*J,S[3*Hr+1]=(6372+nr[Hr].alt)*L*N,S[3*Hr+2]=(6372+nr[Hr].alt)*U),A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0;else if(nr[Hr].missile){if(!nr[Hr].active)continue;for(R=nr[Hr].altList.length,G=0;G<R;G++)if(1*nr[Hr].startTime+1e3*G>=1*r){F=G;break}nr[Hr].lastTime=nr[Hr].lastTime>=0?nr[Hr].lastTime:0,L=Math.cos(nr[Hr].latList[nr[Hr].lastTime+1]*K),U=Math.sin(nr[Hr].latList[nr[Hr].lastTime+1]*K),J=Math.cos(nr[Hr].lonList[nr[Hr].lastTime+1]*K+m),N=Math.sin(nr[Hr].lonList[nr[Hr].lastTime+1]*K+m),0==nr[Hr].lastTime?(A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0):0==A[3*Hr]&&0==A[3*Hr+1]&&0==A[3*Hr+2]?(A[3*Hr]=(6371+nr[Hr].altList[nr[Hr].lastTime+1])*L*J-S[3*Hr],A[3*Hr+1]=(6371+nr[Hr].altList[nr[Hr].lastTime+1])*L*N-S[3*Hr+1],A[3*Hr+2]=(6371+nr[Hr].altList[nr[Hr].lastTime+1])*U-S[3*Hr+2]):(A[3*Hr]+=(6371+nr[Hr].altList[nr[Hr].lastTime+1])*L*J-S[3*Hr],A[3*Hr+1]+=(6371+nr[Hr].altList[nr[Hr].lastTime+1])*L*N-S[3*Hr+1],A[3*Hr+2]+=(6371+nr[Hr].altList[nr[Hr].lastTime+1])*U-S[3*Hr+2],A[3*Hr]*=.5,A[3*Hr+1]*=.5,A[3*Hr+2]*=.5),L=Math.cos(nr[Hr].latList[F]*K),U=Math.sin(nr[Hr].latList[F]*K),J=Math.cos(nr[Hr].lonList[F]*K+n),N=Math.sin(nr[Hr].lonList[F]*K+n),S[3*Hr]=(6371+nr[Hr].altList[F])*L*J,S[3*Hr+1]=(6371+nr[Hr].altList[F])*L*N,S[3*Hr+2]=(6371+nr[Hr].altList[F])*U,nr[Hr].lastTime=F,f=v({x:D=S[3*Hr],y:I=S[3*Hr+1],z:C=S[3*Hr+2]},n),x({x:D,y:I,z:C},n).height<=150&&!1===nr[Hr].missile&&(console.error(nr[Hr].SCC_NUM),nr[Hr].skip=!0),M=(l=b(zr.observerGd,f)).azimuth*rr,T=l.elevation*rr,q=l.rangeSat,k[Hr]=!1,zr.obsminaz>zr.obsmaxaz?(M>=zr.obsminaz||M<=zr.obsmaxaz)&&T>=zr.obsminel&&T<=zr.obsmaxel&&q<=zr.obsmaxrange&&q>=zr.obsminrange||(M>=zr.obsminaz2||M<=zr.obsmaxaz2)&&T>=zr.obsminel2&&T<=zr.obsmaxel2&&q<=zr.obsmaxrange2&&q>=zr.obsminrange2?k[Hr]=!0:k[Hr]=!1:M>=zr.obsminaz&&M<=zr.obsmaxaz&&T>=zr.obsminel&&T<=zr.obsmaxel&&q<=zr.obsmaxrange&&q>=zr.obsminrange||M>=zr.obsminaz2&&M<=zr.obsmaxaz2&&T>=zr.obsminel2&&T<=zr.obsmaxel2&&q<=zr.obsmaxrange2&&q>=zr.obsminrange2?k[Hr]=!0:k[Hr]=!1}else if(lr||pr){for(xr||zr.observerGd===Ar||(Sr[0]=zr,Sr.length=1),tr=[],E=0;E<Sr.length+1&&(tr.push(Hr),E!=Sr.length);E++)if((zr=Sr[E]).observerGd={longitude:zr.lon*K,latitude:zr.lat*K,height:1*zr.alt},nr[Hr].marker){if(S[3*Hr]=0,S[3*Hr+1]=0,S[3*Hr+2]=0,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,pr)continue;if(!lr)continue;if(zr.observerGd===Ar)continue;if(Sr.length>1&&"Optical"===zr.type)continue;if(Sr.length>1&&"Observer"===zr.type)continue;if(Sr.length>1&&"Mechanical"===zr.type)continue;if(qr=Math.abs(zr.obsmaxaz-zr.obsminaz)<30?.25:2,Dr=zr.obsmaxrange-zr.obsminrange<500?1e3:30,!dr||zr.volume)if(0!==zr.obsminaz&&360!==zr.obsmaxaz){for(br=Math.max(zr.obsminrange,100);br<Math.min(zr.obsmaxrange,6e4);br+=Math.min(zr.obsmaxrange,6e4)/Dr)for(hr=zr.obsminaz,mr=zr.obsminel;mr<zr.obsmaxel;mr+=qr){wr=y(kr(hr,mr,br,zr.observerGd.latitude,zr.observerGd.longitude,zr.observerGd.height),n);try{nr[Hr].active=!0,S[3*Hr]=wr.x,S[3*Hr+1]=wr.y,S[3*Hr+2]=wr.z,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,Hr++}catch(r){console.log(r)}}for(br=Math.max(zr.obsminrange,100);br<Math.min(zr.obsmaxrange,6e4);br+=Math.min(zr.obsmaxrange,6e4)/Dr)for(hr=zr.obsmaxaz,mr=zr.obsminel;mr<zr.obsmaxel;mr+=qr)wr=y(kr(hr,mr,br,zr.observerGd.latitude,zr.observerGd.longitude,zr.observerGd.height),n),nr[Hr].active=!0,S[3*Hr]=wr.x,S[3*Hr+1]=wr.y,S[3*Hr+2]=wr.z,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,Hr++;if(void 0!==zr.obsminaz2){for(br=Math.max(zr.obsminrange2,100);br<Math.min(zr.obsmaxrange2,6e4);br+=Math.min(zr.obsmaxrange2,6e4)/Dr)for(hr=zr.obsminaz2,mr=zr.obsminel2;mr<zr.obsmaxel2;mr+=qr)wr=y(kr(hr,mr,br,zr.observerGd.latitude,zr.observerGd.longitude,zr.observerGd.height),n),nr[Hr].active=!0,S[3*Hr]=wr.x,S[3*Hr+1]=wr.y,S[3*Hr+2]=wr.z,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,Hr++;for(br=Math.max(zr.obsminrange2,100);br<Math.min(zr.obsmaxrange2,6e4);br+=Math.min(zr.obsmaxrange2,6e4)/Dr)for(hr=zr.obsmaxaz2,mr=zr.obsminel2;mr<zr.obsmaxel2;mr+=qr)wr=y(kr(hr,mr,br,zr.observerGd.latitude,zr.observerGd.longitude,zr.observerGd.height),n),nr[Hr].active=!0,S[3*Hr]=wr.x,S[3*Hr+1]=wr.y,S[3*Hr+2]=wr.z,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,Hr++}}else for(br=Math.max(zr.obsminrange,100);br<Math.min(zr.obsmaxrange,6e4);br+=Math.min(zr.obsmaxrange,6e4)/Dr)for(mr=zr.obsmaxel,hr=zr.obsminaz;hr<zr.obsmaxaz;hr+=qr)wr=y(kr(hr,mr,br,zr.observerGd.latitude,zr.observerGd.longitude,zr.observerGd.height),n),nr[Hr].active=!0,S[3*Hr]=wr.x,S[3*Hr+1]=wr.y,S[3*Hr+2]=wr.z,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,Hr++;for(br=Math.max(zr.obsminrange,100);br<Math.min(zr.obsmaxrange,6e4);br+=Math.min(zr.obsmaxrange,6e4)/Dr)for(hr=0;hr<Math.max(360,zr.obsmaxaz);hr+=qr){if(zr.obsminaz>zr.obsmaxaz){if(!(hr>=zr.obsminaz||hr<=zr.obsmaxaz))continue}else if(!(hr>=zr.obsminaz&&hr<=zr.obsmaxaz))continue;if(wr=y(kr(hr,zr.obsminel,br,zr.observerGd.latitude,zr.observerGd.longitude,zr.observerGd.height),n),Hr===P){console.error("No More Markers");break}nr[Hr].active=!0,S[3*Hr]=wr.x,S[3*Hr+1]=wr.y,S[3*Hr+2]=wr.z,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,Hr++}if(zr.obsmaxel-zr.obsminel<20)for(br=Math.max(zr.obsminrange,100);br<Math.min(zr.obsmaxrange,6e4);br+=Math.min(zr.obsmaxrange,6e4)/Dr)for(hr=0;hr<Math.max(360,zr.obsmaxaz);hr+=qr){if(zr.obsminaz>zr.obsmaxaz){if(!(hr>=zr.obsminaz||hr<=zr.obsmaxaz))continue}else if(!(hr>=zr.obsminaz&&hr<=zr.obsmaxaz))continue;if(wr=y(kr(hr,zr.obsmaxel,br,zr.observerGd.latitude,zr.observerGd.longitude,zr.observerGd.height),n),Hr===P){console.error("No More Markers");break}nr[Hr].active=!0,S[3*Hr]=wr.x,S[3*Hr+1]=wr.y,S[3*Hr+2]=wr.z,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,Hr++}if(void 0!==zr.obsminaz2)for(qr=2,br=Math.max(zr.obsminrange2,100);br<Math.min(zr.obsmaxrange2,6e4);br+=Math.min(zr.obsmaxrange2,6e4)/Dr)for(hr=0;hr<360;hr+=1*qr){if(zr.obsminaz2>zr.obsmaxaz2){if(!(hr>=zr.obsminaz2||hr<=zr.obsmaxaz2))continue}else if(!(hr>=zr.obsminaz2&&hr<=zr.obsmaxaz2))continue;if(wr=y(kr(hr,zr.obsminel2,br,zr.observerGd.latitude,zr.observerGd.longitude,zr.observerGd.height),n),Hr===P){console.error("No More Markers");break}nr[Hr].active=!0,S[3*Hr]=wr.x,S[3*Hr+1]=wr.y,S[3*Hr+2]=wr.z,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,Hr++}if(!dr||zr.volume){for(br=Math.min(zr.obsmaxrange,6e4),hr=0;hr<Math.max(360,zr.obsmaxaz);hr+=qr){if(zr.obsminaz>zr.obsmaxaz){if(!(hr>=zr.obsminaz||hr<=zr.obsmaxaz))continue}else if(!(hr>=zr.obsminaz&&hr<=zr.obsmaxaz))continue;for(mr=zr.obsminel;mr<zr.obsmaxel;mr+=qr){if(wr=y(kr(hr,mr,br,zr.observerGd.latitude,zr.observerGd.longitude,zr.observerGd.height),n),Hr===P){console.error("No More Markers");break}nr[Hr].active=!0,S[3*Hr]=wr.x,S[3*Hr+1]=wr.y,S[3*Hr+2]=wr.z,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,Hr++}}if(void 0!==zr.obsminaz2)for(br=Math.min(zr.obsmaxrange2,6e4),hr=0;hr<Math.max(360,zr.obsmaxaz2);hr+=qr){if(zr.obsminaz2>zr.obsmaxaz2){if(!(hr>=zr.obsminaz2||hr<=zr.obsmaxaz2))continue}else if(!(hr>=zr.obsminaz2&&hr<=zr.obsmaxaz2))continue;for(mr=zr.obsminel2;mr<zr.obsmaxel2;mr+=qr){if(wr=y(kr(hr,mr,br,zr.observerGd.latitude,zr.observerGd.longitude,zr.observerGd.height),n),Hr===P){console.error("No More Markers");break}nr[Hr].active=!0,S[3*Hr]=wr.x,S[3*Hr+1]=wr.y,S[3*Hr+2]=wr.z,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,Hr++}}}}}else if((Mr||gr)&&nr[Hr].marker){if(gr&&!0===nr[Hr].active){nr[Hr].active=!1,S[3*Hr]=0,S[3*Hr+1]=0,S[3*Hr+2]=0,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0;continue}for(Jr=0;Jr<ir.length+1;Jr++){if(Jr===ir.length){tr.push(Hr);break}if(-1!==ir[Jr]){if(!Mr)continue;for(Or=(Er=x(y(Fr={x:S[3*ir[Jr]],y:S[3*ir[Jr]+1],z:S[3*ir[Jr]+2]},n),n)).height,Vr={longitude:Er.longitude,latitude:Er.latitude,height:1},Gr=1,Or<2500&&fr<=60&&(Gr=.5),(Or>7e3||fr>=90)&&(Gr=2),ir.length>1&&(Gr=2),Rr=-60;Rr<60;Rr+=Gr)if(!((Nr=Math.max(Math.min(Math.round(Er.latitude*rr)+Rr,90),-90)*K)>90))for(Br=1,Or<2500&&fr<=60&&(Br=.5),(Or>7e3||fr>=90)&&(Br=2),ir.length>1&&(Br=2),Yr=0;Yr<181;Yr+=Br){if((T=(l=b(Vr={longitude:Er.longitude+Yr*K,latitude:Nr,height:15},Fr)).elevation)*rr>0&&90-T*rr<fr){if(Vr=g(Vr),Hr===P){console.error("Ran out of Markers");continue}nr[Hr].active=!0,S[3*Hr]=Vr.x,S[3*Hr+1]=Vr.y,S[3*Hr+2]=Vr.z,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,Hr++}if(0!==Yr&&180!==Yr){if((T=(l=b(Vr={longitude:Er.longitude-Yr*K,latitude:Nr,height:15},Fr)).elevation)*rr>0&&90-T*rr<fr){if(Vr=g(Vr),Hr===P){console.error("Ran out of Markers");continue}nr[Hr].active=!0,S[3*Hr]=Vr.x,S[3*Hr+1]=Vr.y,S[3*Hr+2]=Vr.z,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,Hr++}if(90===Nr||-90===Nr)break}}}}}if(gr=!1,nr[Hr].marker)for(;Hr<P;Hr++){if(!nr[Hr].active){P-=j;break}S[3*Hr]=0,S[3*Hr+1]=0,S[3*Hr+2]=0,A[3*Hr]=0,A[3*Hr+1]=0,A[3*Hr+2]=0,nr[Hr].active=!1}}pr&&(pr=!1,P-=j),Tr={satPos:S,satVel:A},zr.observerGd!==Ar?Tr.satInView=k:Tr.satInView=[],Tr.satInSun=yr?_:[],tr.length>=1?Tr.sensorMarkerArray=tr:Tr.sensorMarkerArray=[],postMessage(Tr),setTimeout((()=>{_r()}),1*ar*or/cr)},jr=(r,e,n,t,i,a)=>367*r-Math.floor(7*(r+Math.floor((e+9)/12))*.25)+Math.floor(275*e/9)+n+1721013.5+((a/60+i)/60+t)/24,Pr=()=>{var r=new Date,e=(Number(r)-Number(mr))*hr;return r.setTime(Number(mr)+ur+e),r}})()})();